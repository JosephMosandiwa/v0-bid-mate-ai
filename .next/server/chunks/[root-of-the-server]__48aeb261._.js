module.exports=[918622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},556704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},324725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},193695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},779314,e=>{"use strict";var t=e.i(252736);function r(){return(0,t.createClient)("https://xqyecqkrtaydoesxnvlw.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}})}e.s(["createAdminClient",()=>r])},837260,e=>{"use strict";var t=e.i(248749),r=e.i(219650),n=e.i(508677),a=e.i(615159),s=e.i(548938),o=e.i(273073),i=e.i(129714),l=e.i(403736),d=e.i(817889),c=e.i(428765),u=e.i(762198),p=e.i(117109),g=e.i(590702),v=e.i(462216),h=e.i(539401),f=e.i(222695),m=e.i(193695);e.i(31514);var R=e.i(267074),_=e.i(779314),x=e.i(490788);async function y(){try{console.log("[v0] Starting direct eTender data fetch");let e=(0,_.createAdminClient)(),t=null,r="";for(let e of["https://ocds-api.etenders.gov.za/api/releases","https://ocds-api.etenders.gov.za/api/v1/releases","https://data.etenders.gov.za/api/releases"])try{console.log("[v0] Trying endpoint:",e);let n=await fetch(e,{headers:{Accept:"application/json","User-Agent":"BidMateAI/1.0"}});if(n.ok){t=await n.json(),r=e,console.log("[v0] Success with endpoint:",e);break}console.log("[v0] Endpoint failed:",e,n.status)}catch(t){console.log("[v0] Endpoint error:",e,t)}if(!t){console.log("[v0] All API endpoints failed, creating sample tenders for testing");let t=[{tender_reference:`SAMPLE-TND-${Date.now()}-001`,title:"Supply and Delivery of Office Furniture",description:"The municipality invites qualified suppliers to bid for the supply and delivery of office furniture including desks, chairs, filing cabinets, and storage units for the new municipal building. Issued by: City of Cape Town Municipality",source_name:"City of Cape Town Municipality",source_level:"municipal",source_province:"Western Cape",close_date:new Date(Date.now()+2592e6).toISOString(),source_url:"https://etenders.gov.za/sample/001",tender_url:"https://etenders.gov.za/sample/001",category:"Goods",estimated_value:"R 500,000",is_active:!0,scraped_at:new Date().toISOString()},{tender_reference:`SAMPLE-TND-${Date.now()}-002`,title:"Road Maintenance and Repair Services",description:"Appointment of a service provider for road maintenance and repair services for provincial roads in the Gauteng Province for a period of 24 months. Issued by: Gauteng Department of Roads and Transport",source_name:"Gauteng Department of Roads and Transport",source_level:"provincial",source_province:"Gauteng",close_date:new Date(Date.now()+3888e6).toISOString(),source_url:"https://etenders.gov.za/sample/002",tender_url:"https://etenders.gov.za/sample/002",category:"Construction",estimated_value:"R 2,500,000",is_active:!0,scraped_at:new Date().toISOString()},{tender_reference:`SAMPLE-TND-${Date.now()}-003`,title:"Development of Web-Based Management Information System",description:"The Department requires a service provider to develop a comprehensive web-based management information system to track and manage departmental operations, reporting, and analytics. Issued by: Eastern Cape Department of Health",source_name:"Eastern Cape Department of Health",source_level:"provincial",source_province:"Eastern Cape",close_date:new Date(Date.now()+5184e6).toISOString(),source_url:"https://etenders.gov.za/sample/003",tender_url:"https://etenders.gov.za/sample/003",category:"IT Services",estimated_value:"R 1,200,000",is_active:!0,scraped_at:new Date().toISOString()}];console.log("[v0] Sample tenders created:",JSON.stringify(t,null,2)),console.log("[v0] Attempting to save to scraped_tenders table...");let{data:r,error:n}=await e.from("scraped_tenders").insert(t).select();if(n)return console.log("[v0] Database error:",JSON.stringify(n,null,2)),console.log("[v0] Error code:",n.code),console.log("[v0] Error message:",n.message),console.log("[v0] Error details:",n.details),x.NextResponse.json({error:"Failed to save sample tenders",code:n.code,message:n.message,details:n.details,hint:n.hint,fullError:n},{status:500});return console.log("[v0] Successfully saved",r?.length||0,"sample tenders"),console.log("[v0] Saved tender IDs:",r?.map(e=>e.id)),x.NextResponse.json({success:!0,message:"Sample tenders created successfully",tendersSaved:r?.length||0,tenders:r})}let n=Array.isArray(t)?t:t.releases||t.data||[];console.log("[v0] Processing",n.length,"releases from API");let a=[];for(let e of n.slice(0,50))try{let t=e.tender||{},r=e.ocid||`AUTO-${Date.now()}-${Math.random()}`,n=t.title||t.description||"Untitled Tender",s=t.description||t.title||"",o=e.buyer||e.parties?.find(e=>e.roles?.includes("buyer"));o?.name;let i=t.tenderPeriod?.endDate||null,l=e.date||new Date().toISOString(),d=t.value?.amount||null,c=(t.documents||[]).map(e=>e.url).filter(Boolean),u={source_id:1,source_name:"National Treasury eTender Portal",source_level:"national",tender_reference:r,title:n.substring(0,500),description:s.substring(0,5e3),category:t.mainProcurementCategory||null,close_date:i,publish_date:l,estimated_value:d?`R ${d.toLocaleString()}`:null,contact_person:null,contact_email:null,contact_phone:null,source_url:`https://etenders.gov.za/tender/${r}`,tender_url:`https://etenders.gov.za/tender/${r}`,document_urls:c,is_active:!0,scraped_at:new Date().toISOString(),raw_data:e};a.push(u)}catch(e){console.log("[v0] Error processing release:",e)}if(console.log("[v0] Processed",a.length,"tenders"),0===a.length)return x.NextResponse.json({success:!1,message:"No valid tenders found in API response"});console.log("[v0] Saving tenders to database...");let{data:s,error:o}=await e.from("scraped_tenders").upsert(a,{onConflict:"tender_reference",ignoreDuplicates:!1}).select();if(o)return console.log("[v0] Database error:",o),x.NextResponse.json({error:"Failed to save tenders",details:o,fieldError:o.message},{status:500});return console.log("[v0] Successfully saved",s?.length||a.length,"tenders"),x.NextResponse.json({success:!0,mode:"api",apiEndpoint:r,tendersProcessed:a.length,tendersSaved:s?.length||a.length,sample:a[0]})}catch(e){return console.error("[v0] Fatal error:",e),x.NextResponse.json({error:"Fatal error during fetch",details:e instanceof Error?e.message:String(e),stack:e instanceof Error?e.stack:void 0},{status:500})}}e.s(["POST",()=>y],219021);var w=e.i(219021);let E=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/etender/fetch/route",pathname:"/api/etender/fetch",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/etender/fetch/route.ts",nextConfigOutput:"",userland:w}),{workAsyncStorage:S,workUnitAsyncStorage:C,serverHooks:A}=E;function b(){return(0,n.patchFetch)({workAsyncStorage:S,workUnitAsyncStorage:C})}async function D(e,t,n){E.isDev&&(0,a.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let _="/api/etender/fetch/route";_=_.replace(/\/index$/,"")||"/";let x=await E.prepare(e,t,{srcPage:_,multiZoneDraftMode:!1});if(!x)return t.statusCode=400,t.end("Bad Request"),null==n.waitUntil||n.waitUntil.call(n,Promise.resolve()),null;let{buildId:y,params:w,nextConfig:S,parsedUrl:C,isDraftMode:A,prerenderManifest:b,routerServerContext:D,isOnDemandRevalidate:T,revalidateOnlyGenerated:P,resolvedPathname:N,clientReferenceManifest:O,serverActionsManifest:I}=x,k=(0,l.normalizeAppPath)(_),j=!!(b.dynamicRoutes[k]||b.routes[N]),M=async()=>((null==D?void 0:D.render404)?await D.render404(e,t,C,!1):t.end("This page could not be found"),null);if(j&&!A){let e=!!b.routes[N],t=b.dynamicRoutes[k];if(t&&!1===t.fallback&&!e){if(S.experimental.adapterPath)return await M();throw new m.NoFallbackError}}let q=null;!j||E.isDev||A||(q="/index"===(q=N)?"/":q);let U=!0===E.isDev||!j,H=j&&!U;I&&O&&(0,o.setReferenceManifestsSingleton)({page:_,clientReferenceManifest:O,serverActionsManifest:I,serverModuleMap:(0,i.createServerModuleMap)({serverActionsManifest:I})});let $=e.method||"GET",F=(0,s.getTracer)(),z=F.getActiveScopeSpan(),L={params:w,prerenderManifest:b,renderOpts:{experimental:{authInterrupts:!!S.experimental.authInterrupts},cacheComponents:!!S.cacheComponents,supportsDynamicResponse:U,incrementalCache:(0,a.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:S.cacheLife,waitUntil:n.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,n)=>E.onRequestError(e,t,n,D)},sharedContext:{buildId:y}},B=new d.NodeNextRequest(e),K=new d.NodeNextResponse(t),G=c.NextRequestAdapter.fromNodeNextRequest(B,(0,c.signalFromNodeResponse)(t));try{let o=async e=>E.handle(G,L).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=F.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=r.get("next.route");if(n){let t=`${$} ${n}`;e.setAttributes({"next.route":n,"http.route":n,"next.span_name":t}),e.updateName(t)}else e.updateName(`${$} ${_}`)}),i=!!(0,a.getRequestMeta)(e,"minimalMode"),l=async a=>{var s,l;let d=async({previousCacheEntry:r})=>{try{if(!i&&T&&P&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let s=await o(a);e.fetchMetrics=L.renderOpts.fetchMetrics;let l=L.renderOpts.pendingWaitUntil;l&&n.waitUntil&&(n.waitUntil(l),l=void 0);let d=L.renderOpts.collectedTags;if(!j)return await (0,g.sendResponse)(B,K,s,L.renderOpts.pendingWaitUntil),null;{let e=await s.blob(),t=(0,v.toNodeOutgoingHttpHeaders)(s.headers);d&&(t[f.NEXT_CACHE_TAGS_HEADER]=d),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==L.renderOpts.collectedRevalidate&&!(L.renderOpts.collectedRevalidate>=f.INFINITE_CACHE)&&L.renderOpts.collectedRevalidate,n=void 0===L.renderOpts.collectedExpire||L.renderOpts.collectedExpire>=f.INFINITE_CACHE?void 0:L.renderOpts.collectedExpire;return{value:{kind:R.CachedRouteKind.APP_ROUTE,status:s.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:n}}}}catch(t){throw(null==r?void 0:r.isStale)&&await E.onRequestError(e,t,{routerKind:"App Router",routePath:_,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:H,isOnDemandRevalidate:T})},D),t}},c=await E.handleResponse({req:e,nextConfig:S,cacheKey:q,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:b,isRoutePPREnabled:!1,isOnDemandRevalidate:T,revalidateOnlyGenerated:P,responseGenerator:d,waitUntil:n.waitUntil,isMinimalMode:i});if(!j)return null;if((null==c||null==(s=c.value)?void 0:s.kind)!==R.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==c||null==(l=c.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});i||t.setHeader("x-nextjs-cache",T?"REVALIDATED":c.isMiss?"MISS":c.isStale?"STALE":"HIT"),A&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let u=(0,v.fromNodeOutgoingHttpHeaders)(c.value.headers);return i&&j||u.delete(f.NEXT_CACHE_TAGS_HEADER),!c.cacheControl||t.getHeader("Cache-Control")||u.get("Cache-Control")||u.set("Cache-Control",(0,h.getCacheControlHeader)(c.cacheControl)),await (0,g.sendResponse)(B,K,new Response(c.value.body,{headers:u,status:c.value.status||200})),null};z?await l(z):await F.withPropagatedContext(e.headers,()=>F.trace(u.BaseServerSpan.handleRequest,{spanName:`${$} ${_}`,kind:s.SpanKind.SERVER,attributes:{"http.method":$,"http.target":e.url}},l))}catch(t){if(t instanceof m.NoFallbackError||await E.onRequestError(e,t,{routerKind:"App Router",routePath:k,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:H,isOnDemandRevalidate:T})}),j)throw t;return await (0,g.sendResponse)(B,K,new Response(null,{status:500})),null}}e.s(["handler",()=>D,"patchFetch",()=>b,"routeModule",()=>E,"serverHooks",()=>A,"workAsyncStorage",()=>S,"workUnitAsyncStorage",()=>C],837260)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__48aeb261._.js.map