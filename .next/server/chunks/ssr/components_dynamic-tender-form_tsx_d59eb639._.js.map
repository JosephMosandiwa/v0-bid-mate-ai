{"version":3,"sources":["../../../../app/actions/data%3A1e3664%20%3Ctext/javascript%3E","../../../../components/dynamic-tender-form.tsx","../../../../components/strategist/tender-context-panel.tsx","../../../../node_modules/.pnpm/lucide-react%400.454.0_react%4019.1.0/node_modules/lucide-react/src/icons/arrow-right.ts","../../../../node_modules/.pnpm/lucide-react%400.454.0_react%4019.1.0/node_modules/lucide-react/src/icons/percent.ts"],"sourcesContent":["/* __next_internal_action_entry_do_not_use__ [{\"407a8ca08fcf9739cce046a54db0f5cf64d000762a\":\"saveScrapedTenderToUser\"},\"app/actions/tender-actions.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var saveScrapedTenderToUser=/*#__PURE__*/createServerReference(\"407a8ca08fcf9739cce046a54db0f5cf64d000762a\",callServer,void 0,findSourceMapURL,\"saveScrapedTenderToUser\");","\"use client\"\r\n\r\nimport { AlertTitle } from \"@/components/ui/alert\"\r\nimport { useState, useEffect } from \"react\"\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Textarea } from \"@/components/ui/textarea\"\r\nimport { Label } from \"@/components/ui/label\"\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\r\nimport { Checkbox } from \"@/components/ui/checkbox\"\r\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\"\r\nimport { Alert, AlertDescription } from \"@/components/ui/alert\"\r\nimport {\r\n  Loader2,\r\n  Save,\r\n  CheckCircle2,\r\n  Download,\r\n  FileText,\r\n  AlertCircle,\r\n  ChevronDown,\r\n  ChevronUp,\r\n  Clock,\r\n  Percent,\r\n} from \"lucide-react\"\r\nimport { formatZAR } from \"@/lib/utils/currency\"\r\nimport { saveScrapedTenderToUser } from \"@/app/actions/tender-actions\"\r\nimport { useToast } from \"@/hooks/use-toast\"\r\nimport { Progress } from \"@/components/ui/progress\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\ninterface FormField {\r\n  id: string\r\n  label: string\r\n  type: string\r\n  required: boolean\r\n  placeholder?: string\r\n  description?: string\r\n  options?: string[]\r\n  validation?: {\r\n    min?: number\r\n    max?: number\r\n    pattern?: string\r\n    maxLength?: number\r\n  }\r\n  section?: string\r\n}\r\n\r\ninterface DynamicTenderFormProps {\r\n  tenderId: string\r\n  formFields: FormField[]\r\n  googleMapsApiKey?: string\r\n  documents?: any[]\r\n  tenderData?: {\r\n    id: string\r\n    title: string\r\n    source_name: string\r\n    description?: string\r\n    publish_date?: string\r\n    close_date?: string\r\n    estimated_value?: string\r\n    category?: string\r\n    tender_url?: string\r\n  }\r\n  onProgressChange?: (progressPercent: number, status: string) => void\r\n}\r\n\r\nexport function DynamicTenderForm({\r\n  tenderId,\r\n  formFields,\r\n  googleMapsApiKey,\r\n  documents = [],\r\n  tenderData,\r\n  onProgressChange,\r\n}: DynamicTenderFormProps) {\r\n  console.log(\"[v0] ðŸ”µ DynamicTenderForm COMPONENT RENDERING\")\r\n  console.log(\"[v0] Tender ID:\", tenderId)\r\n  console.log(\"[v0] FormFields received:\", formFields?.length || 0, \"fields\")\r\n  console.log(\"[v0] FormFields:\", formFields)\r\n  console.log(\"[v0] Documents:\", documents?.length || 0)\r\n\r\n  const [formData, setFormData] = useState<Record<string, any>>({})\r\n  const [loading, setLoading] = useState(true)\r\n  const [saving, setSaving] = useState(false)\r\n  const [saved, setSaved] = useState(false)\r\n  const [errors, setErrors] = useState<Record<string, string>>({})\r\n  const [fillingPdf, setFillingPdf] = useState(false)\r\n  const [hasAutoSaved, setHasAutoSaved] = useState(false)\r\n  const [collapsedSections, setCollapsedSections] = useState<Set<string>>(new Set())\r\n  const [lastSaveTime, setLastSaveTime] = useState<Date | null>(null)\r\n  const [formCompletionPercent, setFormCompletionPercent] = useState(0)\r\n  const { toast } = useToast()\r\n\r\n  const isCustomTender = tenderId.length === 36 && tenderId.includes(\"-\")\r\n  const apiBasePath = isCustomTender ? `/api/custom-tenders/${tenderId}` : `/api/tenders/scraped/${tenderId}`\r\n\r\n  const availableDocuments = documents.filter(\r\n    (doc: any) => doc.document_type === \"application/pdf\" || doc.file_type === \"application/pdf\",\r\n  )\r\n\r\n  useEffect(() => {\r\n    loadSavedResponses()\r\n  }, [tenderId])\r\n\r\n  useEffect(() => {\r\n    calculateFormCompletion()\r\n  }, [formData, formFields])\r\n\r\n  const calculateFormCompletion = () => {\r\n    if (formFields.length === 0) {\r\n      setFormCompletionPercent(0)\r\n      return\r\n    }\r\n\r\n    const requiredFields = formFields.filter((f) => f.required)\r\n    const totalFields = requiredFields.length > 0 ? requiredFields.length : formFields.length\r\n    const filledFields =\r\n      requiredFields.length > 0\r\n        ? requiredFields.filter((f) => formData[f.id] && formData[f.id] !== \"\").length\r\n        : Object.keys(formData).filter((key) => formData[key] && formData[key] !== \"\").length\r\n\r\n    const percent = Math.round((filledFields / totalFields) * 100)\r\n    setFormCompletionPercent(percent)\r\n\r\n    // Update tender progress status based on form completion\r\n    let status = \"reviewing\"\r\n    if (percent >= 100) {\r\n      status = \"ready\"\r\n    } else if (percent >= 75) {\r\n      status = \"preparing\"\r\n    } else if (percent >= 50) {\r\n      status = \"planning\"\r\n    } else if (percent >= 25) {\r\n      status = \"analyzing\"\r\n    }\r\n\r\n    if (onProgressChange && percent > 0) {\r\n      onProgressChange(Math.min(percent, 95), status) // Cap at 95% until submitted\r\n    }\r\n  }\r\n\r\n  const loadSavedResponses = async () => {\r\n    try {\r\n      const response = await fetch(`${apiBasePath}/responses`)\r\n      if (response.ok) {\r\n        const { responses } = await response.json()\r\n        if (responses) {\r\n          setFormData(responses)\r\n          setLastSaveTime(new Date())\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[v0] Error loading saved responses:\", error)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleAutoSave = async () => {\r\n    if (!tenderData || hasAutoSaved) return\r\n\r\n    try {\r\n      const result = await saveScrapedTenderToUser(tenderData)\r\n      if (result.success) {\r\n        setHasAutoSaved(true)\r\n        if (result.isNew) {\r\n          toast({\r\n            title: \"Tender Saved\",\r\n            description: \"This tender has been added to 'My Tenders' with status 'In Progress'\",\r\n          })\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[v0] Error auto-saving tender:\", error)\r\n    }\r\n  }\r\n\r\n  const handleChange = (fieldId: string, value: any) => {\r\n    setFormData((prev) => ({ ...prev, [fieldId]: value }))\r\n    setErrors((prev) => ({ ...prev, [fieldId]: \"\" }))\r\n    setSaved(false)\r\n\r\n    if (Object.keys(formData).length === 0 && !hasAutoSaved) {\r\n      handleAutoSave()\r\n    }\r\n  }\r\n\r\n  const validateField = (field: FormField, value: any): string | null => {\r\n    if (field.required && (!value || value === \"\")) {\r\n      return \"This field is required\"\r\n    }\r\n\r\n    if (field.validation && value) {\r\n      if (field.type === \"number\") {\r\n        const num = Number(value)\r\n        if (field.validation.min !== undefined && num < field.validation.min) {\r\n          return `Minimum value is ${field.validation.min}`\r\n        }\r\n        if (field.validation.max !== undefined && num > field.validation.max) {\r\n          return `Maximum value is ${field.validation.max}`\r\n        }\r\n      }\r\n\r\n      if (field.type === \"text\" || field.type === \"textarea\") {\r\n        if (field.validation.maxLength && value.length > field.validation.maxLength) {\r\n          return `Maximum length is ${field.validation.maxLength} characters`\r\n        }\r\n        if (field.validation.pattern && !new RegExp(field.validation.pattern).test(value)) {\r\n          return `Invalid format`\r\n        }\r\n      }\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  const handleSave = async () => {\r\n    const newErrors: Record<string, string> = {}\r\n\r\n    // Validate all required fields\r\n    formFields.forEach((field) => {\r\n      const error = validateField(field, formData[field.id])\r\n      if (error) {\r\n        newErrors[field.id] = error\r\n      }\r\n    })\r\n\r\n    if (Object.keys(newErrors).length > 0) {\r\n      setErrors(newErrors)\r\n      toast({\r\n        title: \"Validation Error\",\r\n        description: `Please fix ${Object.keys(newErrors).length} error(s) before saving`,\r\n        variant: \"destructive\",\r\n      })\r\n      return\r\n    }\r\n\r\n    setSaving(true)\r\n    try {\r\n      const response = await fetch(`${apiBasePath}/responses`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ responses: formData }),\r\n      })\r\n\r\n      if (response.ok) {\r\n        setSaved(true)\r\n        setLastSaveTime(new Date())\r\n        setTimeout(() => setSaved(false), 3000)\r\n        toast({\r\n          title: \"Saved\",\r\n          description: \"Your responses have been saved successfully\",\r\n        })\r\n\r\n        // Update progress log\r\n        if (isCustomTender) {\r\n          await fetch(`/api/strategist/progress`, {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({\r\n              tenderId,\r\n              tenderType: \"custom\",\r\n              status: formCompletionPercent >= 100 ? \"ready\" : \"preparing\",\r\n              progressPercent: Math.min(formCompletionPercent, 95),\r\n              milestone: `Form ${formCompletionPercent}% complete`,\r\n              notes: `User saved form responses - ${Object.keys(formData).length} fields filled`,\r\n            }),\r\n          })\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[v0] Error saving responses:\", error)\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to save responses\",\r\n        variant: \"destructive\",\r\n      })\r\n    } finally {\r\n      setSaving(false)\r\n    }\r\n  }\r\n\r\n  const handlePreviewFilledPdf = async (documentId: string) => {\r\n    console.log(\"[v0] ðŸ”µ PREVIEW BUTTON CLICKED - Function starting...\")\r\n    console.log(\"[v0] Current timestamp:\", new Date().toISOString())\r\n\r\n    setFillingPdf(true)\r\n    try {\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] PREVIEW FILLED PDF REQUEST\")\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] Document ID:\", documentId)\r\n      console.log(\"[v0] Form data being sent:\", formData)\r\n      console.log(\"[v0] Number of filled fields:\", Object.keys(formData).length)\r\n      console.log(\"[v0] Field IDs:\", Object.keys(formData))\r\n\r\n      if (Object.keys(formData).length === 0) {\r\n        console.log(\"[v0] âš âš âš  WARNING: No form data to fill! âš âš âš \")\r\n        console.log(\"[v0] You haven't filled any fields yet. The PDF will open but will be empty.\")\r\n      }\r\n\r\n      console.log(\"[v0] Making fetch request to:\", `${apiBasePath}/fill-pdf`)\r\n      const response = await fetch(`${apiBasePath}/fill-pdf`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ documentId }),\r\n      })\r\n\r\n      console.log(\"[v0] âœ“ Fetch completed\")\r\n      console.log(\"[v0] Response status:\", response.status)\r\n      console.log(\"[v0] Response OK:\", response.ok)\r\n      console.log(\"[v0] Response headers:\")\r\n      console.log(\"[v0]   - PDF Fields Total:\", response.headers.get(\"X-PDF-Fields-Total\"))\r\n      console.log(\"[v0]   - Fields Filled:\", response.headers.get(\"X-Fields-Filled\"))\r\n      console.log(\"[v0]   - Responses Total:\", response.headers.get(\"X-Responses-Total\"))\r\n      console.log(\"[v0]   - Fill Success Rate:\", response.headers.get(\"X-Fill-Success-Rate\") + \"%\")\r\n\r\n      const pdfFieldsTotal = Number.parseInt(response.headers.get(\"X-PDF-Fields-Total\") || \"0\")\r\n      const fieldsFilled = Number.parseInt(response.headers.get(\"X-Fields-Filled\") || \"0\")\r\n      const responsesTotal = Number.parseInt(response.headers.get(\"X-Responses-Total\") || \"0\")\r\n      const successRate = Number.parseFloat(response.headers.get(\"X-Fill-Success-Rate\") || \"0\")\r\n\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] FILL RESULTS:\")\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] PDF has\", pdfFieldsTotal, \"interactive form fields\")\r\n      console.log(\"[v0] You filled\", responsesTotal, \"form fields\")\r\n      console.log(\"[v0] Successfully matched and filled\", fieldsFilled, \"fields\")\r\n      console.log(\"[v0] Success rate:\", successRate.toFixed(1) + \"%\")\r\n      console.log(\"[v0] ========================================\")\r\n\r\n      if (pdfFieldsTotal === 0) {\r\n        console.log(\"[v0] âš âš âš  WARNING: This PDF has NO interactive form fields! âš âš âš \")\r\n        console.log(\"[v0] This is a static PDF document. The fields cannot be filled automatically.\")\r\n        console.log(\"[v0] You may need to manually fill this PDF or use a different document.\")\r\n        toast({\r\n          title: \"Static PDF Detected\",\r\n          description:\r\n            \"This PDF has no fillable fields. Click 'Generate Response PDF' below to create a new document with your responses.\",\r\n          variant: \"destructive\",\r\n        })\r\n      } else if (fieldsFilled === 0 && responsesTotal > 0) {\r\n        console.log(\"[v0] âš âš âš  WARNING: No fields were filled! âš âš âš \")\r\n        console.log(\"[v0] The form field names don't match the PDF field names.\")\r\n        console.log(\"[v0] Check the server logs for detailed field matching information.\")\r\n        toast({\r\n          title: \"No Fields Matched\",\r\n          description:\r\n            \"The form field names don't match the PDF field names. The document will open, but your responses couldn't be filled in automatically.\",\r\n          variant: \"destructive\",\r\n        })\r\n      } else if (successRate < 50) {\r\n        console.log(\"[v0] âš  Low success rate - many fields didn't match\")\r\n        toast({\r\n          title: \"Partial Fill\",\r\n          description: `Only ${fieldsFilled} out of ${responsesTotal} fields were filled (${successRate.toFixed(1)}%). Some field names may not match.`,\r\n        })\r\n      } else if (fieldsFilled > 0) {\r\n        toast({\r\n          title: \"PDF Filled Successfully\",\r\n          description: `${fieldsFilled} field${fieldsFilled === 1 ? \"\" : \"s\"} filled in the PDF`,\r\n        })\r\n      }\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || \"Failed to fill PDF\")\r\n      }\r\n\r\n      console.log(\"[v0] Converting response to blob...\")\r\n      const blob = await response.blob()\r\n      console.log(\"[v0] Blob size:\", blob.size, \"bytes\")\r\n      console.log(\"[v0] Blob type:\", blob.type)\r\n\r\n      const url = window.URL.createObjectURL(blob)\r\n      console.log(\"[v0] Opening PDF in new window...\")\r\n      window.open(url, \"_blank\")\r\n\r\n      setTimeout(() => window.URL.revokeObjectURL(url), 1000)\r\n      console.log(\"[v0] âœ“ Preview completed successfully\")\r\n    } catch (error: any) {\r\n      console.error(\"[v0] âŒ ERROR in handlePreviewFilledPdf:\")\r\n      console.error(\"[v0] Error type:\", error?.constructor?.name)\r\n      console.error(\"[v0] Error message:\", error?.message)\r\n      console.error(\"[v0] Full error:\", error)\r\n      toast({\r\n        title: \"Error\",\r\n        description: error.message || \"Failed to preview filled PDF\",\r\n        variant: \"destructive\",\r\n      })\r\n    } finally {\r\n      console.log(\"[v0] ðŸ”µ PREVIEW FUNCTION ENDING\")\r\n      setFillingPdf(false)\r\n    }\r\n  }\r\n\r\n  const handleDownloadFilledPdf = async (documentId: string) => {\r\n    setFillingPdf(true)\r\n    try {\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] DOWNLOAD FILLED PDF REQUEST\")\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] Document ID:\", documentId)\r\n      console.log(\"[v0] Form data being sent:\", formData)\r\n      console.log(\"[v0] Number of filled fields:\", Object.keys(formData).length)\r\n\r\n      const response = await fetch(`${apiBasePath}/fill-pdf`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ documentId }),\r\n      })\r\n\r\n      const pdfFieldsTotal = Number.parseInt(response.headers.get(\"X-PDF-Fields-Total\") || \"0\")\r\n      const fieldsFilled = Number.parseInt(response.headers.get(\"X-Fields-Filled\") || \"0\")\r\n      const responsesTotal = Number.parseInt(response.headers.get(\"X-Responses-Total\") || \"0\")\r\n      const successRate = Number.parseFloat(response.headers.get(\"X-Fill-Success-Rate\") || \"0\")\r\n\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] FILL RESULTS:\")\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] PDF Fields:\", pdfFieldsTotal)\r\n      console.log(\"[v0] Responses:\", responsesTotal)\r\n      console.log(\"[v0] Filled:\", fieldsFilled)\r\n      console.log(\"[v0] Success Rate:\", successRate.toFixed(1) + \"%\")\r\n      console.log(\"[v0] ========================================\")\r\n\r\n      if (pdfFieldsTotal === 0) {\r\n        toast({\r\n          title: \"PDF Has No Form Fields\",\r\n          description:\r\n            \"This PDF doesn't have interactive form fields. The document will download, but your responses cannot be automatically filled in.\",\r\n          variant: \"destructive\",\r\n        })\r\n      } else if (fieldsFilled === 0 && responsesTotal > 0) {\r\n        toast({\r\n          title: \"No Fields Matched\",\r\n          description: \"The form field names don't match the PDF field names. Check the console for details.\",\r\n          variant: \"destructive\",\r\n        })\r\n      } else if (fieldsFilled > 0) {\r\n        toast({\r\n          title: \"Success\",\r\n          description: `Filled PDF downloaded with ${fieldsFilled} field${fieldsFilled === 1 ? \"\" : \"s\"} filled`,\r\n        })\r\n      }\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || \"Failed to fill PDF\")\r\n      }\r\n\r\n      const blob = await response.blob()\r\n      const url = window.URL.createObjectURL(blob)\r\n      const a = document.createElement(\"a\")\r\n      a.href = url\r\n      a.download = `filled_tender_${tenderId}.pdf`\r\n      document.body.appendChild(a)\r\n      a.click()\r\n      window.URL.revokeObjectURL(url)\r\n      document.body.removeChild(a)\r\n    } catch (error: any) {\r\n      console.error(\"[v0] Error downloading filled PDF:\", error)\r\n      toast({\r\n        title: \"Error\",\r\n        description: error.message || \"Failed to download filled PDF\",\r\n        variant: \"destructive\",\r\n      })\r\n    } finally {\r\n      setFillingPdf(false)\r\n    }\r\n  }\r\n\r\n  const handleGenerateResponsePdf = async () => {\r\n    if (Object.keys(formData).length === 0) {\r\n      toast({\r\n        title: \"No Responses\",\r\n        description: \"Please fill in some form fields before generating a response PDF.\",\r\n        variant: \"destructive\",\r\n      })\r\n      return\r\n    }\r\n\r\n    setFillingPdf(true)\r\n    try {\r\n      const response = await fetch(`${apiBasePath}/generate-response-pdf`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || \"Failed to generate PDF\")\r\n      }\r\n\r\n      const blob = await response.blob()\r\n      const url = window.URL.createObjectURL(blob)\r\n      window.open(url, \"_blank\")\r\n      setTimeout(() => window.URL.revokeObjectURL(url), 1000)\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Response PDF generated successfully\",\r\n      })\r\n    } catch (error: any) {\r\n      console.error(\"[v0] Error generating response PDF:\", error)\r\n      toast({\r\n        title: \"Error\",\r\n        description: error.message || \"Failed to generate response PDF\",\r\n        variant: \"destructive\",\r\n      })\r\n    } finally {\r\n      setFillingPdf(false)\r\n    }\r\n  }\r\n\r\n  const handleDownloadResponsePdf = async () => {\r\n    if (Object.keys(formData).length === 0) {\r\n      toast({\r\n        title: \"No Responses\",\r\n        description: \"Please fill in some form fields before downloading a response PDF.\",\r\n        variant: \"destructive\",\r\n      })\r\n      return\r\n    }\r\n\r\n    setFillingPdf(true)\r\n    try {\r\n      const response = await fetch(`${apiBasePath}/generate-response-pdf`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || \"Failed to generate PDF\")\r\n      }\r\n\r\n      const blob = await response.blob()\r\n      const url = window.URL.createObjectURL(blob)\r\n      const a = document.createElement(\"a\")\r\n      a.href = url\r\n      a.download = `tender_response_${tenderId}.pdf`\r\n      document.body.appendChild(a)\r\n      a.click()\r\n      window.URL.revokeObjectURL(url)\r\n      document.body.removeChild(a)\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Response PDF downloaded successfully\",\r\n      })\r\n    } catch (error: any) {\r\n      console.error(\"[v0] Error downloading response PDF:\", error)\r\n      toast({\r\n        title: \"Error\",\r\n        description: error.message || \"Failed to download response PDF\",\r\n        variant: \"destructive\",\r\n      })\r\n    } finally {\r\n      setFillingPdf(false)\r\n    }\r\n  }\r\n\r\n  const handleMakePdfEditable = async () => {\r\n    if (availableDocuments.length === 0) {\r\n      toast({\r\n        title: \"No Document\",\r\n        description: \"Please upload a PDF document first.\",\r\n        variant: \"destructive\",\r\n      })\r\n      return\r\n    }\r\n\r\n    if (Object.keys(formData).length === 0) {\r\n      toast({\r\n        title: \"No Responses\",\r\n        description: \"Please fill in some form fields first.\",\r\n        variant: \"destructive\",\r\n      })\r\n      return\r\n    }\r\n\r\n    setFillingPdf(true)\r\n    try {\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] MAKE PDF EDITABLE - URL CONSTRUCTION\")\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] tenderId:\", tenderId)\r\n      console.log(\"[v0] isCustomTender:\", isCustomTender)\r\n      console.log(\"[v0] apiBasePath:\", apiBasePath)\r\n      const fullUrl = `${apiBasePath}/make-pdf-editable`\r\n      console.log(\"[v0] Full URL being fetched:\", fullUrl)\r\n      console.log(\"[v0] URL length:\", fullUrl.length)\r\n      console.log(\"[v0] URL contains duplicate?:\", fullUrl.includes(\"/make-pdf-editable/\"))\r\n      console.log(\"[v0] Document ID:\", availableDocuments[0].id)\r\n      console.log(\"[v0] ========================================\")\r\n\r\n      const response = await fetch(fullUrl, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ documentId: availableDocuments[0].id }),\r\n      })\r\n\r\n      console.log(\"[v0] Response status:\", response.status)\r\n      console.log(\"[v0] Response OK:\", response.ok)\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        console.error(\"[v0] API error response:\", error)\r\n        throw new Error(error.error || \"Failed to make PDF editable\")\r\n      }\r\n\r\n      const fieldsAdded = response.headers.get(\"X-Fields-Added\")\r\n      const fieldsFilled = response.headers.get(\"X-Fields-Filled\")\r\n\r\n      console.log(\"[v0] Fields added:\", fieldsAdded)\r\n      console.log(\"[v0] Fields filled:\", fieldsFilled)\r\n\r\n      const blob = await response.blob()\r\n      const url = window.URL.createObjectURL(blob)\r\n      window.open(url, \"_blank\")\r\n      setTimeout(() => window.URL.revokeObjectURL(url), 1000)\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: `Created editable PDF with ${fieldsAdded} form fields (${fieldsFilled} filled)`,\r\n      })\r\n    } catch (error: any) {\r\n      console.error(\"[v0] Error making PDF editable:\", error)\r\n      toast({\r\n        title: \"Error\",\r\n        description: error.message || \"Failed to make PDF editable\",\r\n        variant: \"destructive\",\r\n      })\r\n    } finally {\r\n      setFillingPdf(false)\r\n    }\r\n  }\r\n\r\n  const handleDownloadEditablePdf = async () => {\r\n    if (availableDocuments.length === 0) {\r\n      toast({\r\n        title: \"No Document\",\r\n        description: \"Please upload a PDF document first.\",\r\n        variant: \"destructive\",\r\n      })\r\n      return\r\n    }\r\n\r\n    if (Object.keys(formData).length === 0) {\r\n      toast({\r\n        title: \"No Responses\",\r\n        description: \"Please fill in some form fields first.\",\r\n        variant: \"destructive\",\r\n      })\r\n      return\r\n    }\r\n\r\n    setFillingPdf(true)\r\n    try {\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] DOWNLOAD EDITABLE PDF - URL CONSTRUCTION\")\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] tenderId:\", tenderId)\r\n      console.log(\"[v0] isCustomTender:\", isCustomTender)\r\n      console.log(\"[v0] apiBasePath:\", apiBasePath)\r\n      const fullUrl = `${apiBasePath}/make-pdf-editable`\r\n      console.log(\"[v0] Full URL being fetched:\", fullUrl)\r\n      console.log(\"[v0] Document ID:\", availableDocuments[0].id)\r\n      console.log(\"[v0] ========================================\")\r\n\r\n      const response = await fetch(fullUrl, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ documentId: availableDocuments[0].id }),\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || \"Failed to make PDF editable\")\r\n      }\r\n\r\n      const blob = await response.blob()\r\n      const url = window.URL.createObjectURL(blob)\r\n      const a = document.createElement(\"a\")\r\n      a.href = url\r\n      a.download = `editable_tender_${tenderId}.pdf`\r\n      document.body.appendChild(a)\r\n      a.click()\r\n      window.URL.revokeObjectURL(url)\r\n      document.body.removeChild(a)\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Editable PDF downloaded successfully\",\r\n      })\r\n    } catch (error: any) {\r\n      console.error(\"[v0] Error downloading editable PDF:\", error)\r\n      toast({\r\n        title: \"Error\",\r\n        description: error.message || \"Failed to download editable PDF\",\r\n        variant: \"destructive\",\r\n      })\r\n    } finally {\r\n      setFillingPdf(false)\r\n    }\r\n  }\r\n\r\n  const handleGenerateFilledEditable = async () => {\r\n    if (availableDocuments.length === 0) {\r\n      toast({\r\n        title: \"No Document\",\r\n        description: \"Please upload a PDF document first.\",\r\n        variant: \"destructive\",\r\n      })\r\n      return\r\n    }\r\n\r\n    if (Object.keys(formData).length === 0) {\r\n      toast({\r\n        title: \"No Responses\",\r\n        description: \"Please fill in some form fields first.\",\r\n        variant: \"destructive\",\r\n      })\r\n      return\r\n    }\r\n\r\n    setFillingPdf(true)\r\n    try {\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] GENERATE FILLED EDITABLE PDF\")\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] Tender ID:\", tenderId)\r\n      console.log(\"[v0] Document ID:\", availableDocuments[0].id)\r\n      console.log(\"[v0] Form responses:\", Object.keys(formData).length)\r\n\r\n      const response = await fetch(`${apiBasePath}/generate-filled-editable`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          documentId: availableDocuments[0].id,\r\n          saveToBlob: true,\r\n        }),\r\n      })\r\n\r\n      console.log(\"[v0] Response status:\", response.status)\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || \"Failed to generate filled editable PDF\")\r\n      }\r\n\r\n      const fieldsCreated = response.headers.get(\"X-Fields-Created\")\r\n      const fieldsFilled = response.headers.get(\"X-Fields-Filled\")\r\n      const totalPages = response.headers.get(\"X-Total-Pages\")\r\n      const isReadOnly = response.headers.get(\"X-Is-Read-Only\")\r\n      const savedBlobUrl = response.headers.get(\"X-Saved-Blob-Url\")\r\n\r\n      console.log(\"[v0] Fields created:\", fieldsCreated)\r\n      console.log(\"[v0] Fields filled:\", fieldsFilled)\r\n      console.log(\"[v0] Total pages:\", totalPages)\r\n      console.log(\"[v0] Was read-only:\", isReadOnly)\r\n      console.log(\"[v0] Saved to blob:\", savedBlobUrl)\r\n\r\n      const blob = await response.blob()\r\n      const url = window.URL.createObjectURL(blob)\r\n\r\n      // Download the file\r\n      const a = document.createElement(\"a\")\r\n      a.href = url\r\n      a.download = `filled_tender_${tenderId}.pdf`\r\n      document.body.appendChild(a)\r\n      a.click()\r\n      window.URL.revokeObjectURL(url)\r\n      document.body.removeChild(a)\r\n\r\n      toast({\r\n        title: \"Success!\",\r\n        description: `Generated editable PDF with ${fieldsFilled} fields filled. ${savedBlobUrl ? \"Saved to your documents.\" : \"\"}`,\r\n      })\r\n    } catch (error: any) {\r\n      console.error(\"[v0] Error generating filled editable PDF:\", error)\r\n      toast({\r\n        title: \"Error\",\r\n        description: error.message || \"Failed to generate filled editable PDF\",\r\n        variant: \"destructive\",\r\n      })\r\n    } finally {\r\n      setFillingPdf(false)\r\n    }\r\n  }\r\n\r\n  const isAddressField = (field: FormField): boolean => {\r\n    const addressKeywords = [\"address\", \"street\", \"location\", \"physical address\", \"postal address\"]\r\n    const label = field.label.toLowerCase()\r\n    return addressKeywords.some((keyword) => label.includes(keyword))\r\n  }\r\n\r\n  const isCurrencyField = (field: FormField): boolean => {\r\n    const currencyKeywords = [\"price\", \"cost\", \"amount\", \"value\", \"budget\", \"fee\", \"payment\", \"tender value\"]\r\n    const label = field.label.toLowerCase()\r\n    return currencyKeywords.some((keyword) => label.includes(keyword)) || field.type === \"currency\"\r\n  }\r\n\r\n  const renderField = (field: FormField) => {\r\n    const value = formData[field.id] || \"\"\r\n    const error = errors[field.id]\r\n\r\n    // Address fields now use regular text input\r\n    if (isAddressField(field) && field.type === \"text\") {\r\n      return (\r\n        <Input\r\n          type=\"text\"\r\n          id={field.id}\r\n          value={value}\r\n          onChange={(e) => handleChange(field.id, e.target.value)}\r\n          placeholder={field.placeholder || \"Enter address...\"}\r\n          required={field.required}\r\n          className={error ? \"border-destructive\" : \"\"}\r\n        />\r\n      )\r\n    }\r\n\r\n    if (isCurrencyField(field) && (field.type === \"text\" || field.type === \"number\")) {\r\n      return (\r\n        <div className=\"relative\">\r\n          <Input\r\n            id={field.id}\r\n            type=\"text\"\r\n            value={value}\r\n            onChange={(e) => handleChange(field.id, e.target.value)}\r\n            placeholder={field.placeholder || \"e.g., R 1,000,000 or 1000000\"}\r\n            className={error ? \"border-destructive\" : \"\"}\r\n          />\r\n          {value && !isNaN(Number(value.toString().replace(/[^0-9.-]/g, \"\"))) && (\r\n            <p className=\"text-xs text-muted-foreground mt-1\">\r\n              Formatted: {formatZAR(value.toString().replace(/[^0-9.-]/g, \"\"))}\r\n            </p>\r\n          )}\r\n        </div>\r\n      )\r\n    }\r\n\r\n    switch (field.type) {\r\n      case \"textarea\":\r\n        return (\r\n          <Textarea\r\n            id={field.id}\r\n            value={value}\r\n            onChange={(e) => handleChange(field.id, e.target.value)}\r\n            placeholder={field.placeholder}\r\n            className={error ? \"border-destructive\" : \"\"}\r\n            rows={4}\r\n          />\r\n        )\r\n\r\n      case \"select\":\r\n        return (\r\n          <Select value={value} onValueChange={(val) => handleChange(field.id, val)}>\r\n            <SelectTrigger className={error ? \"border-destructive\" : \"\"}>\r\n              <SelectValue placeholder={field.placeholder || \"Select an option\"} />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {field.options?.map((option) => (\r\n                <SelectItem key={option} value={option}>\r\n                  {option}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        )\r\n\r\n      case \"checkbox\":\r\n        return (\r\n          <div className=\"space-y-2\">\r\n            {field.options?.map((option) => (\r\n              <div key={option} className=\"flex items-center space-x-2\">\r\n                <Checkbox\r\n                  id={`${field.id}-${option}`}\r\n                  checked={Array.isArray(value) && value.includes(option)}\r\n                  onCheckedChange={(checked) => {\r\n                    const currentValues = Array.isArray(value) ? value : []\r\n                    const newValues = checked ? [...currentValues, option] : currentValues.filter((v) => v !== option)\r\n                    handleChange(field.id, newValues)\r\n                  }}\r\n                />\r\n                <label htmlFor={`${field.id}-${option}`} className=\"text-sm\">\r\n                  {option}\r\n                </label>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )\r\n\r\n      case \"radio\":\r\n        return (\r\n          <RadioGroup value={value} onValueChange={(val) => handleChange(field.id, val)}>\r\n            {field.options?.map((option) => (\r\n              <div key={option} className=\"flex items-center space-x-2\">\r\n                <RadioGroupItem value={option} id={`${field.id}-${option}`} />\r\n                <label htmlFor={`${field.id}-${option}`} className=\"text-sm\">\r\n                  {option}\r\n                </label>\r\n              </div>\r\n            ))}\r\n          </RadioGroup>\r\n        )\r\n\r\n      case \"file\":\r\n        return (\r\n          <Input\r\n            id={field.id}\r\n            type=\"file\"\r\n            onChange={(e) => handleChange(field.id, e.target.files?.[0]?.name || \"\")}\r\n            className={error ? \"border-destructive\" : \"\"}\r\n          />\r\n        )\r\n\r\n      default:\r\n        return (\r\n          <Input\r\n            id={field.id}\r\n            type={field.type}\r\n            value={value}\r\n            onChange={(e) => handleChange(field.id, e.target.value)}\r\n            placeholder={field.placeholder}\r\n            className={error ? \"border-destructive\" : \"\"}\r\n            min={field.validation?.min}\r\n            max={field.validation?.max}\r\n            maxLength={field.validation?.maxLength}\r\n          />\r\n        )\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    console.log(\"[v0] ðŸŸ¡ Form is in LOADING state\")\r\n    return (\r\n      <Card>\r\n        <CardContent className=\"p-12 text-center\">\r\n          <Loader2 className=\"h-8 w-8 animate-spin text-primary mx-auto\" />\r\n        </CardContent>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  const sections = Array.from(new Set(formFields.map((f) => f.section || \"General Information\")))\r\n\r\n  console.log(\"[v0] ðŸŸ¢ Form LOADED - Rendering sections:\", sections)\r\n  console.log(\"[v0] Total sections:\", sections.length)\r\n\r\n  const toggleSection = (section: string) => {\r\n    const newCollapsed = new Set(collapsedSections)\r\n    if (newCollapsed.has(section)) {\r\n      newCollapsed.delete(section)\r\n    } else {\r\n      newCollapsed.add(section)\r\n    }\r\n    setCollapsedSections(newCollapsed)\r\n  }\r\n\r\n  const getSectionCompletion = (section: string): { filled: number; total: number; percent: number } => {\r\n    const sectionFields = formFields.filter((f) => (f.section || \"General Information\") === section)\r\n    const requiredFields = sectionFields.filter((f) => f.required)\r\n    const fieldsToCheck = requiredFields.length > 0 ? requiredFields : sectionFields\r\n\r\n    const filled = fieldsToCheck.filter((f) => formData[f.id] && formData[f.id] !== \"\").length\r\n    const total = fieldsToCheck.length\r\n    const percent = total > 0 ? Math.round((filled / total) * 100) : 0\r\n\r\n    return { filled, total, percent }\r\n  }\r\n\r\n  const requiredFieldsCount = formFields.filter((f) => f.required).length\r\n  const totalFilledCount = Object.keys(formData).filter((key) => formData[key] && formData[key] !== \"\").length\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n\r\n      <Card className=\"border-primary/20 bg-gradient-to-r from-primary/5 to-primary/10\">\r\n        <CardHeader className=\"pb-3\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <CardTitle className=\"text-lg\">Response Form Progress</CardTitle>\r\n              <CardDescription className=\"mt-1\">\r\n                {requiredFieldsCount > 0\r\n                  ? `${requiredFieldsCount} required fields â€¢ ${totalFilledCount} of ${formFields.length} total fields filled`\r\n                  : `${totalFilledCount} of ${formFields.length} fields filled`}\r\n              </CardDescription>\r\n            </div>\r\n            <div className=\"text-right\">\r\n              <div className=\"text-3xl font-bold text-primary\">{formCompletionPercent}%</div>\r\n              <p className=\"text-xs text-muted-foreground\">Complete</p>\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-3\">\r\n          <Progress value={formCompletionPercent} className=\"h-3\" />\r\n          <div className=\"flex items-center justify-between text-xs text-muted-foreground\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <Clock className=\"h-3 w-3\" />\r\n              {lastSaveTime ? `Last saved ${lastSaveTime.toLocaleTimeString()}` : \"Not saved yet\"}\r\n            </div>\r\n            <Badge variant={formCompletionPercent >= 100 ? \"default\" : \"secondary\"} className=\"gap-1\">\r\n              <Percent className=\"h-3 w-3\" />\r\n              {formCompletionPercent >= 100 ? \"Ready to Submit\" : \"In Progress\"}\r\n            </Badge>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* PDF Actions Section */}\r\n      {availableDocuments.length > 0 && (\r\n        <Card className=\"mt-6\">\r\n          <CardHeader>\r\n            <CardTitle className=\"flex items-center gap-2\">\r\n              <FileText className=\"h-5 w-5\" />\r\n              Generate Filled Document\r\n            </CardTitle>\r\n            <CardDescription>\r\n              Download an editable copy of your tender document with all form fields filled in. Your responses will be\r\n              overlaid directly onto the original document pages.\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n            {Object.keys(formData).length === 0 ? (\r\n              <Alert>\r\n                <AlertCircle className=\"h-4 w-4\" />\r\n                <AlertTitle>Fill in the form first</AlertTitle>\r\n                <AlertDescription>\r\n                  Complete the form fields above before generating your filled document.\r\n                </AlertDescription>\r\n              </Alert>\r\n            ) : (\r\n              <Alert className=\"bg-green-50 border-green-200\">\r\n                <CheckCircle2 className=\"h-4 w-4 text-green-600\" />\r\n                <AlertTitle className=\"text-green-800\">Ready to generate</AlertTitle>\r\n                <AlertDescription className=\"text-green-700\">\r\n                  You have filled {Object.keys(formData).length} field(s). Click below to generate your filled document.\r\n                </AlertDescription>\r\n              </Alert>\r\n            )}\r\n\r\n            <div className=\"flex flex-wrap gap-3\">\r\n              <Button\r\n                onClick={handleGenerateFilledEditable}\r\n                disabled={fillingPdf || Object.keys(formData).length === 0}\r\n                size=\"lg\"\r\n                className=\"bg-primary\"\r\n              >\r\n                {fillingPdf ? (\r\n                  <>\r\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                    Generating Filled Document...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Download className=\"h-4 w-4 mr-2\" />\r\n                    Generate & Download Filled PDF\r\n                  </>\r\n                )}\r\n              </Button>\r\n            </div>\r\n\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              The filled PDF will be saved to your documents. Your responses are overlaid directly on the original\r\n              tender document.\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {sections.map((section) => {\r\n        const sectionFields = formFields.filter((f) => (f.section || \"General Information\") === section)\r\n        const completion = getSectionCompletion(section)\r\n        const isCollapsed = collapsedSections.has(section)\r\n        const requiredFieldsInSection = sectionFields.filter((f) => f.required).length\r\n\r\n        return (\r\n          <Card\r\n            key={section}\r\n            className={cn(\"transition-all\", completion.percent === 100 && \"border-green-500/50 bg-green-50/50\")}\r\n          >\r\n            <CardHeader\r\n              className=\"cursor-pointer hover:bg-muted/50 transition-colors\"\r\n              onClick={() => toggleSection(section)}\r\n            >\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <CardTitle className=\"text-base\">{section}</CardTitle>\r\n                    {requiredFieldsInSection > 0 && (\r\n                      <Badge variant=\"secondary\" className=\"text-xs\">\r\n                        {requiredFieldsInSection} Required\r\n                      </Badge>\r\n                    )}\r\n                  </div>\r\n                  <CardDescription className=\"mt-1\">\r\n                    {completion.filled} of {completion.total} fields completed\r\n                  </CardDescription>\r\n                </div>\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Progress value={completion.percent} className=\"h-2 w-20\" />\r\n                    <span\r\n                      className={cn(\r\n                        \"text-sm font-medium w-12 text-right\",\r\n                        completion.percent === 100 ? \"text-green-600\" : \"text-muted-foreground\",\r\n                      )}\r\n                    >\r\n                      {completion.percent}%\r\n                    </span>\r\n                  </div>\r\n                  {isCollapsed ? (\r\n                    <ChevronDown className=\"h-5 w-5 text-muted-foreground\" />\r\n                  ) : (\r\n                    <ChevronUp className=\"h-5 w-5 text-muted-foreground\" />\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </CardHeader>\r\n            {!isCollapsed && (\r\n              <CardContent className=\"space-y-4 pt-0\">\r\n                {sectionFields.map((field) => (\r\n                  <div key={field.id} className=\"space-y-2\">\r\n                    <Label htmlFor={field.id} className=\"flex items-center gap-2\">\r\n                      {field.label}\r\n                      {field.required && (\r\n                        <Badge variant=\"destructive\" className=\"text-xs px-1.5 py-0\">\r\n                          Required\r\n                        </Badge>\r\n                      )}\r\n                    </Label>\r\n                    {field.description && <p className=\"text-sm text-muted-foreground\">{field.description}</p>}\r\n                    {renderField(field)}\r\n                    {errors[field.id] && (\r\n                      <p className=\"text-sm text-destructive flex items-center gap-1\">\r\n                        <AlertCircle className=\"h-3 w-3\" />\r\n                        {errors[field.id]}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </CardContent>\r\n            )}\r\n          </Card>\r\n        )\r\n      })}\r\n\r\n      <Card className=\"sticky bottom-4 shadow-lg border-primary/20\">\r\n        <CardContent className=\"py-4\">\r\n          <div className=\"flex items-center gap-4 flex-wrap\">\r\n            <Button onClick={handleSave} disabled={saving} size=\"lg\" className=\"flex-1 min-w-[200px]\">\r\n              {saving ? (\r\n                <>\r\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                  Saving...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Save className=\"h-4 w-4 mr-2\" />\r\n                  Save Progress ({formCompletionPercent}% Complete)\r\n                </>\r\n              )}\r\n            </Button>\r\n\r\n            {saved && (\r\n              <Alert className=\"flex-1 bg-green-500/10 border-green-500/20 py-2\">\r\n                <CheckCircle2 className=\"h-4 w-4 text-green-500\" />\r\n                <AlertDescription className=\"text-green-500\">Saved successfully!</AlertDescription>\r\n              </Alert>\r\n            )}\r\n\r\n            {Object.keys(errors).length > 0 && (\r\n              <Alert variant=\"destructive\" className=\"flex-1 py-2\">\r\n                <AlertCircle className=\"h-4 w-4\" />\r\n                <AlertDescription>\r\n                  {Object.keys(errors).length} validation error(s) - check required fields\r\n                </AlertDescription>\r\n              </Alert>\r\n            )}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n","\"use client\"\r\n\r\nimport { useState, useEffect, useRef } from \"react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\"\r\nimport {\r\n  Send,\r\n  Target,\r\n  AlertTriangle,\r\n  Loader2,\r\n  Sparkles,\r\n  Lightbulb,\r\n  DollarSign,\r\n  ArrowRight,\r\n  CheckCircle2,\r\n  FileSpreadsheet,\r\n  Calculator,\r\n} from \"lucide-react\"\r\nimport Link from \"next/link\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { toast } from \"sonner\"\r\n\r\ninterface TenderContext {\r\n  id: string\r\n  title: string | null\r\n  organization?: string | null\r\n  description?: string | null\r\n  deadline?: string | null\r\n  value?: string | null\r\n  requirements?: any\r\n  analysis?: any\r\n}\r\n\r\ninterface Message {\r\n  role: \"user\" | \"assistant\"\r\n  content: string\r\n}\r\n\r\ninterface Props {\r\n  tender: TenderContext\r\n  className?: string\r\n  onPlanGenerated?: (plan: any) => void // Added callback for when plan is generated\r\n  onBoqGenerated?: (boq: any) => void // Added callback for BOQ generation\r\n  onReadinessGenerated?: (readiness: any) => void // Added callback for readiness check\r\n}\r\n\r\nexport function TenderContextStrategistPanel({\r\n  tender,\r\n  className,\r\n  onPlanGenerated,\r\n  onBoqGenerated,\r\n  onReadinessGenerated,\r\n}: Props) {\r\n  const [messages, setMessages] = useState<Message[]>([])\r\n  const [input, setInput] = useState(\"\")\r\n  const [loading, setLoading] = useState(false)\r\n  const [readiness, setReadiness] = useState<any>(null)\r\n  const [loadingReadiness, setLoadingReadiness] = useState(false)\r\n  const [isExpanded, setIsExpanded] = useState(true)\r\n  const [generatingPlan, setGeneratingPlan] = useState(false)\r\n  const [projectPlan, setProjectPlan] = useState<any>(null)\r\n  const scrollRef = useRef<HTMLDivElement>(null)\r\n\r\n  useEffect(() => {\r\n    if (tender.id) {\r\n      loadReadiness()\r\n      loadProjectPlan()\r\n    }\r\n  }, [tender.id])\r\n\r\n  useEffect(() => {\r\n    if (scrollRef.current) {\r\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight\r\n    }\r\n  }, [messages])\r\n\r\n  const loadReadiness = async () => {\r\n    setLoadingReadiness(true)\r\n    try {\r\n      const response = await fetch(`/api/strategist/readiness?tenderId=${tender.id}`)\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        setReadiness(data)\r\n        if (onReadinessGenerated) {\r\n          onReadinessGenerated(data)\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[v0] Error loading readiness:\", error)\r\n    } finally {\r\n      setLoadingReadiness(false)\r\n    }\r\n  }\r\n\r\n  const handleSend = async () => {\r\n    if (!input.trim() || loading) return\r\n\r\n    const userMessage = input.trim()\r\n    setInput(\"\")\r\n    setMessages((prev) => [...prev, { role: \"user\", content: userMessage }])\r\n    setLoading(true)\r\n\r\n    try {\r\n      const response = await fetch(\"/api/strategist/message\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          message: userMessage,\r\n          tender_id: tender.id,\r\n          context_type: \"tender\",\r\n          include_context: true,\r\n          tenderContext: {\r\n            id: tender.id,\r\n            title: tender.title,\r\n            organization: tender.organization,\r\n            description: tender.description,\r\n            deadline: tender.deadline,\r\n            value: tender.value,\r\n            requirements: tender.requirements,\r\n            analysis: tender.analysis,\r\n          },\r\n        }),\r\n      })\r\n\r\n      if (response.ok) {\r\n        const reader = response.body?.getReader()\r\n        const decoder = new TextDecoder()\r\n        let assistantMessage = \"\"\r\n\r\n        setMessages((prev) => [...prev, { role: \"assistant\", content: \"\" }])\r\n\r\n        if (reader) {\r\n          while (true) {\r\n            const { done, value } = await reader.read()\r\n            if (done) break\r\n\r\n            const chunk = decoder.decode(value)\r\n            const lines = chunk.split(\"\\n\")\r\n\r\n            for (const line of lines) {\r\n              if (line.startsWith(\"0:\")) {\r\n                try {\r\n                  const text = JSON.parse(line.slice(2))\r\n                  assistantMessage += text\r\n                  setMessages((prev) => {\r\n                    const newMessages = [...prev]\r\n                    newMessages[newMessages.length - 1] = {\r\n                      role: \"assistant\",\r\n                      content: assistantMessage,\r\n                    }\r\n                    return newMessages\r\n                  })\r\n                } catch (e) {\r\n                  // Skip parse errors\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[v0] Error sending message:\", error)\r\n      setMessages((prev) => [\r\n        ...prev,\r\n        {\r\n          role: \"assistant\",\r\n          content: \"Sorry, I encountered an error. Please try again.\",\r\n        },\r\n      ])\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleQuickAction = (action: string) => {\r\n    let question = \"\"\r\n    switch (action) {\r\n      case \"strategy\":\r\n        question = `Create a winning bid strategy for \"${tender.title}\". What are the key success factors?`\r\n        break\r\n      case \"risks\":\r\n        question = `What are the potential risks and compliance gaps I should be aware of for this tender?`\r\n        break\r\n      case \"pricing\":\r\n        question = `Help me develop a competitive pricing strategy for this bid.`\r\n        break\r\n      case \"strengths\":\r\n        question = `Analyze my strengths and weaknesses for this specific tender based on typical requirements.`\r\n        break\r\n    }\r\n    setInput(question)\r\n  }\r\n\r\n  const loadProjectPlan = async () => {\r\n    try {\r\n      const response = await fetch(`/api/strategist/plan?tenderId=${tender.id}&tenderType=custom`)\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        if (data.plan) {\r\n          setProjectPlan(data.plan)\r\n          if (onPlanGenerated) {\r\n            onPlanGenerated(data.plan)\r\n          }\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[v0] Error loading project plan:\", error)\r\n    }\r\n  }\r\n\r\n  const generateProjectPlan = async () => {\r\n    if (generatingPlan) return\r\n\r\n    try {\r\n      setGeneratingPlan(true)\r\n      console.log(\"[v0] Generating project plan for tender:\", tender.id)\r\n\r\n      const response = await fetch(\"/api/strategist/plan\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          tenderId: tender.id,\r\n          tenderType: \"custom\",\r\n          tenderTitle: tender.title,\r\n          tenderDescription: tender.description,\r\n          analysisData: tender.analysis,\r\n        }),\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.details || error.error || \"Failed to generate project plan\")\r\n      }\r\n\r\n      const { plan } = await response.json()\r\n      console.log(\"[v0] Project plan generated successfully\")\r\n\r\n      if (onPlanGenerated) {\r\n        onPlanGenerated(plan)\r\n      }\r\n\r\n      toast.success(\"Project Plan Generated\", {\r\n        description: \"Your comprehensive project plan is now available in the Planning section\",\r\n      })\r\n    } catch (error) {\r\n      console.error(\"[v0] Plan generation error:\", error)\r\n      toast.error(\"Error\", {\r\n        description: error instanceof Error ? error.message : \"Failed to generate project plan\",\r\n      })\r\n    } finally {\r\n      setGeneratingPlan(false)\r\n    }\r\n  }\r\n\r\n  const generateBoq = async () => {\r\n    try {\r\n      console.log(\"[v0] Generating BOQ for tender:\", tender.id)\r\n\r\n      const response = await fetch(\"/api/strategist/boq\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          tenderId: tender.id,\r\n          tenderType: \"custom\",\r\n          tenderTitle: tender.title,\r\n          tenderDescription: tender.description,\r\n          analysisData: tender.analysis,\r\n        }),\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.details || error.error || \"Failed to generate BOQ\")\r\n      }\r\n\r\n      const { boq } = await response.json()\r\n      console.log(\"[v0] BOQ generated successfully\")\r\n\r\n      if (onBoqGenerated) {\r\n        onBoqGenerated(boq)\r\n      }\r\n\r\n      toast.success(\"BOQ Generated\", {\r\n        description: \"Your Bill of Quantities is now available in the Financial section\",\r\n      })\r\n    } catch (error) {\r\n      console.error(\"[v0] BOQ generation error:\", error)\r\n      toast.error(\"Error\", {\r\n        description: error instanceof Error ? error.message : \"Failed to generate BOQ\",\r\n      })\r\n    }\r\n  }\r\n\r\n  const checkReadiness = async () => {\r\n    try {\r\n      console.log(\"[v0] Checking readiness for tender:\", tender.id)\r\n\r\n      const response = await fetch(`/api/strategist/readiness?tender_id=${tender.id}&tender_type=custom`)\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Failed to check readiness\")\r\n      }\r\n\r\n      const readiness = await response.json()\r\n      console.log(\"[v0] Readiness check complete\")\r\n\r\n      if (onReadinessGenerated) {\r\n        onReadinessGenerated(readiness)\r\n      }\r\n\r\n      toast.success(\"Readiness Check Complete\", {\r\n        description: \"Your bid readiness assessment is now available in the Overview section\",\r\n      })\r\n    } catch (error) {\r\n      console.error(\"[v0] Readiness check error:\", error)\r\n      toast.error(\"Error\", {\r\n        description: \"Failed to check readiness\",\r\n      })\r\n    }\r\n  }\r\n\r\n  const getScoreColor = (score: number) => {\r\n    if (score >= 80) return \"text-green-500\"\r\n    if (score >= 60) return \"text-yellow-500\"\r\n    return \"text-red-500\"\r\n  }\r\n\r\n  const getScoreBg = (score: number) => {\r\n    if (score >= 80) return \"bg-green-500/10\"\r\n    if (score >= 60) return \"bg-yellow-500/10\"\r\n    return \"bg-red-500/10\"\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full\">\r\n      {/* Header */}\r\n      <div className=\"p-4 border-b bg-muted/30\">\r\n        <div className=\"flex items-center justify-between mb-3\">\r\n          <h3 className=\"font-semibold flex items-center gap-2\">\r\n            <Sparkles className=\"h-4 w-4 text-primary\" />\r\n            AI Strategist\r\n          </h3>\r\n          <Badge variant=\"outline\" className=\"text-xs\">\r\n            Tender-Specific\r\n          </Badge>\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <p className=\"text-xs text-muted-foreground\">Generate strategic plans and analysis</p>\r\n          <div className=\"grid grid-cols-1 gap-2\">\r\n            <Button\r\n              onClick={generateProjectPlan}\r\n              disabled={generatingPlan}\r\n              variant=\"default\"\r\n              size=\"sm\"\r\n              className=\"w-full justify-start h-auto py-3\"\r\n            >\r\n              {generatingPlan ? (\r\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin flex-shrink-0\" />\r\n              ) : (\r\n                <FileSpreadsheet className=\"mr-2 h-4 w-4 flex-shrink-0\" />\r\n              )}\r\n              <div className=\"text-left flex-1\">\r\n                <div className=\"font-medium\">Generate Project Plan</div>\r\n                <div className=\"text-xs opacity-80 font-normal\">Opens in Planning section</div>\r\n              </div>\r\n            </Button>\r\n\r\n            <Button\r\n              onClick={generateBoq}\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              className=\"w-full justify-start h-auto py-3 bg-transparent\"\r\n            >\r\n              <Calculator className=\"mr-2 h-4 w-4 flex-shrink-0\" />\r\n              <div className=\"text-left flex-1\">\r\n                <div className=\"font-medium\">Generate BOQ</div>\r\n                <div className=\"text-xs opacity-80 font-normal\">Opens in Financial section</div>\r\n              </div>\r\n            </Button>\r\n\r\n            <Button\r\n              onClick={checkReadiness}\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              className=\"w-full justify-start h-auto py-3 bg-transparent\"\r\n            >\r\n              <CheckCircle2 className=\"mr-2 h-4 w-4 flex-shrink-0\" />\r\n              <div className=\"text-left flex-1\">\r\n                <div className=\"font-medium\">Check Readiness</div>\r\n                <div className=\"text-xs opacity-80 font-normal\">Score your bid readiness</div>\r\n              </div>\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"p-3 border-b bg-muted/20\">\r\n        <p className=\"text-xs font-medium mb-2 text-muted-foreground\">Conversation Starters</p>\r\n        <div className=\"grid grid-cols-2 gap-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            className=\"text-xs h-auto py-2 justify-start bg-transparent\"\r\n            onClick={() => handleQuickAction(\"strategy\")}\r\n          >\r\n            <Target className=\"h-3 w-3 mr-2 flex-shrink-0\" />\r\n            <span className=\"truncate\">Bid Strategy</span>\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            className=\"text-xs h-auto py-2 justify-start bg-transparent\"\r\n            onClick={() => handleQuickAction(\"risks\")}\r\n          >\r\n            <AlertTriangle className=\"h-3 w-3 mr-2 flex-shrink-0\" />\r\n            <span className=\"truncate\">Risk Analysis</span>\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            className=\"text-xs h-auto py-2 justify-start bg-transparent\"\r\n            onClick={() => handleQuickAction(\"pricing\")}\r\n          >\r\n            <DollarSign className=\"h-3 w-3 mr-2 flex-shrink-0\" />\r\n            <span className=\"truncate\">Pricing Help</span>\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            className=\"text-xs h-auto py-2 justify-start bg-transparent\"\r\n            onClick={() => handleQuickAction(\"strengths\")}\r\n          >\r\n            <Lightbulb className=\"h-3 w-3 mr-2 flex-shrink-0\" />\r\n            <span className=\"truncate\">SWOT Analysis</span>\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Chat Messages */}\r\n      {messages.length > 0 && (\r\n        <ScrollArea className=\"h-48 rounded-lg border p-3\" ref={scrollRef}>\r\n          <div className=\"space-y-3\">\r\n            {messages.map((message, i) => (\r\n              <div\r\n                key={i}\r\n                className={cn(\r\n                  \"p-3 rounded-lg text-sm whitespace-pre-wrap\",\r\n                  message.role === \"user\" ? \"bg-primary text-primary-foreground ml-8\" : \"bg-muted mr-8\",\r\n                )}\r\n              >\r\n                {message.content || (\r\n                  <span className=\"flex items-center gap-2\">\r\n                    <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                    Thinking...\r\n                  </span>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </ScrollArea>\r\n      )}\r\n\r\n      {/* Chat Input */}\r\n      <div className=\"flex gap-2\">\r\n        <Input\r\n          placeholder=\"Ask about this tender...\"\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          onKeyDown={(e) => e.key === \"Enter\" && !e.shiftKey && handleSend()}\r\n          disabled={loading}\r\n          className=\"text-sm\"\r\n        />\r\n        <Button size=\"icon\" onClick={handleSend} disabled={loading || !input.trim()}>\r\n          {loading ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <Send className=\"h-4 w-4\" />}\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Full Strategist Link */}\r\n      <Button variant=\"ghost\" size=\"sm\" className=\"w-full text-xs\" asChild>\r\n        <Link href={`/dashboard/strategist?tenderId=${tender.id}`}>\r\n          Open Full Strategist\r\n          <ArrowRight className=\"h-3 w-3 ml-2\" />\r\n        </Link>\r\n      </Button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport { TenderContextStrategistPanel as TenderContextPanel }\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ArrowRight\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJtMTIgNSA3IDctNyA3IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/arrow-right\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowRight = createLucideIcon('ArrowRight', [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'm12 5 7 7-7 7', key: 'xquz4c' }],\n]);\n\nexport default ArrowRight;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Percent\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8bGluZSB4MT0iMTkiIHgyPSI1IiB5MT0iNSIgeTI9IjE5IiAvPgogIDxjaXJjbGUgY3g9IjYuNSIgY3k9IjYuNSIgcj0iMi41IiAvPgogIDxjaXJjbGUgY3g9IjE3LjUiIGN5PSIxNy41IiByPSIyLjUiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/percent\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Percent = createLucideIcon('Percent', [\n  ['line', { x1: '19', x2: '5', y1: '5', y2: '19', key: '1x9vlm' }],\n  ['circle', { cx: '6.5', cy: '6.5', r: '2.5', key: '4mh3h7' }],\n  ['circle', { cx: '17.5', cy: '17.5', r: '2.5', key: '1mdrzq' }],\n]);\n\nexport default Percent;\n"],"names":[],"mappings":"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","ignoreList":[3,4]}