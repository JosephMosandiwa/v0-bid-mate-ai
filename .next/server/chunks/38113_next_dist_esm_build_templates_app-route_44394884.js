module.exports=[726895,e=>{"use strict";var t=e.i(248749),n=e.i(219650),r=e.i(508677),a=e.i(615159),i=e.i(548938),o=e.i(273073),s=e.i(129714),l=e.i(403736),c=e.i(817889),d=e.i(428765),u=e.i(762198),p=e.i(117109),g=e.i(590702),m=e.i(462216),f=e.i(539401),h=e.i(222695),v=e.i(193695);e.i(31514);var y=e.i(267074);async function D(e){try{let{query:t}=await e.json();if(!t)return Response.json({error:"Search query is required"},{status:400});console.log("[v0] Searching eTenders API for:",t);try{let e=new Date,n=new Date(e);n.setMonth(e.getMonth()-6);let r=new Date(e);r.setMonth(e.getMonth()+6);let a=n.toISOString().split("T")[0],i=r.toISOString().split("T")[0];console.log("[v0] Date range:",a,"to",i),console.log("[v0] Fetching swagger specification...");let o=null;try{let e=await fetch("https://ocds-api.etenders.gov.za/swagger/v1/swagger.json",{headers:{Accept:"application/json","User-Agent":"BidMate-TenderAssistant/1.0"}});e.ok?(o=await e.json(),console.log("[v0] Swagger spec loaded successfully"),console.log("[v0] Available paths:",Object.keys(o.paths||{}))):console.log("[v0] Swagger fetch failed with status:",e.status)}catch(e){console.log("[v0] Could not fetch swagger spec:",e)}let s=[];if(o&&o.paths){let e=o.servers?.[0]?.url||"https://ocds-api.etenders.gov.za";for(let[t,n]of Object.entries(o.paths))if(n.get){let n=`${e}${t}?dateFrom=${a}&dateTo=${i}&limit=100`;s.push(n),console.log("[v0] Found endpoint from swagger:",n)}}0===s.length&&(console.log("[v0] Using fallback endpoints"),s=[`https://ocds-api.etenders.gov.za/api/OCDSReleases?dateFrom=${a}&dateTo=${i}&limit=100`,`https://ocds-api.etenders.gov.za/api/v1/release?dateFrom=${a}&dateTo=${i}&limit=100`,`https://ocds-api.etenders.gov.za/api/v1/releases?dateFrom=${a}&dateTo=${i}&limit=100`]);let l=null;for(let e of s){console.log("[v0] Trying endpoint:",e);try{let t=await fetch(e,{method:"GET",headers:{Accept:"application/json","User-Agent":"BidMate-TenderAssistant/1.0"}});if(console.log("[v0] Response status:",t.status,"for",e),t.ok){l=t,console.log("[v0] Successfully connected to:",e);break}if(404!==t.status){let e=await t.text();console.log("[v0] Non-404 error:",t.status,e.substring(0,200))}}catch(t){console.log("[v0] Endpoint error:",e,t);continue}}if(!l||!l.ok)throw Error("All eTenders API endpoints returned errors");let c=await l.json();console.log("[v0] eTenders API response structure:",Object.keys(c)),console.log("[v0] Sample data:",JSON.stringify(c).substring(0,500));let d=[];c.releases?d=c.releases:Array.isArray(c)?d=c:c.data&&(d=Array.isArray(c.data)?c.data:[c.data]),console.log("[v0] Found releases:",d.length);let u=d.filter(e=>e.tender&&e.tender.title).map(e=>{var t;let n,r=e.tender,a=(e.parties||[]).find(e=>e.roles?.includes("buyer")||e.roles?.includes("procuringEntity")),i="Not specified";r.value?.amount&&(t=r.value.amount,n="string"==typeof t?Number.parseFloat(t.replace(/[^0-9.-]/g,"")):t,i=isNaN(n)?"R 0":new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:(void 0)??0,maximumFractionDigits:(void 0)??2}).format(n).replace(/ZAR\s?/,"R ").replace(/R(\d)/,"R $1"));let o=e.date||r.tenderPeriod?.startDate||new Date().toISOString(),s=r.tenderPeriod?.endDate||r.submissionDeadline||o,l=r.mainProcurementCategory||r.classification?.description||"General",c=(r.documents||[]).map(e=>({id:e.id,title:e.title||e.description||"Tender Document",url:e.url,documentType:e.documentType||"other",format:e.format||"application/pdf",description:e.description})).filter(e=>e.url);return console.log("[v0] Extracted documents for tender:",r.title,"- Count:",c.length),{id:e.ocid||e.id||`tender-${Date.now()}`,title:r.title,organization:a?.name||"Unknown Organization",publishDate:o.split("T")[0],closeDate:s.split("T")[0],value:i,category:l,description:r.description||r.title,url:e.url||`https://etenders.gov.za/tender/${e.ocid}`,documents:c}}).filter(e=>{let n=t.toLowerCase();return e.title.toLowerCase().includes(n)||e.category.toLowerCase().includes(n)||e.description.toLowerCase().includes(n)||e.organization.toLowerCase().includes(n)});return console.log("[v0] Mapped tenders:",u.length),Response.json({tenders:u})}catch(n){console.error("[v0] eTenders API integration error:",n),console.log("[v0] Falling back to enhanced mock data");let e=[{id:"OCDS-591ADF-NT-2025-001",title:"Medical Equipment Supply and Maintenance Services",organization:"Department of Health - Gauteng Province",publishDate:"2025-01-15",closeDate:"2025-02-28",value:"R 3,500,000",category:"Medical Supplies",description:"Supply and maintenance of medical equipment for provincial hospitals including diagnostic machines, surgical equipment, and patient monitoring systems. Includes installation, training, and 3-year maintenance contract.",url:"https://etenders.gov.za/tender/OCDS-591ADF-NT-2025-001",documents:[{id:"doc-1",title:"Request for Proposal",url:"https://etenders.gov.za/documents/OCDS-591ADF-NT-2025-001/rfp.pdf",documentType:"technicalSpecifications",format:"application/pdf",description:"Detailed technical specifications for the medical equipment supply and maintenance services."}]},{id:"OCDS-591ADF-WC-2025-002",title:"IT Infrastructure Upgrade and Cloud Migration",organization:"Provincial Government - Western Cape",publishDate:"2025-01-10",closeDate:"2025-02-15",value:"R 8,000,000",category:"IT Services",description:"Comprehensive IT infrastructure upgrade including servers, networking equipment, cybersecurity solutions, and cloud migration services. Must comply with POPIA and government security standards.",url:"https://etenders.gov.za/tender/OCDS-591ADF-WC-2025-002",documents:[{id:"doc-2",title:"Business Case",url:"https://etenders.gov.za/documents/OCDS-591ADF-WC-2025-002/business_case.pdf",documentType:"businessCase",format:"application/pdf",description:"Business case for the IT infrastructure upgrade project."}]},{id:"OCDS-591ADF-JHB-2025-003",title:"Road Construction and Maintenance Programme",organization:"City of Johannesburg Metropolitan Municipality",publishDate:"2025-01-12",closeDate:"2025-03-01",value:"R 15,000,000",category:"Construction",description:"Construction and maintenance of municipal roads including resurfacing, pothole repairs, drainage system improvements, and traffic management systems. 18-month contract period.",url:"https://etenders.gov.za/tender/OCDS-591ADF-JHB-2025-003",documents:[{id:"doc-3",title:"Project Plan",url:"https://etenders.gov.za/documents/OCDS-591ADF-JHB-2025-003/project_plan.pdf",documentType:"projectPlan",format:"application/pdf",description:"Project plan for the road construction and maintenance programme."}]},{id:"OCDS-591ADF-NT-2025-004",title:"Office Furniture and Equipment Supply",organization:"National Treasury",publishDate:"2025-01-20",closeDate:"2025-02-20",value:"R 1,200,000",category:"Furniture & Equipment",description:"Supply of office furniture, equipment, and fittings for government offices including ergonomic desks, chairs, filing cabinets, meeting room furniture, and storage solutions. Must meet SABS standards.",url:"https://etenders.gov.za/tender/OCDS-591ADF-NT-2025-004",documents:[{id:"doc-4",title:"Specification Document",url:"https://etenders.gov.za/documents/OCDS-591ADF-NT-2025-004/specification.pdf",documentType:"specification",format:"application/pdf",description:"Specification document for the office furniture and equipment supply."}]},{id:"OCDS-591ADF-EC-2025-005",title:"Water Infrastructure Development Project",organization:"Department of Water and Sanitation - Eastern Cape",publishDate:"2025-01-18",closeDate:"2025-03-15",value:"R 25,000,000",category:"Infrastructure",description:"Development of water infrastructure including boreholes, water treatment facilities, and distribution networks for rural communities. Includes community training and 5-year maintenance plan.",url:"https://etenders.gov.za/tender/OCDS-591ADF-EC-2025-005",documents:[{id:"doc-5",title:"Feasibility Study",url:"https://etenders.gov.za/documents/OCDS-591ADF-EC-2025-005/feasibility_study.pdf",documentType:"feasibilityStudy",format:"application/pdf",description:"Feasibility study for the water infrastructure development project."}]},{id:"OCDS-591ADF-KZN-2025-006",title:"School Building Renovation and Maintenance",organization:"Department of Basic Education - KwaZulu-Natal",publishDate:"2025-01-22",closeDate:"2025-03-10",value:"R 12,000,000",category:"Construction",description:"Renovation and maintenance of school buildings including classroom repairs, roof replacements, plumbing, electrical work, and painting. Covers 15 schools across the province.",url:"https://etenders.gov.za/tender/OCDS-591ADF-KZN-2025-006",documents:[{id:"doc-6",title:"Building Plan",url:"https://etenders.gov.za/documents/OCDS-591ADF-KZN-2025-006/building_plan.pdf",documentType:"buildingPlan",format:"application/pdf",description:"Building plan for the school building renovation and maintenance project."}]},{id:"OCDS-591ADF-FS-2025-007",title:"Security Services for Government Buildings",organization:"Department of Public Works - Free State",publishDate:"2025-01-25",closeDate:"2025-02-25",value:"R 4,500,000",category:"Security Services",description:"Provision of security services for government buildings including armed response, access control, CCTV monitoring, and patrol services. 24/7 coverage required for 36-month period.",url:"https://etenders.gov.za/tender/OCDS-591ADF-FS-2025-007",documents:[{id:"doc-7",title:"Security Requirements",url:"https://etenders.gov.za/documents/OCDS-591ADF-FS-2025-007/security_requirements.pdf",documentType:"securityRequirements",format:"application/pdf",description:"Security requirements for the government buildings."}]},{id:"OCDS-591ADF-LP-2025-008",title:"Agricultural Equipment and Machinery Supply",organization:"Department of Agriculture - Limpopo",publishDate:"2025-01-28",closeDate:"2025-03-05",value:"R 6,800,000",category:"Agricultural Equipment",description:"Supply of agricultural equipment and machinery for smallholder farmers including tractors, ploughs, irrigation systems, and harvesting equipment. Includes operator training and maintenance support.",url:"https://etenders.gov.za/tender/OCDS-591ADF-LP-2025-008",documents:[{id:"doc-8",title:"Equipment List",url:"https://etenders.gov.za/documents/OCDS-591ADF-LP-2025-008/equipment_list.pdf",documentType:"equipmentList",format:"application/pdf",description:"List of agricultural equipment and machinery required for the supply."}]}].filter(e=>e.title.toLowerCase().includes(t.toLowerCase())||e.category.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase())||e.organization.toLowerCase().includes(t.toLowerCase()));return Response.json({tenders:e,warning:"Currently displaying sample tender data. The eTenders API connection is being established.",note:"This is demonstration data to showcase the platform's capabilities."})}}catch(e){return console.error("[v0] Tender search error:",e),Response.json({error:"Failed to search tenders"},{status:500})}}e.s(["POST",()=>D],221418);var C=e.i(221418);let S=new t.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/search-tenders/route",pathname:"/api/search-tenders",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/search-tenders/route.ts",nextConfigOutput:"",userland:C}),{workAsyncStorage:R,workUnitAsyncStorage:w,serverHooks:A}=S;function T(){return(0,r.patchFetch)({workAsyncStorage:R,workUnitAsyncStorage:w})}async function b(e,t,r){S.isDev&&(0,a.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let D="/api/search-tenders/route";D=D.replace(/\/index$/,"")||"/";let C=await S.prepare(e,t,{srcPage:D,multiZoneDraftMode:!1});if(!C)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:R,params:w,nextConfig:A,parsedUrl:T,isDraftMode:b,prerenderManifest:E,routerServerContext:O,isOnDemandRevalidate:F,revalidateOnlyGenerated:P,resolvedPathname:N,clientReferenceManifest:q,serverActionsManifest:z}=C,I=(0,l.normalizeAppPath)(D),x=!!(E.dynamicRoutes[I]||E.routes[N]),M=async()=>((null==O?void 0:O.render404)?await O.render404(e,t,T,!1):t.end("This page could not be found"),null);if(x&&!b){let e=!!E.routes[N],t=E.dynamicRoutes[I];if(t&&!1===t.fallback&&!e){if(A.experimental.adapterPath)return await M();throw new v.NoFallbackError}}let j=null;!x||S.isDev||b||(j="/index"===(j=N)?"/":j);let k=!0===S.isDev||!x,_=x&&!k;z&&q&&(0,o.setReferenceManifestsSingleton)({page:D,clientReferenceManifest:q,serverActionsManifest:z,serverModuleMap:(0,s.createServerModuleMap)({serverActionsManifest:z})});let L=e.method||"GET",$=(0,i.getTracer)(),H=$.getActiveScopeSpan(),U={params:w,prerenderManifest:E,renderOpts:{experimental:{authInterrupts:!!A.experimental.authInterrupts},cacheComponents:!!A.cacheComponents,supportsDynamicResponse:k,incrementalCache:(0,a.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:A.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,n,r)=>S.onRequestError(e,t,r,O)},sharedContext:{buildId:R}},B=new c.NodeNextRequest(e),K=new c.NodeNextResponse(t),W=d.NextRequestAdapter.fromNodeNextRequest(B,(0,d.signalFromNodeResponse)(t));try{let o=async e=>S.handle(W,U).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let n=$.getRootSpanAttributes();if(!n)return;if(n.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${n.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let r=n.get("next.route");if(r){let t=`${L} ${r}`;e.setAttributes({"next.route":r,"http.route":r,"next.span_name":t}),e.updateName(t)}else e.updateName(`${L} ${D}`)}),s=!!(0,a.getRequestMeta)(e,"minimalMode"),l=async a=>{var i,l;let c=async({previousCacheEntry:n})=>{try{if(!s&&F&&P&&!n)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let i=await o(a);e.fetchMetrics=U.renderOpts.fetchMetrics;let l=U.renderOpts.pendingWaitUntil;l&&r.waitUntil&&(r.waitUntil(l),l=void 0);let c=U.renderOpts.collectedTags;if(!x)return await (0,g.sendResponse)(B,K,i,U.renderOpts.pendingWaitUntil),null;{let e=await i.blob(),t=(0,m.toNodeOutgoingHttpHeaders)(i.headers);c&&(t[h.NEXT_CACHE_TAGS_HEADER]=c),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let n=void 0!==U.renderOpts.collectedRevalidate&&!(U.renderOpts.collectedRevalidate>=h.INFINITE_CACHE)&&U.renderOpts.collectedRevalidate,r=void 0===U.renderOpts.collectedExpire||U.renderOpts.collectedExpire>=h.INFINITE_CACHE?void 0:U.renderOpts.collectedExpire;return{value:{kind:y.CachedRouteKind.APP_ROUTE,status:i.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:n,expire:r}}}}catch(t){throw(null==n?void 0:n.isStale)&&await S.onRequestError(e,t,{routerKind:"App Router",routePath:D,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:_,isOnDemandRevalidate:F})},O),t}},d=await S.handleResponse({req:e,nextConfig:A,cacheKey:j,routeKind:n.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:E,isRoutePPREnabled:!1,isOnDemandRevalidate:F,revalidateOnlyGenerated:P,responseGenerator:c,waitUntil:r.waitUntil,isMinimalMode:s});if(!x)return null;if((null==d||null==(i=d.value)?void 0:i.kind)!==y.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==d||null==(l=d.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});s||t.setHeader("x-nextjs-cache",F?"REVALIDATED":d.isMiss?"MISS":d.isStale?"STALE":"HIT"),b&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let u=(0,m.fromNodeOutgoingHttpHeaders)(d.value.headers);return s&&x||u.delete(h.NEXT_CACHE_TAGS_HEADER),!d.cacheControl||t.getHeader("Cache-Control")||u.get("Cache-Control")||u.set("Cache-Control",(0,f.getCacheControlHeader)(d.cacheControl)),await (0,g.sendResponse)(B,K,new Response(d.value.body,{headers:u,status:d.value.status||200})),null};H?await l(H):await $.withPropagatedContext(e.headers,()=>$.trace(u.BaseServerSpan.handleRequest,{spanName:`${L} ${D}`,kind:i.SpanKind.SERVER,attributes:{"http.method":L,"http.target":e.url}},l))}catch(t){if(t instanceof v.NoFallbackError||await S.onRequestError(e,t,{routerKind:"App Router",routePath:I,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:_,isOnDemandRevalidate:F})}),x)throw t;return await (0,g.sendResponse)(B,K,new Response(null,{status:500})),null}}e.s(["handler",()=>b,"patchFetch",()=>T,"routeModule",()=>S,"serverHooks",()=>A,"workAsyncStorage",()=>R,"workUnitAsyncStorage",()=>w],726895)}];

//# sourceMappingURL=38113_next_dist_esm_build_templates_app-route_44394884.js.map