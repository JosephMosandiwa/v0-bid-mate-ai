{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/lib/stripe.ts"],"sourcesContent":["import \"server-only\"\r\n\r\nimport Stripe from \"stripe\"\r\n\r\nlet stripeInstance: Stripe | null = null\r\n\r\nexport const stripe = new Proxy({} as Stripe, {\r\n  get(target, prop) {\r\n    // Initialize Stripe only when actually accessed\r\n    if (!stripeInstance) {\r\n      if (!process.env.STRIPE_SECRET_KEY) {\r\n        throw new Error(\"STRIPE_SECRET_KEY is not set in environment variables\")\r\n      }\r\n      stripeInstance = new Stripe(process.env.STRIPE_SECRET_KEY, {\r\n        apiVersion: \"2025-09-30.clover\",\r\n        typescript: true,\r\n      })\r\n    }\r\n    return stripeInstance[prop as keyof Stripe]\r\n  },\r\n})\r\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;AAEA,IAAI,iBAAgC;AAE7B,MAAM,SAAS,IAAI,MAAM,CAAC,GAAa;IAC5C,KAAI,MAAM,EAAE,IAAI;QACd,gDAAgD;QAChD,IAAI,CAAC,gBAAgB;YACnB,IAAI,CAAC,QAAQ,GAAG,CAAC,iBAAiB,EAAE;gBAClC,MAAM,IAAI,MAAM;YAClB;YACA,iBAAiB,IAAI,uPAAM,CAAC,QAAQ,GAAG,CAAC,iBAAiB,EAAE;gBACzD,YAAY;gBACZ,YAAY;YACd;QACF;QACA,OAAO,cAAc,CAAC,KAAqB;IAC7C;AACF"}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/lib/products.ts"],"sourcesContent":["export interface Product {\r\n  id: string\r\n  name: string\r\n  description: string\r\n  priceInCents: number\r\n  currency: string\r\n  features: string[]\r\n  stripePriceId?: string\r\n  popular?: boolean\r\n}\r\n\r\n// Product catalog - source of truth for all subscription plans\r\nexport const PRODUCTS: Product[] = [\r\n  {\r\n    id: \"starter\",\r\n    name: \"Starter\",\r\n    description: \"Perfect for small businesses\",\r\n    priceInCents: 49900, // R499.00\r\n    currency: \"zar\",\r\n    features: [\"5 tender analyses per month\", \"Basic AI assistance\", \"Tender search access\", \"Email support\"],\r\n  },\r\n  {\r\n    id: \"professional\",\r\n    name: \"Professional\",\r\n    description: \"For growing businesses\",\r\n    priceInCents: 149900, // R1,499.00\r\n    currency: \"zar\",\r\n    popular: true,\r\n    features: [\r\n      \"25 tender analyses per month\",\r\n      \"Advanced AI assistance\",\r\n      \"Unlimited tender searches\",\r\n      \"Team collaboration (5 users)\",\r\n      \"Priority support\",\r\n    ],\r\n  },\r\n  {\r\n    id: \"enterprise\",\r\n    name: \"Enterprise\",\r\n    description: \"For large organizations\",\r\n    priceInCents: 0, // Custom pricing\r\n    currency: \"zar\",\r\n    features: [\r\n      \"Unlimited tender analyses\",\r\n      \"Custom AI training\",\r\n      \"Unlimited users\",\r\n      \"Dedicated account manager\",\r\n      \"24/7 phone support\",\r\n    ],\r\n  },\r\n]\r\n\r\nexport function getProduct(productId: string): Product | undefined {\r\n  return PRODUCTS.find((p) => p.id === productId)\r\n}\r\n\r\nexport function formatPrice(priceInCents: number, currency = \"zar\"): string {\r\n  return new Intl.NumberFormat(\"en-ZA\", {\r\n    style: \"currency\",\r\n    currency: currency.toUpperCase(),\r\n  }).format(priceInCents / 100)\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAYO,MAAM,WAAsB;IACjC;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,cAAc;QACd,UAAU;QACV,UAAU;YAAC;YAA+B;YAAuB;YAAwB;SAAgB;IAC3G;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,cAAc;QACd,UAAU;QACV,SAAS;QACT,UAAU;YACR;YACA;YACA;YACA;YACA;SACD;IACH;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,cAAc;QACd,UAAU;QACV,UAAU;YACR;YACA;YACA;YACA;YACA;SACD;IACH;CACD;AAEM,SAAS,WAAW,SAAiB;IAC1C,OAAO,SAAS,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;AACvC;AAEO,SAAS,YAAY,YAAoB,EAAE,WAAW,KAAK;IAChE,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP,UAAU,SAAS,WAAW;IAChC,GAAG,MAAM,CAAC,eAAe;AAC3B"}},
    {"offset": {"line": 127, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient as createSupabaseServerClient } from \"@supabase/ssr\"\r\nimport { cookies } from \"next/headers\"\r\n\r\nexport async function createClient() {\r\n  const cookieStore = await cookies()\r\n\r\n  return createSupabaseServerClient(process.env.NEXT_PUBLIC_SUPABASE_URL!, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!, {\r\n    cookies: {\r\n      getAll() {\r\n        return cookieStore.getAll()\r\n      },\r\n      setAll(cookiesToSet) {\r\n        try {\r\n          cookiesToSet.forEach(({ name, value, options }) => cookieStore.set(name, value, options))\r\n        } catch {\r\n          // The \"setAll\" method was called from a Server Component.\r\n          // This can be ignored if you have middleware refreshing\r\n          // user sessions.\r\n        }\r\n      },\r\n    },\r\n  })\r\n}\r\n\r\nexport const createServerClient = createClient\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;;;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,gPAAO;IAEjC,OAAO,IAAA,4SAA0B,sUAAoF;QACnH,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAAK,YAAY,GAAG,CAAC,MAAM,OAAO;gBAClF,EAAE,OAAM;gBACN,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACnB;YACF;QACF;IACF;AACF;AAEO,MAAM,qBAAqB"}},
    {"offset": {"line": 162, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/app/actions/stripe.ts"],"sourcesContent":["\"use server\"\r\n\r\nimport { stripe } from \"@/lib/stripe\"\r\nimport { getProduct } from \"@/lib/products\"\r\nimport { createClient } from \"@/lib/supabase/server\"\r\nimport { redirect } from \"next/navigation\"\r\n\r\nexport async function createCheckoutSession(productId: string) {\r\n  const product = getProduct(productId)\r\n  if (!product) {\r\n    throw new Error(`Product with id \"${productId}\" not found`)\r\n  }\r\n\r\n  // Get current user\r\n  const supabase = await createClient()\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n\r\n  if (!user) {\r\n    redirect(\"/login\")\r\n  }\r\n\r\n  // Check if user already has a Stripe customer ID\r\n  const { data: subscription } = await supabase\r\n    .from(\"subscriptions\")\r\n    .select(\"stripe_customer_id\")\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  let customerId = subscription?.stripe_customer_id\r\n\r\n  // Create Stripe customer if doesn't exist\r\n  if (!customerId) {\r\n    const customer = await stripe.customers.create({\r\n      email: user.email,\r\n      metadata: {\r\n        user_id: user.id,\r\n      },\r\n    })\r\n    customerId = customer.id\r\n  }\r\n\r\n  // Create checkout session\r\n  const session = await stripe.checkout.sessions.create({\r\n    customer: customerId,\r\n    line_items: [\r\n      {\r\n        price_data: {\r\n          currency: product.currency,\r\n          product_data: {\r\n            name: product.name,\r\n            description: product.description,\r\n          },\r\n          unit_amount: product.priceInCents,\r\n          recurring: {\r\n            interval: \"month\",\r\n          },\r\n        },\r\n        quantity: 1,\r\n      },\r\n    ],\r\n    mode: \"subscription\",\r\n    success_url: `${process.env.NEXT_PUBLIC_SITE_URL}/dashboard/billing?success=true`,\r\n    cancel_url: `${process.env.NEXT_PUBLIC_SITE_URL}/dashboard/billing?canceled=true`,\r\n    metadata: {\r\n      user_id: user.id,\r\n      plan_id: product.id,\r\n    },\r\n  })\r\n\r\n  if (!session.url) {\r\n    throw new Error(\"Failed to create checkout session\")\r\n  }\r\n\r\n  return session.url\r\n}\r\n\r\nexport async function createCustomerPortalSession() {\r\n  const supabase = await createClient()\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n\r\n  if (!user) {\r\n    redirect(\"/login\")\r\n  }\r\n\r\n  const { data: subscription } = await supabase\r\n    .from(\"subscriptions\")\r\n    .select(\"stripe_customer_id\")\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  if (!subscription?.stripe_customer_id) {\r\n    throw new Error(\"No subscription found\")\r\n  }\r\n\r\n  const session = await stripe.billingPortal.sessions.create({\r\n    customer: subscription.stripe_customer_id,\r\n    return_url: `${process.env.NEXT_PUBLIC_SITE_URL}/dashboard/billing`,\r\n  })\r\n\r\n  return session.url\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AACA;AAAA;;;;;;;AAEO,eAAe,sBAAsB,SAAiB;IAC3D,MAAM,UAAU,IAAA,6HAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM,CAAC,iBAAiB,EAAE,UAAU,WAAW,CAAC;IAC5D;IAEA,mBAAmB;IACnB,MAAM,WAAW,MAAM,IAAA,yIAAY;IACnC,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAE/B,IAAI,CAAC,MAAM;QACT,IAAA,uSAAQ,EAAC;IACX;IAEA,iDAAiD;IACjD,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,MAAM,SAClC,IAAI,CAAC,iBACL,MAAM,CAAC,sBACP,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,MAAM;IAET,IAAI,aAAa,cAAc;IAE/B,0CAA0C;IAC1C,IAAI,CAAC,YAAY;QACf,MAAM,WAAW,MAAM,uHAAM,CAAC,SAAS,CAAC,MAAM,CAAC;YAC7C,OAAO,KAAK,KAAK;YACjB,UAAU;gBACR,SAAS,KAAK,EAAE;YAClB;QACF;QACA,aAAa,SAAS,EAAE;IAC1B;IAEA,0BAA0B;IAC1B,MAAM,UAAU,MAAM,uHAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC;QACpD,UAAU;QACV,YAAY;YACV;gBACE,YAAY;oBACV,UAAU,QAAQ,QAAQ;oBAC1B,cAAc;wBACZ,MAAM,QAAQ,IAAI;wBAClB,aAAa,QAAQ,WAAW;oBAClC;oBACA,aAAa,QAAQ,YAAY;oBACjC,WAAW;wBACT,UAAU;oBACZ;gBACF;gBACA,UAAU;YACZ;SACD;QACD,MAAM;QACN,aAAa,GAAG,QAAQ,GAAG,CAAC,oBAAoB,CAAC,+BAA+B,CAAC;QACjF,YAAY,GAAG,QAAQ,GAAG,CAAC,oBAAoB,CAAC,gCAAgC,CAAC;QACjF,UAAU;YACR,SAAS,KAAK,EAAE;YAChB,SAAS,QAAQ,EAAE;QACrB;IACF;IAEA,IAAI,CAAC,QAAQ,GAAG,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,QAAQ,GAAG;AACpB;AAEO,eAAe;IACpB,MAAM,WAAW,MAAM,IAAA,yIAAY;IACnC,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAE/B,IAAI,CAAC,MAAM;QACT,IAAA,uSAAQ,EAAC;IACX;IAEA,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,MAAM,SAClC,IAAI,CAAC,iBACL,MAAM,CAAC,sBACP,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,MAAM;IAET,IAAI,CAAC,cAAc,oBAAoB;QACrC,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,UAAU,MAAM,uHAAM,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,CAAC;QACzD,UAAU,aAAa,kBAAkB;QACzC,YAAY,GAAG,QAAQ,GAAG,CAAC,oBAAoB,CAAC,kBAAkB,CAAC;IACrE;IAEA,OAAO,QAAQ,GAAG;AACpB;;;IAjGsB;IAuEA;;AAvEA,qVAAA;AAuEA,qVAAA"}},
    {"offset": {"line": 263, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/.next-internal/server/app/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {createCheckoutSession as '40260c4d06056af7f16331adb992a3b9a4f5c3b307'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}