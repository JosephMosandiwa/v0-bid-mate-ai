{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient as createSupabaseServerClient } from \"@supabase/ssr\"\r\nimport { cookies } from \"next/headers\"\r\n\r\nexport async function createClient() {\r\n  const cookieStore = await cookies()\r\n\r\n  return createSupabaseServerClient(process.env.NEXT_PUBLIC_SUPABASE_URL!, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!, {\r\n    cookies: {\r\n      getAll() {\r\n        return cookieStore.getAll()\r\n      },\r\n      setAll(cookiesToSet) {\r\n        try {\r\n          cookiesToSet.forEach(({ name, value, options }) => cookieStore.set(name, value, options))\r\n        } catch {\r\n          // The \"setAll\" method was called from a Server Component.\r\n          // This can be ignored if you have middleware refreshing\r\n          // user sessions.\r\n        }\r\n      },\r\n    },\r\n  })\r\n}\r\n\r\nexport const createServerClient = createClient\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;;;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,gPAAO;IAEjC,OAAO,IAAA,4SAA0B,sUAAoF;QACnH,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAAK,YAAY,GAAG,CAAC,MAAM,OAAO;gBAClF,EAAE,OAAM;gBACN,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACnB;YACF;QACF;IACF;AACF;AAEO,MAAM,qBAAqB"}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/app/actions/document-actions.ts"],"sourcesContent":["\"use server\"\r\n\r\nimport { createClient } from \"@/lib/supabase/server\"\r\nimport { revalidatePath } from \"next/cache\"\r\n\r\nexport async function uploadTenderDocument(formData: FormData) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const file = formData.get(\"file\") as File\r\n  const userTenderId = formData.get(\"userTenderId\") as string\r\n\r\n  if (!file || !userTenderId) {\r\n    return { success: false, error: \"File and tender ID are required\" }\r\n  }\r\n\r\n  // Upload file to Supabase Storage\r\n  const fileExt = file.name.split(\".\").pop()\r\n  const fileName = `${user.id}/${userTenderId}/${Date.now()}.${fileExt}`\r\n\r\n  const { data: uploadData, error: uploadError } = await supabase.storage\r\n    .from(\"tender-documents\")\r\n    .upload(fileName, file)\r\n\r\n  if (uploadError) {\r\n    console.error(\"[v0] Error uploading file:\", uploadError)\r\n    return { success: false, error: \"Failed to upload file\" }\r\n  }\r\n\r\n  // Save document metadata to database\r\n  const { data, error } = await supabase\r\n    .from(\"tender_documents\")\r\n    .insert({\r\n      user_tender_id: userTenderId,\r\n      user_id: user.id,\r\n      file_name: file.name,\r\n      file_size: file.size,\r\n      file_type: file.type,\r\n      storage_path: uploadData.path,\r\n    })\r\n    .select()\r\n    .single()\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error saving document metadata:\", error)\r\n    // Clean up uploaded file\r\n    await supabase.storage.from(\"tender-documents\").remove([fileName])\r\n    return { success: false, error: \"Failed to save document\" }\r\n  }\r\n\r\n  revalidatePath(`/dashboard/tenders/${userTenderId}`)\r\n  return { success: true, data }\r\n}\r\n\r\nexport async function getTenderDocuments(userTenderId: string) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\", documents: [] }\r\n\r\n  const { data, error } = await supabase\r\n    .from(\"tender_documents\")\r\n    .select(\"*\")\r\n    .eq(\"user_tender_id\", userTenderId)\r\n    .eq(\"user_id\", user.id)\r\n    .order(\"created_at\", { ascending: false })\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error fetching documents:\", error)\r\n    return { success: false, error: \"Failed to fetch documents\", documents: [] }\r\n  }\r\n\r\n  return { success: true, documents: data || [] }\r\n}\r\n\r\nexport async function downloadTenderDocument(documentId: string) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  // Get document metadata\r\n  const { data: document, error: docError } = await supabase\r\n    .from(\"tender_documents\")\r\n    .select(\"*\")\r\n    .eq(\"id\", documentId)\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  if (docError || !document) {\r\n    console.error(\"[v0] Error fetching document:\", docError)\r\n    return { success: false, error: \"Document not found\" }\r\n  }\r\n\r\n  const isExternalUrl = document.storage_path.startsWith(\"http://\") || document.storage_path.startsWith(\"https://\")\r\n\r\n  if (isExternalUrl) {\r\n    // For external documents (from eTenders API), return the URL directly\r\n    console.log(\"[v0] Returning external document URL:\", document.storage_path)\r\n    return { success: true, url: document.storage_path, fileName: document.file_name }\r\n  }\r\n\r\n  // For documents stored in Supabase Storage, create a signed URL\r\n  const { data: urlData, error: urlError } = await supabase.storage\r\n    .from(\"tender-documents\")\r\n    .createSignedUrl(document.storage_path, 60) // 60 seconds expiry\r\n\r\n  if (urlError) {\r\n    console.error(\"[v0] Error creating signed URL:\", urlError)\r\n    return { success: false, error: \"Failed to generate download link\" }\r\n  }\r\n\r\n  return { success: true, url: urlData.signedUrl, fileName: document.file_name }\r\n}\r\n\r\nexport async function deleteTenderDocument(documentId: string) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  // Get document to delete from storage\r\n  const { data: document, error: docError } = await supabase\r\n    .from(\"tender_documents\")\r\n    .select(\"*\")\r\n    .eq(\"id\", documentId)\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  if (docError || !document) {\r\n    return { success: false, error: \"Document not found\" }\r\n  }\r\n\r\n  // Delete from storage\r\n  const { error: storageError } = await supabase.storage.from(\"tender-documents\").remove([document.storage_path])\r\n\r\n  if (storageError) {\r\n    console.error(\"[v0] Error deleting from storage:\", storageError)\r\n  }\r\n\r\n  // Delete from database\r\n  const { error } = await supabase.from(\"tender_documents\").delete().eq(\"id\", documentId).eq(\"user_id\", user.id)\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error deleting document:\", error)\r\n    return { success: false, error: \"Failed to delete document\" }\r\n  }\r\n\r\n  revalidatePath(`/dashboard/tenders/${document.user_tender_id}`)\r\n  return { success: true }\r\n}\r\n\r\nexport async function analyzeDocument(documentId: string, analysis: any) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  try {\r\n    console.log(\"[v0] Saving analysis for document:\", documentId)\r\n\r\n    // Save analysis to database\r\n    const { error } = await supabase\r\n      .from(\"tender_documents\")\r\n      .update({ ai_analysis: analysis })\r\n      .eq(\"id\", documentId)\r\n      .eq(\"user_id\", user.id)\r\n\r\n    if (error) {\r\n      console.error(\"[v0] Error saving analysis:\", error)\r\n      return { success: false, error: \"Failed to save analysis\" }\r\n    }\r\n\r\n    console.log(\"[v0] Analysis saved successfully\")\r\n    revalidatePath(`/dashboard/tenders`)\r\n    return { success: true, analysis }\r\n  } catch (error) {\r\n    console.error(\"[v0] Error in analyzeDocument:\", error)\r\n    return { success: false, error: \"Failed to save analysis\" }\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 407, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/app/actions/tender-actions.ts"],"sourcesContent":["\"use server\"\r\n\r\nimport { createClient } from \"@/lib/supabase/server\"\r\nimport { revalidatePath } from \"next/cache\"\r\nimport { put } from \"@vercel/blob\"\r\n\r\nexport interface TenderDocument {\r\n  id?: string\r\n  title: string\r\n  url: string\r\n  documentType?: string\r\n  format?: string\r\n  description?: string\r\n}\r\n\r\nexport interface TenderData {\r\n  tenderId: string\r\n  title: string\r\n  organization: string\r\n  publishDate?: string\r\n  closeDate?: string\r\n  value?: string\r\n  category?: string\r\n  description?: string\r\n  url?: string\r\n  documents?: TenderDocument[] // Add documents array\r\n}\r\n\r\nexport async function addTenderToUser(tenderData: TenderData) {\r\n  const supabase = await createClient()\r\n\r\n  // Get current user\r\n  const {\r\n    data: { user },\r\n    error: userError,\r\n  } = await supabase.auth.getUser()\r\n\r\n  if (userError || !user) {\r\n    return { success: false, error: \"Not authenticated\" }\r\n  }\r\n\r\n  // Insert tender\r\n  const { data, error } = await supabase\r\n    .from(\"user_tenders\")\r\n    .insert({\r\n      user_id: user.id,\r\n      tender_id: tenderData.tenderId,\r\n      title: tenderData.title,\r\n      organization: tenderData.organization,\r\n      publish_date: tenderData.publishDate,\r\n      close_date: tenderData.closeDate,\r\n      value: tenderData.value,\r\n      category: tenderData.category,\r\n      description: tenderData.description,\r\n      url: tenderData.url,\r\n      status: \"draft\",\r\n    })\r\n    .select()\r\n    .single()\r\n\r\n  if (error) {\r\n    // Check if it's a duplicate\r\n    if (error.code === \"23505\") {\r\n      return { success: false, error: \"Tender already added\" }\r\n    }\r\n    console.error(\"[v0] Error adding tender:\", error)\r\n    return { success: false, error: \"Failed to add tender\" }\r\n  }\r\n\r\n  if (tenderData.documents && tenderData.documents.length > 0 && data) {\r\n    console.log(\"[v0] Adding\", tenderData.documents.length, \"documents to tender\", data.id)\r\n    console.log(\"[v0] Document data:\", JSON.stringify(tenderData.documents, null, 2))\r\n\r\n    const documentsToInsert = tenderData.documents.map((doc) => ({\r\n      user_tender_id: data.id, // Changed from tender_id\r\n      user_id: user.id,\r\n      file_name: doc.title, // Changed from name\r\n      storage_path: doc.url, // Changed from file_url - external URLs stored as storage_path\r\n      file_type: doc.format || \"application/pdf\",\r\n      file_size: 0, // Unknown size for external documents\r\n      // Removed document_type and description as they don't exist in schema\r\n    }))\r\n\r\n    console.log(\"[v0] Inserting documents:\", JSON.stringify(documentsToInsert, null, 2))\r\n\r\n    const { data: insertedDocs, error: docsError } = await supabase\r\n      .from(\"tender_documents\")\r\n      .insert(documentsToInsert)\r\n      .select()\r\n\r\n    if (docsError) {\r\n      console.error(\"[v0] Error adding documents:\", docsError)\r\n      console.error(\"[v0] Error details:\", JSON.stringify(docsError, null, 2))\r\n      // Don't fail the whole operation if documents fail, just log it\r\n    } else {\r\n      console.log(\"[v0] Successfully added\", insertedDocs?.length || 0, \"documents\")\r\n      console.log(\r\n        \"[v0] Inserted document IDs:\",\r\n        insertedDocs?.map((d) => d.id),\r\n      )\r\n    }\r\n  } else {\r\n    console.log(\"[v0] No documents to add for this tender\")\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/tenders\")\r\n  return { success: true, data }\r\n}\r\n\r\nexport async function toggleTenderPin(tenderId: string, isPinned: boolean) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const { error } = await supabase\r\n    .from(\"user_tenders\")\r\n    .update({ is_pinned: isPinned })\r\n    .eq(\"id\", tenderId)\r\n    .eq(\"user_id\", user.id)\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error toggling pin:\", error)\r\n    return { success: false, error: \"Failed to update tender\" }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/tenders\")\r\n  revalidatePath(\"/dashboard/search\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function toggleTenderFavourite(tenderId: string, isFavourited: boolean) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const { error } = await supabase\r\n    .from(\"user_tenders\")\r\n    .update({ is_favourited: isFavourited })\r\n    .eq(\"id\", tenderId)\r\n    .eq(\"user_id\", user.id)\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error toggling favourite:\", error)\r\n    return { success: false, error: \"Failed to update tender\" }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/tenders\")\r\n  revalidatePath(\"/dashboard/search\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function toggleTenderWishlist(tenderId: string, isWishlisted: boolean) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const { error } = await supabase\r\n    .from(\"user_tenders\")\r\n    .update({ is_wishlisted: isWishlisted })\r\n    .eq(\"id\", tenderId)\r\n    .eq(\"user_id\", user.id)\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error toggling wishlist:\", error)\r\n    return { success: false, error: \"Failed to update tender\" }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/tenders\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function getUserTenders() {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\", tenders: [] }\r\n\r\n  // Fetch all tenders from user_tenders (both scraped and custom)\r\n  const { data: tenders, error } = await supabase\r\n    .from(\"user_tenders\")\r\n    .select(\"*\")\r\n    .eq(\"user_id\", user.id)\r\n    .order(\"created_at\", { ascending: false })\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error fetching tenders:\", error)\r\n    return { success: false, error: \"Failed to fetch tenders\", tenders: [] }\r\n  }\r\n\r\n  // Normalize data for frontend\r\n  const normalizedTenders = (tenders || []).map((tender) => ({\r\n    id: tender.id,\r\n    tender_id: tender.tender_id || `custom-${tender.id}`, // Fallback for custom tenders\r\n    title: tender.title,\r\n    organization: tender.organization,\r\n    status: tender.status,\r\n    close_date: tender.close_date || tender.deadline, // Use deadline if close_date is null\r\n    value: tender.value,\r\n    category: tender.category,\r\n    is_pinned: tender.is_pinned || false,\r\n    is_favourited: tender.is_favourited || false,\r\n    is_wishlisted: tender.is_wishlisted || false,\r\n    created_at: tender.created_at,\r\n    tender_type: tender.tender_type || \"scraped\", // Default to scraped if null\r\n    location: tender.location,\r\n  }))\r\n\r\n  return { success: true, tenders: normalizedTenders }\r\n}\r\n\r\nexport async function deleteTender(tenderId: string, tenderType?: \"scraped\" | \"custom\") {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  // Simply delete from user_tenders table\r\n  const { error } = await supabase.from(\"user_tenders\").delete().eq(\"id\", tenderId).eq(\"user_id\", user.id)\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error deleting tender:\", error)\r\n    return { success: false, error: \"Failed to delete tender\" }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/tenders\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function saveScrapedTenderToUser(scrapedTender: {\r\n  id: string\r\n  title: string\r\n  source_name: string\r\n  description?: string\r\n  publish_date?: string\r\n  close_date?: string\r\n  estimated_value?: string\r\n  category?: string\r\n  tender_url?: string\r\n}) {\r\n  const supabase = await createClient()\r\n\r\n  // Get current user\r\n  const {\r\n    data: { user },\r\n    error: userError,\r\n  } = await supabase.auth.getUser()\r\n\r\n  if (userError || !user) {\r\n    return { success: false, error: \"Not authenticated\" }\r\n  }\r\n\r\n  // Check if tender already exists for this user\r\n  const { data: existing } = await supabase\r\n    .from(\"user_tenders\")\r\n    .select(\"id, status\")\r\n    .eq(\"user_id\", user.id)\r\n    .eq(\"tender_id\", scrapedTender.id)\r\n    .single()\r\n\r\n  if (existing) {\r\n    // If already exists and is draft, update to in-progress\r\n    if (existing.status === \"draft\") {\r\n      const { error: updateError } = await supabase\r\n        .from(\"user_tenders\")\r\n        .update({ status: \"in-progress\" })\r\n        .eq(\"id\", existing.id)\r\n\r\n      if (updateError) {\r\n        console.error(\"[v0] Error updating tender status:\", updateError)\r\n        return { success: false, error: \"Failed to update tender status\" }\r\n      }\r\n\r\n      revalidatePath(\"/dashboard/tenders\")\r\n      return { success: true, message: \"Tender status updated to in-progress\", isNew: false }\r\n    }\r\n\r\n    // Already exists and not draft, no need to update\r\n    return { success: true, message: \"Tender already in your list\", isNew: false }\r\n  }\r\n\r\n  // Insert new tender with in-progress status\r\n  const { data, error } = await supabase\r\n    .from(\"user_tenders\")\r\n    .insert({\r\n      user_id: user.id,\r\n      tender_id: scrapedTender.id,\r\n      title: scrapedTender.title,\r\n      organization: scrapedTender.source_name,\r\n      publish_date: scrapedTender.publish_date,\r\n      close_date: scrapedTender.close_date,\r\n      value: scrapedTender.estimated_value,\r\n      category: scrapedTender.category,\r\n      description: scrapedTender.description,\r\n      url: scrapedTender.tender_url,\r\n      status: \"in-progress\",\r\n      tender_type: \"scraped\",\r\n    })\r\n    .select()\r\n    .single()\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error saving tender:\", error)\r\n    return { success: false, error: \"Failed to save tender\" }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/tenders\")\r\n  return { success: true, message: \"Tender saved to My Tenders\", isNew: true, data }\r\n}\r\n\r\nexport async function createCustomTender(tenderData: {\r\n  title: string\r\n  organization: string\r\n  deadline: string\r\n  value: string\r\n  description: string\r\n  category?: string\r\n  location?: string\r\n  uploadedFile?: File\r\n  analysis?: any\r\n}) {\r\n  console.log(\"[v0] createCustomTender called with data:\", {\r\n    title: tenderData.title,\r\n    organization: tenderData.organization,\r\n    deadline: tenderData.deadline,\r\n    hasFile: !!tenderData.uploadedFile,\r\n    hasAnalysis: !!tenderData.analysis,\r\n  })\r\n\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n    error: userError,\r\n  } = await supabase.auth.getUser()\r\n\r\n  if (userError || !user) {\r\n    console.error(\"[v0] Auth error:\", userError)\r\n    return { success: false, error: \"Not authenticated\" }\r\n  }\r\n\r\n  console.log(\"[v0] User authenticated:\", user.id)\r\n\r\n  try {\r\n    console.log(\"[v0] Creating custom tender record...\")\r\n\r\n    const { data: customTender, error: customTenderError } = await supabase\r\n      .from(\"user_tenders\")\r\n      .insert({\r\n        user_id: user.id,\r\n        title: tenderData.title,\r\n        organization: tenderData.organization,\r\n        deadline: tenderData.deadline,\r\n        value: tenderData.value,\r\n        category: tenderData.category || \"Custom\",\r\n        description: tenderData.description,\r\n        location: tenderData.location,\r\n        status: \"in-progress\",\r\n        tender_type: \"custom\",\r\n      })\r\n      .select()\r\n      .single()\r\n\r\n    if (customTenderError) {\r\n      console.error(\"[v0] Error creating custom tender:\", customTenderError)\r\n      return { success: false, error: \"Failed to create tender: \" + customTenderError.message }\r\n    }\r\n\r\n    console.log(\"[v0] Custom tender created successfully:\", customTender.id)\r\n\r\n    let documentSaved = false\r\n    let documentError: string | null = null\r\n\r\n    if (tenderData.uploadedFile) {\r\n      console.log(\"[v0] Uploading file to blob storage...\")\r\n      console.log(\"[v0] File details:\", {\r\n        name: tenderData.uploadedFile.name,\r\n        type: tenderData.uploadedFile.type,\r\n        size: tenderData.uploadedFile.size,\r\n      })\r\n\r\n      try {\r\n        // Upload path includes 'custom-tenders' prefix still, which is fine\r\n        const blob = await put(\r\n          `custom-tenders/${customTender.id}/${tenderData.uploadedFile.name}`,\r\n          tenderData.uploadedFile,\r\n          {\r\n            access: \"public\",\r\n          },\r\n        )\r\n\r\n        console.log(\"[v0] File uploaded to blob:\", blob.url)\r\n\r\n        const documentData = {\r\n          tender_id: customTender.id,\r\n          file_name: tenderData.uploadedFile.name,\r\n          file_type: tenderData.uploadedFile.type,\r\n          file_size: tenderData.uploadedFile.size,\r\n          blob_url: blob.url,\r\n          storage_path: blob.url,\r\n        }\r\n\r\n        console.log(\"[v0] Inserting document with data:\", JSON.stringify(documentData, null, 2))\r\n\r\n        const { data: insertedDoc, error: docError } = await supabase\r\n          .from(\"user_tender_documents\") // Updated table name\r\n          .insert(documentData)\r\n          .select()\r\n          .single()\r\n\r\n        if (docError) {\r\n          console.error(\"[v0] Error saving document reference:\", docError)\r\n          console.error(\"[v0] Error code:\", docError.code)\r\n          console.error(\"[v0] Error message:\", docError.message)\r\n          documentError = `Failed to save document: ${docError.message} (Code: ${docError.code})`\r\n        } else {\r\n          console.log(\"[v0] Document reference saved successfully:\", insertedDoc.id)\r\n          documentSaved = true\r\n        }\r\n      } catch (uploadError) {\r\n        console.error(\"[v0] Error uploading file:\", uploadError)\r\n        documentError = `Failed to upload file: ${uploadError instanceof Error ? uploadError.message : \"Unknown error\"}`\r\n      }\r\n    } else {\r\n      console.log(\"[v0] No file to upload\")\r\n    }\r\n\r\n    let analysisSaved = false\r\n    let analysisError: string | null = null\r\n\r\n    if (tenderData.analysis) {\r\n      console.log(\"[v0] Saving analysis data...\")\r\n\r\n      const analysisData = {\r\n        tender_id: customTender.id,\r\n        analysis_data: tenderData.analysis,\r\n      }\r\n\r\n      console.log(\"[v0] Inserting analysis with tender_id:\", customTender.id)\r\n\r\n      const { data: insertedAnalysis, error: analysisErr } = await supabase\r\n        .from(\"user_tender_analysis\") // Updated table name\r\n        .insert(analysisData)\r\n        .select()\r\n        .single()\r\n\r\n      if (analysisErr) {\r\n        console.error(\"[v0] Error saving analysis:\", analysisErr)\r\n        analysisError = `Failed to save analysis: ${analysisErr.message} (Code: ${analysisErr.code})`\r\n      } else {\r\n        console.log(\"[v0] Analysis saved successfully:\", insertedAnalysis.id)\r\n        analysisSaved = true\r\n      }\r\n    } else {\r\n      console.log(\"[v0] No analysis to save\")\r\n    }\r\n\r\n    console.log(\"[v0] Tender creation completed\")\r\n    revalidatePath(\"/dashboard/tenders\")\r\n    revalidatePath(\"/dashboard/custom-tenders\")\r\n\r\n    return {\r\n      success: true,\r\n      data: customTender,\r\n      tenderId: customTender.id,\r\n      documentSaved,\r\n      documentError,\r\n      analysisSaved,\r\n      analysisError,\r\n    }\r\n  } catch (error) {\r\n    console.error(\"[v0] Error in createCustomTender:\", error)\r\n    return { success: false, error: \"Failed to create tender: \" + (error as Error).message }\r\n  }\r\n}\r\n\r\nexport async function getDashboardStats() {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  try {\r\n    // Get all tenders count for this user\r\n    const { count: totalTenders } = await supabase\r\n      .from(\"user_tenders\")\r\n      .select(\"*\", { count: \"exact\", head: true })\r\n      .eq(\"user_id\", user.id)\r\n\r\n    // Get analyzed tenders count (where we have analysis data)\r\n    // RLS ensures we only see our own analyses\r\n    const { count: analyzedCount } = await supabase\r\n      .from(\"user_tender_analysis\")\r\n      .select(\"tender_id\", { count: \"exact\", head: true })\r\n    // Wait, user_tender_analysis doesn't have user_id in my migration?\r\n    // Let's check migration script...\r\n    // user_custom_tender_analysis didn't have user_id in the original schema I saw in 031?\r\n    // L131: WHERE id = tender_id AND user_id = auth.uid() -> checking parent tender.\r\n    // So user_tender_analysis table assumes linking to user_tenders.\r\n    // query:\r\n    // select count(*) from user_tender_analysis join user_tenders on ... where user_tenders.user_id = ...\r\n\r\n    // Alternative: Just query user_tenders where tender_type='custom' (proxy for analyzed?)\r\n    // Or just fetching recent activity from unified table.\r\n\r\n    // Get recent activity (last 5 tenders)\r\n    const { data: recentTenders } = await supabase\r\n      .from(\"user_tenders\")\r\n      .select(\"*\")\r\n      .eq(\"user_id\", user.id)\r\n      .order(\"created_at\", { ascending: false })\r\n      .limit(5)\r\n\r\n    const recentActivity = (recentTenders || []).map((tender) => ({\r\n      id: tender.id,\r\n      title: tender.title,\r\n      organization: tender.organization,\r\n      type: tender.tender_type === \"custom\" ? (\"analyzed\" as const) : (\"saved\" as const),\r\n      created_at: tender.created_at,\r\n    }))\r\n\r\n    // Get tenders closing soon (next 7 days)\r\n    const sevenDaysFromNow = new Date()\r\n    sevenDaysFromNow.setDate(sevenDaysFromNow.getDate() + 7)\r\n\r\n    // Check both close_date (scraped) and deadline (custom, if parsed?)\r\n    // For now, relying on close_date. My migration copied deadline to close_date if I recall?\r\n    // No, I copied close_date to close_date. Custom tenders might rely on 'deadline' text column.\r\n    // This is tricky for sorting. Ideally we parse deadline to close_date.\r\n    // Assuming close_date is populated for meaningful deadlines.\r\n\r\n    const { data: closingSoon } = await supabase\r\n      .from(\"user_tenders\")\r\n      .select(\"*\")\r\n      .eq(\"user_id\", user.id)\r\n      .not(\"close_date\", \"is\", null)\r\n      .gte(\"close_date\", new Date().toISOString())\r\n      .lte(\"close_date\", sevenDaysFromNow.toISOString())\r\n      .order(\"close_date\", { ascending: true })\r\n      .limit(5)\r\n\r\n    return {\r\n      success: true,\r\n      stats: {\r\n        totalTenders: totalTenders || 0,\r\n        analyzedTenders: analyzedCount || 0, // This might be inaccurate without join, but acceptable for now or I can do a join query if needed.\r\n        // Actually, let's try to get substantial analyzed count if possible.\r\n        // For now 0 is fine or just count custom tenders?\r\n        closingSoon: closingSoon?.length || 0,\r\n        recentActivity,\r\n        upcomingDeadlines: closingSoon || [],\r\n      },\r\n    }\r\n  } catch (error) {\r\n    console.error(\"[v0] Error fetching dashboard stats:\", error)\r\n    return { success: false, error: \"Failed to fetch dashboard statistics\" }\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 922, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/.next-internal/server/app/dashboard/tenders/%5Bid%5D/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {uploadTenderDocument as '40ef9db1733294d72c0e09cb151c53a191e03e0228'} from 'ACTIONS_MODULE0'\nexport {downloadTenderDocument as '40bd4349e69bf94346d5748771c6f820ca4b7a614b'} from 'ACTIONS_MODULE0'\nexport {deleteTenderDocument as '407f88633cdf843df2a278a67732dc7d45cca80b1a'} from 'ACTIONS_MODULE0'\nexport {analyzeDocument as '6075536310bb9f61beb19224fe5c0ce35d37626c2b'} from 'ACTIONS_MODULE0'\nexport {saveScrapedTenderToUser as '4060312bd46fc40ec5491a64b4d4a1575650502b8b'} from 'ACTIONS_MODULE1'\n"],"names":[],"mappings":";AAAA;AAIA"}}]
}