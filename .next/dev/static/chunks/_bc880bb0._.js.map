{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card\"\r\n      className={cn(\r\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-header\"\r\n      className={cn(\r\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-title\"\r\n      className={cn('leading-none font-semibold', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-description\"\r\n      className={cn('text-muted-foreground text-sm', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-action\"\r\n      className={cn(\r\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-content\"\r\n      className={cn('px-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-footer\"\r\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Card,\r\n  CardHeader,\r\n  CardFooter,\r\n  CardTitle,\r\n  CardAction,\r\n  CardDescription,\r\n  CardContent,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,mSAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,mSAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,mSAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,mSAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,mSAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,mSAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,mSAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS"}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\r\n  return (\r\n    <input\r\n      type={type}\r\n      data-slot=\"input\"\r\n      className={cn(\r\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\r\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\r\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,mSAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS"}},
    {"offset": {"line": 155, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/components/ui/label.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport * as LabelPrimitive from '@radix-ui/react-label'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Label({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\r\n  return (\r\n    <LabelPrimitive.Root\r\n      data-slot=\"label\"\r\n      className={cn(\r\n        'flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Label }\r\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,mSAAC,yRAAmB;QAClB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,uNACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS"}},
    {"offset": {"line": 188, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/components/ui/alert.tsx"],"sourcesContent":["import * as React from 'react'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst alertVariants = cva(\r\n  'relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current',\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: 'bg-card text-card-foreground',\r\n        destructive:\r\n          'text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n    },\r\n  },\r\n)\r\n\r\nfunction Alert({\r\n  className,\r\n  variant,\r\n  ...props\r\n}: React.ComponentProps<'div'> & VariantProps<typeof alertVariants>) {\r\n  return (\r\n    <div\r\n      data-slot=\"alert\"\r\n      role=\"alert\"\r\n      className={cn(alertVariants({ variant }), className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction AlertTitle({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"alert-title\"\r\n      className={cn(\r\n        'col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction AlertDescription({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"alert-description\"\r\n      className={cn(\r\n        'text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Alert, AlertTitle, AlertDescription }\r\n"],"names":[],"mappings":";;;;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,qPAAG,EACvB,qOACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,GAAG,OAC8D;IACjE,qBACE,mSAAC;QACC,aAAU;QACV,MAAK;QACL,WAAW,IAAA,qHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf;KAbS;AAeT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,mSAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,+DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,iBAAiB,EACxB,SAAS,EACT,GAAG,OACyB;IAC5B,qBACE,mSAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kGACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS"}},
    {"offset": {"line": 264, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/app/actions/tender-actions.ts"],"sourcesContent":["\"use server\"\r\n\r\nimport { createClient } from \"@/lib/supabase/server\"\r\nimport { revalidatePath } from \"next/cache\"\r\nimport { PinTenderOptions } from \"@/lib/types\"\r\nimport { redirect } from \"next/navigation\"\r\nimport { AnalyzedTender } from \"@/lib/types/tender\"\r\nimport { orchestrateTenderAnalysis } from \"@/lib/engines/orchestrator/tender-orchestrator\"\r\n\r\n\r\nexport interface TenderDocument {\r\n  id?: string\r\n  title: string\r\n  url: string\r\n  documentType?: string\r\n  format?: string\r\n  description?: string\r\n}\r\n\r\nexport interface TenderData {\r\n  tenderId: string\r\n  title: string\r\n  organization: string\r\n  publishDate?: string\r\n  closeDate?: string\r\n  value?: string\r\n  category?: string\r\n  description?: string\r\n  url?: string\r\n  documents?: TenderDocument[] // Add documents array\r\n}\r\n\r\nexport async function addTenderToUser(tenderData: TenderData) {\r\n  const supabase = await createClient()\r\n\r\n  // Get current user\r\n  const {\r\n    data: { user },\r\n    error: userError,\r\n  } = await supabase.auth.getUser()\r\n\r\n  if (userError || !user) {\r\n    return { success: false, error: \"Not authenticated\" }\r\n  }\r\n\r\n  // Insert tender\r\n  const { data, error } = await supabase\r\n    .from(\"user_tenders\")\r\n    .insert({\r\n      user_id: user.id,\r\n      tender_id: tenderData.tenderId,\r\n      title: tenderData.title,\r\n      organization: tenderData.organization,\r\n      publish_date: tenderData.publishDate,\r\n      close_date: tenderData.closeDate,\r\n      value: tenderData.value,\r\n      category: tenderData.category,\r\n      description: tenderData.description,\r\n      url: tenderData.url,\r\n      status: \"draft\",\r\n    })\r\n    .select()\r\n    .single()\r\n\r\n  if (error) {\r\n    // Check if it's a duplicate\r\n    if (error.code === \"23505\") {\r\n      return { success: false, error: \"Tender already added\" }\r\n    }\r\n    console.error(\"[v0] Error adding tender:\", error)\r\n    return { success: false, error: \"Failed to add tender\" }\r\n  }\r\n\r\n  if (tenderData.documents && tenderData.documents.length > 0 && data) {\r\n    console.log(\"[v0] Adding\", tenderData.documents.length, \"documents to tender\", data.id)\r\n    console.log(\"[v0] Document data:\", JSON.stringify(tenderData.documents, null, 2))\r\n\r\n    const documentsToInsert = tenderData.documents.map((doc) => ({\r\n      user_tender_id: data.id, // Changed from tender_id\r\n      user_id: user.id,\r\n      file_name: doc.title, // Changed from name\r\n      storage_path: doc.url, // Changed from file_url - external URLs stored as storage_path\r\n      file_type: doc.format || \"application/pdf\",\r\n      file_size: 0, // Unknown size for external documents\r\n      // Removed document_type and description as they don't exist in schema\r\n    }))\r\n\r\n    console.log(\"[v0] Inserting documents:\", JSON.stringify(documentsToInsert, null, 2))\r\n\r\n    const { data: insertedDocs, error: docsError } = await supabase\r\n      .from(\"tender_documents\")\r\n      .insert(documentsToInsert)\r\n      .select()\r\n\r\n    if (docsError) {\r\n      console.error(\"[v0] Error adding documents:\", docsError)\r\n      console.error(\"[v0] Error details:\", JSON.stringify(docsError, null, 2))\r\n      // Don't fail the whole operation if documents fail, just log it\r\n    } else {\r\n      console.log(\"[v0] Successfully added\", insertedDocs?.length || 0, \"documents\")\r\n      console.log(\r\n        \"[v0] Inserted document IDs:\",\r\n        insertedDocs?.map((d) => d.id),\r\n      )\r\n    }\r\n  } else {\r\n    console.log(\"[v0] No documents to add for this tender\")\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/tenders\")\r\n  return { success: true, data }\r\n}\r\n\r\nexport async function toggleTenderPin(tenderId: string, isPinned: boolean) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const { error } = await supabase\r\n    .from(\"user_tenders\")\r\n    .update({ is_pinned: isPinned })\r\n    .eq(\"id\", tenderId)\r\n    .eq(\"user_id\", user.id)\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error toggling pin:\", error)\r\n    return { success: false, error: \"Failed to update tender\" }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/tenders\")\r\n  revalidatePath(\"/dashboard/search\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function toggleTenderFavourite(tenderId: string, isFavourited: boolean) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const { error } = await supabase\r\n    .from(\"user_tenders\")\r\n    .update({ is_favourited: isFavourited })\r\n    .eq(\"id\", tenderId)\r\n    .eq(\"user_id\", user.id)\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error toggling favourite:\", error)\r\n    return { success: false, error: \"Failed to update tender\" }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/tenders\")\r\n  revalidatePath(\"/dashboard/search\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function toggleTenderWishlist(tenderId: string, isWishlisted: boolean) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const { error } = await supabase\r\n    .from(\"user_tenders\")\r\n    .update({ is_wishlisted: isWishlisted })\r\n    .eq(\"id\", tenderId)\r\n    .eq(\"user_id\", user.id)\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error toggling wishlist:\", error)\r\n    return { success: false, error: \"Failed to update tender\" }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/tenders\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function getUserTenders() {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\", tenders: [] }\r\n\r\n  // Fetch all tenders from user_tenders (both scraped and custom)\r\n  const { data: tenders, error } = await supabase\r\n    .from(\"user_tenders\")\r\n    .select(\"*\")\r\n    .eq(\"user_id\", user.id)\r\n    .order(\"created_at\", { ascending: false })\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error fetching tenders:\", error)\r\n    return { success: false, error: \"Failed to fetch tenders\", tenders: [] }\r\n  }\r\n\r\n  // Normalize data for frontend\r\n  const normalizedTenders = (tenders || []).map((tender) => ({\r\n    id: tender.id,\r\n    tender_id: tender.tender_id || `custom-${tender.id}`, // Fallback for custom tenders\r\n    title: tender.title,\r\n    organization: tender.organization,\r\n    status: tender.status,\r\n    close_date: tender.close_date || tender.deadline, // Use deadline if close_date is null\r\n    value: tender.value,\r\n    category: tender.category,\r\n    is_pinned: tender.is_pinned || false,\r\n    is_favourited: tender.is_favourited || false,\r\n    is_wishlisted: tender.is_wishlisted || false,\r\n    created_at: tender.created_at,\r\n    tender_type: tender.tender_type || \"scraped\", // Default to scraped if null\r\n    location: tender.location,\r\n  }))\r\n\r\n  return { success: true, tenders: normalizedTenders }\r\n}\r\n\r\nexport async function deleteTender(tenderId: string, tenderType?: \"scraped\" | \"custom\") {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  // Simply delete from user_tenders table\r\n  const { error } = await supabase.from(\"user_tenders\").delete().eq(\"id\", tenderId).eq(\"user_id\", user.id)\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error deleting tender:\", error)\r\n    return { success: false, error: \"Failed to delete tender\" }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/tenders\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function saveScrapedTenderToUser(scrapedTender: {\r\n  id: string\r\n  title: string\r\n  source_name: string\r\n  description?: string\r\n  publish_date?: string\r\n  close_date?: string\r\n  estimated_value?: string\r\n  category?: string\r\n  tender_url?: string\r\n}) {\r\n  const supabase = await createClient()\r\n\r\n  // Get current user\r\n  const {\r\n    data: { user },\r\n    error: userError,\r\n  } = await supabase.auth.getUser()\r\n\r\n  if (userError || !user) {\r\n    return { success: false, error: \"Not authenticated\" }\r\n  }\r\n\r\n  // Check if tender already exists for this user\r\n  const { data: existing } = await supabase\r\n    .from(\"user_tenders\")\r\n    .select(\"id, status\")\r\n    .eq(\"user_id\", user.id)\r\n    .eq(\"tender_id\", scrapedTender.id)\r\n    .single()\r\n\r\n  if (existing) {\r\n    // If already exists and is draft, update to in-progress\r\n    if (existing.status === \"draft\") {\r\n      const { error: updateError } = await supabase\r\n        .from(\"user_tenders\")\r\n        .update({ status: \"in-progress\" })\r\n        .eq(\"id\", existing.id)\r\n\r\n      if (updateError) {\r\n        console.error(\"[v0] Error updating tender status:\", updateError)\r\n        return { success: false, error: \"Failed to update tender status\" }\r\n      }\r\n\r\n      revalidatePath(\"/dashboard/tenders\")\r\n      return { success: true, message: \"Tender status updated to in-progress\", isNew: false }\r\n    }\r\n\r\n    // Already exists and not draft, no need to update\r\n    return { success: true, message: \"Tender already in your list\", isNew: false }\r\n  }\r\n\r\n  // Insert new tender with in-progress status\r\n  const { data, error } = await supabase\r\n    .from(\"user_tenders\")\r\n    .insert({\r\n      user_id: user.id,\r\n      tender_id: scrapedTender.id,\r\n      title: scrapedTender.title,\r\n      organization: scrapedTender.source_name,\r\n      publish_date: scrapedTender.publish_date,\r\n      close_date: scrapedTender.close_date,\r\n      value: scrapedTender.estimated_value,\r\n      category: scrapedTender.category,\r\n      description: scrapedTender.description,\r\n      url: scrapedTender.tender_url,\r\n      status: \"in-progress\",\r\n      tender_type: \"scraped\",\r\n    })\r\n    .select()\r\n    .single()\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error saving tender:\", error)\r\n    return { success: false, error: \"Failed to save tender\" }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/tenders\")\r\n  return { success: true, message: \"Tender saved to My Tenders\", isNew: true, data }\r\n}\r\n\r\nexport async function createCustomTender(tenderData: {\r\n  title: string\r\n  organization: string\r\n  deadline: string\r\n  value: string\r\n  description: string\r\n  category?: string\r\n  location?: string\r\n  uploadedFile?: File\r\n  analysis?: any\r\n}) {\r\n  console.log(\"[v0] createCustomTender called with data:\", {\r\n    title: tenderData.title,\r\n    organization: tenderData.organization,\r\n    deadline: tenderData.deadline,\r\n    hasFile: !!tenderData.uploadedFile,\r\n    hasAnalysis: !!tenderData.analysis,\r\n  })\r\n\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n    error: userError,\r\n  } = await supabase.auth.getUser()\r\n\r\n  if (userError || !user) {\r\n    console.error(\"[v0] Auth error:\", userError)\r\n    return { success: false, error: \"Not authenticated\" }\r\n  }\r\n\r\n  console.log(\"[v0] User authenticated:\", user.id)\r\n\r\n  try {\r\n    console.log(\"[v0] Creating custom tender record...\")\r\n\r\n    const { data: customTender, error: customTenderError } = await supabase\r\n      .from(\"user_tenders\")\r\n      .insert({\r\n        user_id: user.id,\r\n        title: tenderData.title,\r\n        organization: tenderData.organization,\r\n        deadline: tenderData.deadline,\r\n        value: tenderData.value,\r\n        category: tenderData.category || \"Custom\",\r\n        description: tenderData.description,\r\n        location: tenderData.location,\r\n        status: \"in-progress\",\r\n        tender_type: \"custom\",\r\n      })\r\n      .select()\r\n      .single()\r\n\r\n    if (customTenderError) {\r\n      console.error(\"[v0] Error creating custom tender:\", customTenderError)\r\n      return { success: false, error: \"Failed to create tender: \" + customTenderError.message }\r\n    }\r\n\r\n    console.log(\"[v0] Custom tender created successfully:\", customTender.id)\r\n\r\n    let documentSaved = false\r\n    let documentError: string | null = null\r\n    let uploadData: any = null // Declare uploadData here to be accessible later\r\n\r\n    if (tenderData.uploadedFile) {\r\n      console.log(\"[v0] Processing existing document...\")\r\n\r\n      try {\r\n        const file = tenderData.uploadedFile\r\n        const fileName = `${user.id}/${customTender.id}/${file.name}`\r\n\r\n        const { data: uploaded, error: uploadError } = await supabase.storage\r\n          .from(\"tender-documents\")\r\n          .upload(fileName, file)\r\n        uploadData = uploaded // Assign to the outer scope variable\r\n\r\n        if (uploadError) {\r\n          console.error(\"[v0] Error uploading file to Supabase:\", uploadError)\r\n          documentError = \"Failed to upload file to permanent storage\"\r\n        } else {\r\n          const documentData = {\r\n            tender_id: customTender.id,\r\n            file_name: file.name,\r\n            file_type: file.type,\r\n            file_size: file.size,\r\n            storage_path: uploadData.path,\r\n            blob_url: uploadData.path,\r\n          }\r\n\r\n          const { data: insertedDoc, error: docError } = await supabase\r\n            .from(\"user_tender_documents\")\r\n            .insert(documentData)\r\n            .select()\r\n            .single()\r\n\r\n          if (docError) {\r\n            console.error(\"[v0] Error saving doc ref:\", docError)\r\n            documentError = \"Failed to save document reference\"\r\n          } else {\r\n            documentSaved = true\r\n          }\r\n        }\r\n      } catch (err: any) {\r\n        console.error(\"[v0] Upload error:\", err)\r\n        documentError = err.message\r\n      }\r\n    } else {\r\n      console.log(\"[v0] No file to upload\")\r\n    }\r\n\r\n    let analysisSaved = false\r\n    let analysisError: string | null = null\r\n    let orchestrationId: string | null = null\r\n\r\n    if (tenderData.analysis) {\r\n      console.log(\"[v0] Saving analysis data...\")\r\n\r\n      const analysisData = {\r\n        tender_id: customTender.id,\r\n        analysis_data: tenderData.analysis,\r\n      }\r\n\r\n      console.log(\"[v0] Inserting analysis with tender_id:\", customTender.id)\r\n\r\n      const { data: insertedAnalysis, error: analysisErr } = await supabase\r\n        .from(\"user_tender_analysis\") // Updated table name\r\n        .insert(analysisData)\r\n        .select()\r\n        .single()\r\n\r\n      if (analysisErr) {\r\n        console.error(\"[v0] Error saving analysis:\", analysisErr)\r\n        analysisError = analysisErr.message\r\n      } else {\r\n        console.log(\"[v0] Analysis saved successfully\")\r\n        analysisSaved = true\r\n\r\n        // Trigger multi-engine orchestration for deep analysis\r\n        console.log(\"[v0] Triggering multi-engine orchestration...\")\r\n        try {\r\n          // Get document URL if file was uploaded\r\n          let documentUrl: string | undefined\r\n          if (documentSaved) {\r\n            const { data: { publicUrl } } = supabase.storage\r\n              .from('tender-documents')\r\n              .getPublicUrl(uploadData?.path || '')\r\n            documentUrl = publicUrl\r\n          }\r\n\r\n          const orchestrationResult = await orchestrateTenderAnalysis(\r\n            customTender.id,\r\n            user.id,\r\n            documentUrl\r\n          )\r\n\r\n          orchestrationId = orchestrationResult.orchestrationId\r\n          console.log(`[v0] Orchestration started: ${orchestrationId}`)\r\n        } catch (orchError: any) {\r\n          console.error(\"[v0] Orchestration failed:\", orchError)\r\n          // Don't fail the entire operation if orchestration fails, just log it\r\n        }\r\n      }\r\n    } else {\r\n      console.log(\"[v0] No analysis data provided\")\r\n    }\r\n\r\n    // Return success with tender ID and orchestration ID\r\n    console.log(\"[v0] Returning success for tender:\", customTender.id)\r\n\r\n    revalidatePath(\"/dashboard/tenders\")\r\n    revalidatePath(\"/dashboard/custom-tenders\")\r\n\r\n    return {\r\n      success: true,\r\n      tenderId: customTender.id,\r\n      orchestrationId,\r\n      documentSaved,\r\n      documentError,\r\n      analysisSaved,\r\n      analysisError,\r\n    }\r\n  } catch (error) {\r\n    console.error(\"[v0] Error in createCustomTender:\", error)\r\n    return { success: false, error: \"Failed to create tender: \" + (error as Error).message }\r\n  }\r\n}\r\n\r\nexport async function getDashboardStats() {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  try {\r\n    // Get all tenders count for this user\r\n    const { count: totalTenders } = await supabase\r\n      .from(\"user_tenders\")\r\n      .select(\"*\", { count: \"exact\", head: true })\r\n      .eq(\"user_id\", user.id)\r\n\r\n    // Get analyzed tenders count (where we have analysis data)\r\n    // RLS ensures we only see our own analyses\r\n    const { count: analyzedCount } = await supabase\r\n      .from(\"user_tender_analysis\")\r\n      .select(\"tender_id\", { count: \"exact\", head: true })\r\n    // Wait, user_tender_analysis doesn't have user_id in my migration?\r\n    // Let's check migration script...\r\n    // user_custom_tender_analysis didn't have user_id in the original schema I saw in 031?\r\n    // L131: WHERE id = tender_id AND user_id = auth.uid() -> checking parent tender.\r\n    // So user_tender_analysis table assumes linking to user_tenders.\r\n    // query:\r\n    // select count(*) from user_tender_analysis join user_tenders on ... where user_tenders.user_id = ...\r\n\r\n    // Alternative: Just query user_tenders where tender_type='custom' (proxy for analyzed?)\r\n    // Or just fetching recent activity from unified table.\r\n\r\n    // Get recent activity (last 5 tenders)\r\n    const { data: recentTenders } = await supabase\r\n      .from(\"user_tenders\")\r\n      .select(\"*\")\r\n      .eq(\"user_id\", user.id)\r\n      .order(\"created_at\", { ascending: false })\r\n      .limit(5)\r\n\r\n    const recentActivity = (recentTenders || []).map((tender) => ({\r\n      id: tender.id,\r\n      title: tender.title,\r\n      organization: tender.organization,\r\n      type: tender.tender_type === \"custom\" ? (\"analyzed\" as const) : (\"saved\" as const),\r\n      created_at: tender.created_at,\r\n    }))\r\n\r\n    // Get tenders closing soon (next 7 days)\r\n    const sevenDaysFromNow = new Date()\r\n    sevenDaysFromNow.setDate(sevenDaysFromNow.getDate() + 7)\r\n\r\n    // Check both close_date (scraped) and deadline (custom, if parsed?)\r\n    // For now, relying on close_date. My migration copied deadline to close_date if I recall?\r\n    // No, I copied close_date to close_date. Custom tenders might rely on 'deadline' text column.\r\n    // This is tricky for sorting. Ideally we parse deadline to close_date.\r\n    // Assuming close_date is populated for meaningful deadlines.\r\n\r\n    const { data: closingSoon } = await supabase\r\n      .from(\"user_tenders\")\r\n      .select(\"*\")\r\n      .eq(\"user_id\", user.id)\r\n      .not(\"close_date\", \"is\", null)\r\n      .gte(\"close_date\", new Date().toISOString())\r\n      .lte(\"close_date\", sevenDaysFromNow.toISOString())\r\n      .order(\"close_date\", { ascending: true })\r\n      .limit(5)\r\n\r\n    return {\r\n      success: true,\r\n      stats: {\r\n        totalTenders: totalTenders || 0,\r\n        analyzedTenders: analyzedCount || 0, // This might be inaccurate without join, but acceptable for now or I can do a join query if needed.\r\n        // Actually, let's try to get substantial analyzed count if possible.\r\n        // For now 0 is fine or just count custom tenders?\r\n        closingSoon: closingSoon?.length || 0,\r\n        recentActivity,\r\n        upcomingDeadlines: closingSoon || [],\r\n      },\r\n    }\r\n  } catch (error) {\r\n    console.error(\"[v0] Error fetching dashboard stats:\", error)\r\n    return { success: false, error: \"Failed to fetch dashboard statistics\" }\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;IAsUsB,qBAAA,WAAA,GAAA,IAAA,wVAAA,EAAA,8CAAA,6UAAA,EAAA,KAAA,GAAA,mVAAA,EAAA"}},
    {"offset": {"line": 279, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/app/actions/document-actions.ts"],"sourcesContent":["\"use server\"\r\n\r\nimport { createClient } from \"@/lib/supabase/server\"\r\nimport { revalidatePath } from \"next/cache\"\r\n\r\nexport async function uploadTenderDocument(formData: FormData) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const file = formData.get(\"file\") as File\r\n  const userTenderId = formData.get(\"userTenderId\") as string\r\n\r\n  if (!file || !userTenderId) {\r\n    return { success: false, error: \"File and tender ID are required\" }\r\n  }\r\n\r\n  // Upload file to Supabase Storage\r\n  const fileExt = file.name.split(\".\").pop()\r\n  const fileName = `${user.id}/${userTenderId}/${Date.now()}.${fileExt}`\r\n\r\n  const { data: uploadData, error: uploadError } = await supabase.storage\r\n    .from(\"tender-documents\")\r\n    .upload(fileName, file)\r\n\r\n  if (uploadError) {\r\n    console.error(\"[v0] Error uploading file:\", uploadError)\r\n    return { success: false, error: \"Failed to upload file\" }\r\n  }\r\n\r\n  // Save document metadata to database\r\n  const { data, error } = await supabase\r\n    .from(\"tender_documents\")\r\n    .insert({\r\n      user_tender_id: userTenderId,\r\n      user_id: user.id,\r\n      file_name: file.name,\r\n      file_size: file.size,\r\n      file_type: file.type,\r\n      storage_path: uploadData.path,\r\n    })\r\n    .select()\r\n    .single()\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error saving document metadata:\", error)\r\n    // Clean up uploaded file\r\n    await supabase.storage.from(\"tender-documents\").remove([fileName])\r\n    return { success: false, error: \"Failed to save document\" }\r\n  }\r\n\r\n  revalidatePath(`/dashboard/tenders/${userTenderId}`)\r\n  return { success: true, data }\r\n}\r\n\r\nexport async function getTenderDocuments(userTenderId: string) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\", documents: [] }\r\n\r\n  const { data, error } = await supabase\r\n    .from(\"tender_documents\")\r\n    .select(\"*\")\r\n    .eq(\"user_tender_id\", userTenderId)\r\n    .eq(\"user_id\", user.id)\r\n    .order(\"created_at\", { ascending: false })\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error fetching documents:\", error)\r\n    return { success: false, error: \"Failed to fetch documents\", documents: [] }\r\n  }\r\n\r\n  return { success: true, documents: data || [] }\r\n}\r\n\r\nexport async function downloadTenderDocument(documentId: string) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  // Get document metadata\r\n  const { data: document, error: docError } = await supabase\r\n    .from(\"tender_documents\")\r\n    .select(\"*\")\r\n    .eq(\"id\", documentId)\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  if (docError || !document) {\r\n    console.error(\"[v0] Error fetching document:\", docError)\r\n    return { success: false, error: \"Document not found\" }\r\n  }\r\n\r\n  const isExternalUrl = document.storage_path.startsWith(\"http://\") || document.storage_path.startsWith(\"https://\")\r\n\r\n  if (isExternalUrl) {\r\n    // For external documents (from eTenders API), return the URL directly\r\n    console.log(\"[v0] Returning external document URL:\", document.storage_path)\r\n    return { success: true, url: document.storage_path, fileName: document.file_name }\r\n  }\r\n\r\n  // For documents stored in Supabase Storage, create a signed URL\r\n  const { data: urlData, error: urlError } = await supabase.storage\r\n    .from(\"tender-documents\")\r\n    .createSignedUrl(document.storage_path, 60) // 60 seconds expiry\r\n\r\n  if (urlError) {\r\n    console.error(\"[v0] Error creating signed URL:\", urlError)\r\n    return { success: false, error: \"Failed to generate download link\" }\r\n  }\r\n\r\n  return { success: true, url: urlData.signedUrl, fileName: document.file_name }\r\n}\r\n\r\nexport async function deleteTenderDocument(documentId: string) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  // Get document to delete from storage\r\n  const { data: document, error: docError } = await supabase\r\n    .from(\"tender_documents\")\r\n    .select(\"*\")\r\n    .eq(\"id\", documentId)\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  if (docError || !document) {\r\n    return { success: false, error: \"Document not found\" }\r\n  }\r\n\r\n  // Delete from storage\r\n  const { error: storageError } = await supabase.storage.from(\"tender-documents\").remove([document.storage_path])\r\n\r\n  if (storageError) {\r\n    console.error(\"[v0] Error deleting from storage:\", storageError)\r\n  }\r\n\r\n  // Delete from database\r\n  const { error } = await supabase.from(\"tender_documents\").delete().eq(\"id\", documentId).eq(\"user_id\", user.id)\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error deleting document:\", error)\r\n    return { success: false, error: \"Failed to delete document\" }\r\n  }\r\n\r\n  revalidatePath(`/dashboard/tenders/${document.user_tender_id}`)\r\n  return { success: true }\r\n}\r\n\r\nexport async function analyzeDocument(documentId: string, analysis: any) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  try {\r\n    console.log(\"[v0] Saving analysis for document:\", documentId)\r\n\r\n    // Save analysis to database\r\n    const { error } = await supabase\r\n      .from(\"tender_documents\")\r\n      .update({ ai_analysis: analysis })\r\n      .eq(\"id\", documentId)\r\n      .eq(\"user_id\", user.id)\r\n\r\n    if (error) {\r\n      console.error(\"[v0] Error saving analysis:\", error)\r\n      return { success: false, error: \"Failed to save analysis\" }\r\n    }\r\n\r\n    console.log(\"[v0] Analysis saved successfully\")\r\n    revalidatePath(`/dashboard/tenders`)\r\n    return { success: true, analysis }\r\n  } catch (error) {\r\n    console.error(\"[v0] Error in analyzeDocument:\", error)\r\n    return { success: false, error: \"Failed to save analysis\" }\r\n  }\r\n}\r\nexport async function uploadTemporaryDocument(formData: FormData) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const file = formData.get(\"file\") as File\r\n  if (!file) {\r\n    return { success: false, error: \"File is required\" }\r\n  }\r\n\r\n  // Upload file to Supabase Storage (temp folder)\r\n  const fileExt = file.name.split(\".\").pop()\r\n  const fileName = `temp/${user.id}/${Date.now()}.${fileExt}`\r\n\r\n  const { data: uploadData, error: uploadError } = await supabase.storage\r\n    .from(\"tender-documents\")\r\n    .upload(fileName, file)\r\n\r\n  if (uploadError) {\r\n    console.error(\"[v0] Error uploading file:\", uploadError)\r\n    return { success: false, error: \"Failed to upload file\" }\r\n  }\r\n\r\n  // Get signed URL for the analysis step (valid for 1 hour)\r\n  const { data: urlData, error: urlError } = await supabase.storage\r\n    .from(\"tender-documents\")\r\n    .createSignedUrl(fileName, 3600)\r\n\r\n  if (urlError) {\r\n    console.error(\"[v0] Error getting signed URL:\", urlError)\r\n    return { success: false, error: \"Failed to get file URL\" }\r\n  }\r\n\r\n  return { success: true, url: urlData.signedUrl, path: fileName }\r\n}\r\n"],"names":[],"mappings":";;;;;;;IAiMsB,0BAAA,WAAA,GAAA,IAAA,wVAAA,EAAA,8CAAA,6UAAA,EAAA,KAAA,GAAA,mVAAA,EAAA"}},
    {"offset": {"line": 294, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/hooks/use-toast.ts"],"sourcesContent":["'use client'\r\n\r\n// Inspired by react-hot-toast library\r\nimport * as React from 'react'\r\n\r\nimport type { ToastActionElement, ToastProps } from '@/components/ui/toast'\r\n\r\nconst TOAST_LIMIT = 1\r\nconst TOAST_REMOVE_DELAY = 1000000\r\n\r\ntype ToasterToast = ToastProps & {\r\n  id: string\r\n  title?: React.ReactNode\r\n  description?: React.ReactNode\r\n  action?: ToastActionElement\r\n}\r\n\r\nconst actionTypes = {\r\n  ADD_TOAST: 'ADD_TOAST',\r\n  UPDATE_TOAST: 'UPDATE_TOAST',\r\n  DISMISS_TOAST: 'DISMISS_TOAST',\r\n  REMOVE_TOAST: 'REMOVE_TOAST',\r\n} as const\r\n\r\nlet count = 0\r\n\r\nfunction genId() {\r\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\r\n  return count.toString()\r\n}\r\n\r\ntype ActionType = typeof actionTypes\r\n\r\ntype Action =\r\n  | {\r\n      type: ActionType['ADD_TOAST']\r\n      toast: ToasterToast\r\n    }\r\n  | {\r\n      type: ActionType['UPDATE_TOAST']\r\n      toast: Partial<ToasterToast>\r\n    }\r\n  | {\r\n      type: ActionType['DISMISS_TOAST']\r\n      toastId?: ToasterToast['id']\r\n    }\r\n  | {\r\n      type: ActionType['REMOVE_TOAST']\r\n      toastId?: ToasterToast['id']\r\n    }\r\n\r\ninterface State {\r\n  toasts: ToasterToast[]\r\n}\r\n\r\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\r\n\r\nconst addToRemoveQueue = (toastId: string) => {\r\n  if (toastTimeouts.has(toastId)) {\r\n    return\r\n  }\r\n\r\n  const timeout = setTimeout(() => {\r\n    toastTimeouts.delete(toastId)\r\n    dispatch({\r\n      type: 'REMOVE_TOAST',\r\n      toastId: toastId,\r\n    })\r\n  }, TOAST_REMOVE_DELAY)\r\n\r\n  toastTimeouts.set(toastId, timeout)\r\n}\r\n\r\nexport const reducer = (state: State, action: Action): State => {\r\n  switch (action.type) {\r\n    case 'ADD_TOAST':\r\n      return {\r\n        ...state,\r\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\r\n      }\r\n\r\n    case 'UPDATE_TOAST':\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.map((t) =>\r\n          t.id === action.toast.id ? { ...t, ...action.toast } : t,\r\n        ),\r\n      }\r\n\r\n    case 'DISMISS_TOAST': {\r\n      const { toastId } = action\r\n\r\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\r\n      // but I'll keep it here for simplicity\r\n      if (toastId) {\r\n        addToRemoveQueue(toastId)\r\n      } else {\r\n        state.toasts.forEach((toast) => {\r\n          addToRemoveQueue(toast.id)\r\n        })\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.map((t) =>\r\n          t.id === toastId || toastId === undefined\r\n            ? {\r\n                ...t,\r\n                open: false,\r\n              }\r\n            : t,\r\n        ),\r\n      }\r\n    }\r\n    case 'REMOVE_TOAST':\r\n      if (action.toastId === undefined) {\r\n        return {\r\n          ...state,\r\n          toasts: [],\r\n        }\r\n      }\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\r\n      }\r\n  }\r\n}\r\n\r\nconst listeners: Array<(state: State) => void> = []\r\n\r\nlet memoryState: State = { toasts: [] }\r\n\r\nfunction dispatch(action: Action) {\r\n  memoryState = reducer(memoryState, action)\r\n  listeners.forEach((listener) => {\r\n    listener(memoryState)\r\n  })\r\n}\r\n\r\ntype Toast = Omit<ToasterToast, 'id'>\r\n\r\nfunction toast({ ...props }: Toast) {\r\n  const id = genId()\r\n\r\n  const update = (props: ToasterToast) =>\r\n    dispatch({\r\n      type: 'UPDATE_TOAST',\r\n      toast: { ...props, id },\r\n    })\r\n  const dismiss = () => dispatch({ type: 'DISMISS_TOAST', toastId: id })\r\n\r\n  dispatch({\r\n    type: 'ADD_TOAST',\r\n    toast: {\r\n      ...props,\r\n      id,\r\n      open: true,\r\n      onOpenChange: (open) => {\r\n        if (!open) dismiss()\r\n      },\r\n    },\r\n  })\r\n\r\n  return {\r\n    id: id,\r\n    dismiss,\r\n    update,\r\n  }\r\n}\r\n\r\nfunction useToast() {\r\n  const [state, setState] = React.useState<State>(memoryState)\r\n\r\n  React.useEffect(() => {\r\n    listeners.push(setState)\r\n    return () => {\r\n      const index = listeners.indexOf(setState)\r\n      if (index > -1) {\r\n        listeners.splice(index, 1)\r\n      }\r\n    }\r\n  }, [state])\r\n\r\n  return {\r\n    ...state,\r\n    toast,\r\n    dismiss: (toastId?: string) => dispatch({ type: 'DISMISS_TOAST', toastId }),\r\n  }\r\n}\r\n\r\nexport { useToast, toast }\r\n"],"names":[],"mappings":";;;;;;;;AAEA,sCAAsC;AACtC;;AAHA;;AAOA,MAAM,cAAc;AACpB,MAAM,qBAAqB;AAS3B,MAAM,cAAc;IAClB,WAAW;IACX,cAAc;IACd,eAAe;IACf,cAAc;AAChB;AAEA,IAAI,QAAQ;AAEZ,SAAS;IACP,QAAQ,CAAC,QAAQ,CAAC,IAAI,OAAO,gBAAgB;IAC7C,OAAO,MAAM,QAAQ;AACvB;AA0BA,MAAM,gBAAgB,IAAI;AAE1B,MAAM,mBAAmB,CAAC;IACxB,IAAI,cAAc,GAAG,CAAC,UAAU;QAC9B;IACF;IAEA,MAAM,UAAU,WAAW;QACzB,cAAc,MAAM,CAAC;QACrB,SAAS;YACP,MAAM;YACN,SAAS;QACX;IACF,GAAG;IAEH,cAAc,GAAG,CAAC,SAAS;AAC7B;AAEO,MAAM,UAAU,CAAC,OAAc;IACpC,OAAQ,OAAO,IAAI;QACjB,KAAK;YACH,OAAO;gBACL,GAAG,KAAK;gBACR,QAAQ;oBAAC,OAAO,KAAK;uBAAK,MAAM,MAAM;iBAAC,CAAC,KAAK,CAAC,GAAG;YACnD;QAEF,KAAK;YACH,OAAO;gBACL,GAAG,KAAK;gBACR,QAAQ,MAAM,MAAM,CAAC,GAAG,CAAC,CAAC,IACxB,EAAE,EAAE,KAAK,OAAO,KAAK,CAAC,EAAE,GAAG;wBAAE,GAAG,CAAC;wBAAE,GAAG,OAAO,KAAK;oBAAC,IAAI;YAE3D;QAEF,KAAK;YAAiB;gBACpB,MAAM,EAAE,OAAO,EAAE,GAAG;gBAEpB,2EAA2E;gBAC3E,uCAAuC;gBACvC,IAAI,SAAS;oBACX,iBAAiB;gBACnB,OAAO;oBACL,MAAM,MAAM,CAAC,OAAO,CAAC,CAAC;wBACpB,iBAAiB,MAAM,EAAE;oBAC3B;gBACF;gBAEA,OAAO;oBACL,GAAG,KAAK;oBACR,QAAQ,MAAM,MAAM,CAAC,GAAG,CAAC,CAAC,IACxB,EAAE,EAAE,KAAK,WAAW,YAAY,YAC5B;4BACE,GAAG,CAAC;4BACJ,MAAM;wBACR,IACA;gBAER;YACF;QACA,KAAK;YACH,IAAI,OAAO,OAAO,KAAK,WAAW;gBAChC,OAAO;oBACL,GAAG,KAAK;oBACR,QAAQ,EAAE;gBACZ;YACF;YACA,OAAO;gBACL,GAAG,KAAK;gBACR,QAAQ,MAAM,MAAM,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,OAAO,OAAO;YAC5D;IACJ;AACF;AAEA,MAAM,YAA2C,EAAE;AAEnD,IAAI,cAAqB;IAAE,QAAQ,EAAE;AAAC;AAEtC,SAAS,SAAS,MAAc;IAC9B,cAAc,QAAQ,aAAa;IACnC,UAAU,OAAO,CAAC,CAAC;QACjB,SAAS;IACX;AACF;AAIA,SAAS,MAAM,EAAE,GAAG,OAAc;IAChC,MAAM,KAAK;IAEX,MAAM,SAAS,CAAC,QACd,SAAS;YACP,MAAM;YACN,OAAO;gBAAE,GAAG,KAAK;gBAAE;YAAG;QACxB;IACF,MAAM,UAAU,IAAM,SAAS;YAAE,MAAM;YAAiB,SAAS;QAAG;IAEpE,SAAS;QACP,MAAM;QACN,OAAO;YACL,GAAG,KAAK;YACR;YACA,MAAM;YACN,cAAc,CAAC;gBACb,IAAI,CAAC,MAAM;YACb;QACF;IACF;IAEA,OAAO;QACL,IAAI;QACJ;QACA;IACF;AACF;AAEA,SAAS;;IACP,MAAM,CAAC,OAAO,SAAS,GAAG,+QAAc,CAAQ;IAEhD,gRAAe;8BAAC;YACd,UAAU,IAAI,CAAC;YACf;sCAAO;oBACL,MAAM,QAAQ,UAAU,OAAO,CAAC;oBAChC,IAAI,QAAQ,CAAC,GAAG;wBACd,UAAU,MAAM,CAAC,OAAO;oBAC1B;gBACF;;QACF;6BAAG;QAAC;KAAM;IAEV,OAAO;QACL,GAAG,KAAK;QACR;QACA,SAAS,CAAC,UAAqB,SAAS;gBAAE,MAAM;gBAAiB;YAAQ;IAC3E;AACF;GAlBS"}},
    {"offset": {"line": 461, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/components/ui/progress.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport * as ProgressPrimitive from '@radix-ui/react-progress'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Progress({\r\n  className,\r\n  value,\r\n  ...props\r\n}: React.ComponentProps<typeof ProgressPrimitive.Root>) {\r\n  return (\r\n    <ProgressPrimitive.Root\r\n      data-slot=\"progress\"\r\n      className={cn(\r\n        'bg-primary/20 relative h-2 w-full overflow-hidden rounded-full',\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      <ProgressPrimitive.Indicator\r\n        data-slot=\"progress-indicator\"\r\n        className=\"bg-primary h-full w-full flex-1 transition-all\"\r\n        style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\r\n      />\r\n    </ProgressPrimitive.Root>\r\n  )\r\n}\r\n\r\nexport { Progress }\r\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,SAAS,EAChB,SAAS,EACT,KAAK,EACL,GAAG,OACiD;IACpD,qBACE,mSAAC,yRAAsB;QACrB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kEACA;QAED,GAAG,KAAK;kBAET,cAAA,mSAAC,8RAA2B;YAC1B,aAAU;YACV,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIlE;KArBS"}},
    {"offset": {"line": 505, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/components/engines/multi-engine-progress.tsx"],"sourcesContent":["/**\r\n * Multi-Engine Progress Tracker Component\r\n * \r\n * Displays real-time progress of tender orchestration across multiple AI engines.\r\n * Polls the progress API and shows status for each engine.\r\n */\r\n\r\n'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Progress } from '@/components/ui/progress'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport {\r\n    FileText,\r\n    CheckCircle,\r\n    DollarSign,\r\n    Target,\r\n    Shield,\r\n    AlertTriangle,\r\n    Clock,\r\n    Loader2,\r\n    XCircle\r\n} from 'lucide-react'\r\n\r\ninterface EngineProgress {\r\n    status: 'queued' | 'processing' | 'completed' | 'failed'\r\n    progress: number\r\n    duration?: number\r\n}\r\n\r\ninterface OrchestrationProgress {\r\n    orchestrationId: string\r\n    tenderId: string\r\n    status: 'processing' | 'completed' | 'partial_failure' | 'failed'\r\n    overallProgress: number\r\n    engines: {\r\n        document?: EngineProgress\r\n        tender_analysis?: EngineProgress\r\n        boq?: EngineProgress\r\n        strategy?: EngineProgress\r\n        readiness?: EngineProgress\r\n        risk?: EngineProgress\r\n        compliance?: EngineProgress\r\n    }\r\n    phase1Completed: boolean\r\n    phase2Completed: boolean\r\n    estimatedCompletion?: string\r\n}\r\n\r\nconst ENGINE_CONFIGS = {\r\n    document: {\r\n        name: 'Document Analysis',\r\n        icon: FileText,\r\n        description: 'Extracting text and form fields',\r\n        phase: 1\r\n    },\r\n    tender_analysis: {\r\n        name: 'Tender Requirements',\r\n        icon: CheckCircle,\r\n        description: 'Analyzing requirements and criteria',\r\n        phase: 1\r\n    },\r\n    boq: {\r\n        name: 'BOQ Generation',\r\n        icon: DollarSign,\r\n        description: 'Creating bill of quantities',\r\n        phase: 2\r\n    },\r\n    strategy: {\r\n        name: 'Strategy Development',\r\n        icon: Target,\r\n        description: 'Generating bid strategy',\r\n        phase: 2\r\n    },\r\n    readiness: {\r\n        name: 'Readiness Assessment',\r\n        icon: Shield,\r\n        description: 'Evaluating bid readiness',\r\n        phase: 2\r\n    },\r\n    risk: {\r\n        name: 'Risk Assessment',\r\n        icon: AlertTriangle,\r\n        description: 'Identifying potential risks',\r\n        phase: 2\r\n    },\r\n    compliance: {\r\n        name: 'Compliance Check',\r\n        icon: CheckCircle,\r\n        description: 'Validating compliance requirements',\r\n        phase: 2\r\n    }\r\n}\r\n\r\ninterface MultiEngineProgressProps {\r\n    orchestrationId: string\r\n    onComplete?: () => void\r\n    pollInterval?: number // milliseconds\r\n}\r\n\r\nexport function MultiEngineProgress({\r\n    orchestrationId,\r\n    onComplete,\r\n    pollInterval = 2000\r\n}: MultiEngineProgressProps) {\r\n    const [progress, setProgress] = useState<OrchestrationProgress | null>(null)\r\n    const [error, setError] = useState<string | null>(null)\r\n    const [isPolling, setIsPolling] = useState(true)\r\n\r\n    useEffect(() => {\r\n        if (!orchestrationId || !isPolling) return\r\n\r\n        let intervalId: NodeJS.Timeout\r\n\r\n        const fetchProgress = async () => {\r\n            try {\r\n                const res = await fetch(`/api/orchestration/${orchestrationId}/progress`)\r\n\r\n                if (!res.ok) {\r\n                    throw new Error('Failed to fetch progress')\r\n                }\r\n\r\n                const data = await res.json()\r\n                setProgress(data)\r\n                setError(null)\r\n\r\n                // Stop polling if orchestration is complete or failed\r\n                if (data.status === 'completed' || data.status === 'failed') {\r\n                    setIsPolling(false)\r\n                    onComplete?.()\r\n                }\r\n            } catch (err: any) {\r\n                console.error('Progress fetch error:', err)\r\n                setError(err.message)\r\n            }\r\n        }\r\n\r\n        // Initial fetch\r\n        fetchProgress()\r\n\r\n        // Start polling\r\n        intervalId = setInterval(fetchProgress, pollInterval)\r\n\r\n        return () => {\r\n            if (intervalId) clearInterval(intervalId)\r\n        }\r\n    }, [orchestrationId, isPolling, pollInterval, onComplete])\r\n\r\n    if (error) {\r\n        return (\r\n            <Card className=\"border-destructive\">\r\n                <CardHeader>\r\n                    <CardTitle className=\"flex items-center gap-2 text-destructive\">\r\n                        <XCircle className=\"h-5 w-5\" />\r\n                        Error Tracking Progress\r\n                    </CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <p className=\"text-sm text-muted-foreground\">{error}</p>\r\n                </CardContent>\r\n            </Card>\r\n        )\r\n    }\r\n\r\n    if (!progress) {\r\n        return (\r\n            <Card>\r\n                <CardContent className=\"py-8\">\r\n                    <div className=\"flex items-center justify-center gap-2\">\r\n                        <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                        <p className=\"text-sm text-muted-foreground\">Loading progress...</p>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n        )\r\n    }\r\n\r\n    const getStatusColor = (status: string) => {\r\n        switch (status) {\r\n            case 'completed': return 'text-green-600'\r\n            case 'processing': return 'text-blue-600'\r\n            case 'failed': return 'text-destructive'\r\n            case 'partial_failure': return 'text-orange-600'\r\n            default: return 'text-muted-foreground'\r\n        }\r\n    }\r\n\r\n    const getStatusBadge = (status: string) => {\r\n        switch (status) {\r\n            case 'completed': return <Badge className=\"bg-green-600\">Complete</Badge>\r\n            case 'processing': return <Badge className=\"bg-blue-600\">Processing...</Badge>\r\n            case 'failed': return <Badge variant=\"destructive\">Failed</Badge>\r\n            case 'partial_failure': return <Badge className=\"bg-orange-600\">Partial Success</Badge>\r\n            default: return <Badge variant=\"outline\">Unknown</Badge>\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Card>\r\n            <CardHeader>\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                        <CardTitle>AI Analysis Progress</CardTitle>\r\n                        <CardDescription>\r\n                            {progress.phase1Completed\r\n                                ? 'Phase 1 complete - Deep analysis in progress'\r\n                                : 'Analyzing tender document...'}\r\n                        </CardDescription>\r\n                    </div>\r\n                    {getStatusBadge(progress.status)}\r\n                </div>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-6\">\r\n                {/* Overall Progress */}\r\n                <div>\r\n                    <div className=\"flex items-center justify-between mb-2\">\r\n                        <span className=\"text-sm font-medium\">Overall Progress</span>\r\n                        <span className=\"text-sm text-muted-foreground\">{progress.overallProgress}%</span>\r\n                    </div>\r\n                    <Progress value={progress.overallProgress} className=\"h-2\" />\r\n                    {progress.estimatedCompletion && progress.status === 'processing' && (\r\n                        <p className=\"text-xs text-muted-foreground mt-2 flex items-center gap-1\">\r\n                            <Clock className=\"h-3 w-3\" />\r\n                            Estimated completion: {new Date(progress.estimatedCompletion).toLocaleTimeString()}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Phase 1 Engines */}\r\n                <div>\r\n                    <h4 className=\"text-sm font-semibold mb-3 flex items-center gap-2\">\r\n                        Phase 1: Critical Analysis\r\n                        {progress.phase1Completed && <CheckCircle className=\"h-4 w-4 text-green-600\" />}\r\n                    </h4>\r\n                    <div className=\"space-y-3\">\r\n                        {Object.entries(ENGINE_CONFIGS)\r\n                            .filter(([_, config]) => config.phase === 1)\r\n                            .map(([key, config]) => {\r\n                                const engineProgress = progress.engines[key as keyof typeof progress.engines]\r\n                                if (!engineProgress) return null\r\n\r\n                                return (\r\n                                    <EngineStatusItem\r\n                                        key={key}\r\n                                        name={config.name}\r\n                                        description={config.description}\r\n                                        icon={config.icon}\r\n                                        progress={engineProgress}\r\n                                    />\r\n                                )\r\n                            })}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Phase 2 Engines */}\r\n                {progress.phase1Completed && (\r\n                    <div>\r\n                        <h4 className=\"text-sm font-semibold mb-3 flex items-center gap-2\">\r\n                            Phase 2: Deep Analysis\r\n                            {progress.phase2Completed && <CheckCircle className=\"h-4 w-4 text-green-600\" />}\r\n                        </h4>\r\n                        <div className=\"space-y-3\">\r\n                            {Object.entries(ENGINE_CONFIGS)\r\n                                .filter(([_, config]) => config.phase === 2)\r\n                                .map(([key, config]) => {\r\n                                    const engineProgress = progress.engines[key as keyof typeof progress.engines]\r\n                                    if (!engineProgress) return null\r\n\r\n                                    return (\r\n                                        <EngineStatusItem\r\n                                            key={key}\r\n                                            name={config.name}\r\n                                            description={config.description}\r\n                                            icon={config.icon}\r\n                                            progress={engineProgress}\r\n                                        />\r\n                                    )\r\n                                })}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </CardContent>\r\n        </Card>\r\n    )\r\n}\r\n\r\ninterface EngineStatusItemProps {\r\n    name: string\r\n    description: string\r\n    icon: React.ComponentType<{ className?: string }>\r\n    progress: EngineProgress\r\n}\r\n\r\nfunction EngineStatusItem({ name, description, icon: Icon, progress }: EngineStatusItemProps) {\r\n    const getStatusIcon = () => {\r\n        switch (progress.status) {\r\n            case 'completed':\r\n                return <CheckCircle className=\"h-5 w-5 text-green-600\" />\r\n            case 'processing':\r\n                return <Loader2 className=\"h-5 w-5 text-blue-600 animate-spin\" />\r\n            case 'failed':\r\n                return <XCircle className=\"h-5 w-5 text-destructive\" />\r\n            default:\r\n                return <Clock className=\"h-5 w-5 text-muted-foreground\" />\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex items-start gap-3\">\r\n            <div className=\"mt-0.5\">\r\n                {getStatusIcon()}\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n                <div className=\"flex items-center justify-between gap-2\">\r\n                    <div className=\"flex items-center gap-2 min-w-0\">\r\n                        <Icon className=\"h-4 w-4 flex-shrink-0 text-muted-foreground\" />\r\n                        <p className=\"text-sm font-medium truncate\">{name}</p>\r\n                    </div>\r\n                    {progress.duration && (\r\n                        <span className=\"text-xs text-muted-foreground whitespace-nowrap\">\r\n                            {progress.duration.toFixed(1)}s\r\n                        </span>\r\n                    )}\r\n                </div>\r\n                <p className=\"text-xs text-muted-foreground mt-0.5\">{description}</p>\r\n                {progress.status === 'processing' && (\r\n                    <Progress value={progress.progress} className=\"h-1 mt-2\" />\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1123, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/app/dashboard/tenders/new/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type React from \"react\"\r\n\r\nimport { useState } from \"react\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Label } from \"@/components/ui/label\"\r\nimport { ArrowLeft, Upload, FileText, CheckCircle2, Loader2 } from \"lucide-react\"\r\nimport Link from \"next/link\"\r\nimport { Alert, AlertDescription } from \"@/components/ui/alert\"\r\nimport { createCustomTender } from \"@/app/actions/tender-actions\"\r\nimport { uploadTemporaryDocument } from \"@/app/actions/document-actions\"\r\nimport { useToast } from \"@/hooks/use-toast\"\r\nimport { MultiEngineProgress } from \"@/components/engines/multi-engine-progress\"\r\n\r\nexport default function NewTenderPage() {\r\n  const router = useRouter()\r\n  const { toast } = useToast()\r\n  const [loading, setLoading] = useState(false)\r\n  const [uploadedFile, setUploadedFile] = useState<File | null>(null)\r\n  const [blobUrl, setBlobUrl] = useState<string | null>(null)\r\n  const [analysis, setAnalysis] = useState<any>(null)\r\n  const [orchestrationId, setOrchestrationId] = useState<string | null>(null)\r\n  const [tenderId, setTenderId] = useState<string | null>(null)\r\n\r\n  const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0]\r\n    if (!file) return\r\n\r\n    if (file.type !== \"application/pdf\") {\r\n      toast({\r\n        title: \"Invalid File Type\",\r\n        description: \"Please upload a PDF file\",\r\n        variant: \"destructive\",\r\n      })\r\n      return\r\n    }\r\n\r\n    setUploadedFile(file)\r\n    setLoading(true)\r\n\r\n    try {\r\n      console.log(\"[v0] ================================================\")\r\n      console.log(\"[v0] STARTING CUSTOM TENDER UPLOAD PROCESS\")\r\n      console.log(\"[v0] ================================================\")\r\n      console.log(\"[v0] File name:\", file.name)\r\n      console.log(\"[v0] File size:\", (file.size / 1024 / 1024).toFixed(2), \"MB\")\r\n\r\n      console.log(\"[v0] Step 1: Uploading PDF to Supabase storage...\")\r\n      const uploadFormData = new FormData()\r\n      uploadFormData.append(\"file\", file)\r\n\r\n      // Use the existing action or a new one? \r\n      // I'll assume I'm creating 'uploadTemporaryDocument' in document-actions.ts correctly next.\r\n      // But verify I can import it.\r\n      // For now, I'll keep the logic here but call a new API route /api/tenders/upload-temp to be safe/consistent with fetch?\r\n      // No, server actions are better.\r\n      // Let's import { uploadTemporaryDocument } from \"@/app/actions/document-actions\"\r\n\r\n      const uploadResult = await uploadTemporaryDocument(uploadFormData)\r\n\r\n      if (!uploadResult.success || !uploadResult.url) {\r\n        throw new Error(uploadResult.error || \"Failed to upload file\")\r\n      }\r\n\r\n      console.log(\"[v0]  File uploaded successfully\")\r\n      console.log(\"[v0] URL:\", uploadResult.url)\r\n      setBlobUrl(uploadResult.url)\r\n      const url = uploadResult.url // local var for next steps\r\n\r\n      toast({\r\n        title: \"Analyzing Document\",\r\n        description: \"AI is reading and analyzing your tender document...\",\r\n      })\r\n\r\n      console.log(\"[v0] Step 2: Sending PDF to AI for direct analysis...\")\r\n      console.log(\"[v0] Requesting analysis via API...\")\r\n\r\n      const analysisResponse = await fetch(\"/api/analyze-tender\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          documentUrl: url,\r\n          documentText: \"\", // Let the API handle PDF reading\r\n        }),\r\n      })\r\n\r\n      console.log(\"[v0] Analyze API response status:\", analysisResponse.status)\r\n\r\n      if (!analysisResponse.ok) {\r\n        const errorData = await analysisResponse.json().catch(() => ({ error: \"Unknown error\" }))\r\n        console.error(\"[v0]  Analysis API error:\")\r\n        console.error(\"[v0] Status:\", analysisResponse.status)\r\n        console.error(\"[v0] Error:\", errorData)\r\n        throw new Error(\r\n          errorData.error || errorData.details || `Analysis failed with status ${analysisResponse.status}`,\r\n        )\r\n      }\r\n\r\n      const analysisData = await analysisResponse.json()\r\n      console.log(\"[v0]  Analysis complete successfully\")\r\n      console.log(\"[v0] Analysis keys:\", Object.keys(analysisData))\r\n      console.log(\"[v0] Full analysis structure:\", JSON.stringify(analysisData, null, 2))\r\n      console.log(\"[v0] Analysis has tender_summary:\", !!analysisData.tender_summary)\r\n      console.log(\"[v0] Analysis has formFields:\", analysisData.formFields?.length || 0)\r\n      setAnalysis(analysisData)\r\n\r\n      console.log(\"[v0] Step 3: Creating tender record with analysis...\")\r\n\r\n      const result = await createCustomTender({\r\n        title: analysisData.tender_summary?.title || file.name.replace(\".pdf\", \"\"),\r\n        organization: analysisData.tender_summary?.entity || \"Unknown Organization\",\r\n        deadline: analysisData.tender_summary?.closing_date || \"\",\r\n        value: analysisData.tender_summary?.contract_duration || \"\",\r\n        description: analysisData.tender_summary?.description || \"\",\r\n        category: \"Custom\",\r\n        uploadedFile: file,\r\n        analysis: analysisData,\r\n      })\r\n\r\n      console.log(\"[v0] createCustomTender result:\", result)\r\n\r\n      if (result.success) {\r\n        console.log(\"[v0]  Tender created successfully\")\r\n        console.log(\"[v0] Tender ID:\", result.tenderId)\r\n        console.log(\"[v0] Orchestration ID:\", result.orchestrationId)\r\n        console.log(\"[v0] Document saved:\", result.documentSaved)\r\n        console.log(\"[v0] Analysis saved:\", result.analysisSaved)\r\n\r\n        if (result.documentError) {\r\n          console.warn(\"[v0] Document error:\", result.documentError)\r\n        }\r\n        if (result.analysisError) {\r\n          console.warn(\"[v0] Analysis error:\", result.analysisError)\r\n        }\r\n\r\n        // Save tender and orchestration IDs to show progress\r\n        setTenderId(result.tenderId)\r\n        if (result.orchestrationId) {\r\n          setOrchestrationId(result.orchestrationId)\r\n          toast({\r\n            title: \"Tender Created Successfully\",\r\n            description: \"Multi-engine analysis is running in the background...\",\r\n          })\r\n        } else {\r\n          toast({\r\n            title: \"Tender Created Successfully\",\r\n            description: \"AI has analyzed your document and extracted all details.\",\r\n          })\r\n          // No orchestration - redirect immediately\r\n          console.log(\"[v0] Redirecting to:\", `/dashboard/tenders/${result.tenderId}`)\r\n          router.push(`/dashboard/tenders/${result.tenderId}`)\r\n        }\r\n      } else {\r\n        console.error(\"[v0]  Tender creation failed:\", result.error)\r\n        throw new Error(result.error || \"Failed to create tender\")\r\n      }\r\n    } catch (error: any) {\r\n      console.error(\"[v0] ================================================\")\r\n      console.error(\"[v0]  UPLOAD PROCESS FAILED\")\r\n      console.error(\"[v0] ================================================\")\r\n      console.error(\"[v0] Error:\", error)\r\n      console.error(\"[v0] Error message:\", error.message)\r\n      console.error(\"[v0] Error stack:\", error.stack)\r\n\r\n      toast({\r\n        title: \"Upload Failed\",\r\n        description: error.message || \"Could not process the document. Please try again.\",\r\n        variant: \"destructive\",\r\n      })\r\n\r\n      setUploadedFile(null)\r\n      setBlobUrl(null)\r\n      setAnalysis(null)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6 md:p-8 space-y-6\">\r\n      <div className=\"flex items-center gap-4\">\r\n        <Button variant=\"ghost\" size=\"icon\" asChild>\r\n          <Link href=\"/dashboard/tenders\">\r\n            <ArrowLeft className=\"h-5 w-5\" />\r\n          </Link>\r\n        </Button>\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-foreground mb-2\">Create New Tender</h1>\r\n          <p className=\"text-muted-foreground\">Upload a tender document for automatic AI analysis</p>\r\n        </div>\r\n      </div>\r\n\r\n      <Card className=\"border-border max-w-3xl\">\r\n        <CardHeader>\r\n          <CardTitle>Upload Tender Document</CardTitle>\r\n          <CardDescription>\r\n            Upload a PDF tender document - AI will automatically analyze and extract all details\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center gap-4\">\r\n              <Label\r\n                htmlFor=\"pdf-upload\"\r\n                className={`flex items-center gap-2 px-4 py-2 rounded-md cursor-pointer transition-colors ${loading\r\n                  ? \"bg-muted text-muted-foreground cursor-not-allowed\"\r\n                  : \"bg-primary text-primary-foreground hover:bg-primary/90\"\r\n                  }`}\r\n              >\r\n                {loading ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <Upload className=\"h-4 w-4\" />}\r\n                {loading ? \"Processing...\" : uploadedFile ? \"Change Document\" : \"Upload PDF\"}\r\n              </Label>\r\n              <Input\r\n                id=\"pdf-upload\"\r\n                type=\"file\"\r\n                accept=\"application/pdf\"\r\n                onChange={handleFileUpload}\r\n                className=\"hidden\"\r\n                disabled={loading}\r\n              />\r\n              {uploadedFile && !loading && (\r\n                <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                  <FileText className=\"h-4 w-4\" />\r\n                  {uploadedFile.name}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {loading && (\r\n              <Alert className=\"border-blue-500/50 bg-blue-500/10\">\r\n                <Loader2 className=\"h-4 w-4 text-blue-500 animate-spin\" />\r\n                <AlertDescription className=\"text-blue-500\">\r\n                  Processing your tender document... This may take a moment.\r\n                </AlertDescription>\r\n              </Alert>\r\n            )}\r\n\r\n            {uploadedFile && !loading && analysis && !orchestrationId && (\r\n              <Alert className=\"border-green-500/50 bg-green-500/10\">\r\n                <CheckCircle2 className=\"h-4 w-4 text-green-500\" />\r\n                <AlertDescription className=\"text-green-500\">\r\n                  Document analyzed successfully! AI has extracted all tender details.\r\n                </AlertDescription>\r\n              </Alert>\r\n            )}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Multi-Engine Progress Tracker */}\r\n      {orchestrationId && tenderId && (\r\n        <div className=\"max-w-3xl space-y-4\">\r\n          <MultiEngineProgress\r\n            orchestrationId={orchestrationId}\r\n            onComplete={() => {\r\n              toast({\r\n                title: \"Analysis Complete\",\r\n                description: \"All AI engines have finished processing your tender.\",\r\n              })\r\n              // Redirect to tender detail page after a short delay\r\n              setTimeout(() => {\r\n                router.push(`/dashboard/tenders/${tenderId}`)\r\n              }, 2000)\r\n            }}\r\n          />\r\n\r\n          <div className=\"flex justify-between items-center\">\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              You can navigate away - analysis will continue in the background\r\n            </p>\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={() => router.push(`/dashboard/tenders/${tenderId}`)}\r\n            >\r\n              View Tender Details\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}