{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card\"\r\n      className={cn(\r\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-header\"\r\n      className={cn(\r\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-title\"\r\n      className={cn('leading-none font-semibold', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-description\"\r\n      className={cn('text-muted-foreground text-sm', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-action\"\r\n      className={cn(\r\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-content\"\r\n      className={cn('px-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-footer\"\r\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Card,\r\n  CardHeader,\r\n  CardFooter,\r\n  CardTitle,\r\n  CardAction,\r\n  CardDescription,\r\n  CardContent,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,mSAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,mSAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,mSAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,mSAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,mSAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,mSAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,mSAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS"}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/components/ui/tabs.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport * as TabsPrimitive from '@radix-ui/react-tabs'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Tabs({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\r\n  return (\r\n    <TabsPrimitive.Root\r\n      data-slot=\"tabs\"\r\n      className={cn('flex flex-col gap-2', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TabsList({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\r\n  return (\r\n    <TabsPrimitive.List\r\n      data-slot=\"tabs-list\"\r\n      className={cn(\r\n        'bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TabsTrigger({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\r\n  return (\r\n    <TabsPrimitive.Trigger\r\n      data-slot=\"tabs-trigger\"\r\n      className={cn(\r\n        \"data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TabsContent({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\r\n  return (\r\n    <TabsPrimitive.Content\r\n      data-slot=\"tabs-content\"\r\n      className={cn('flex-1 outline-none', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\r\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,KAAK,EACZ,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,mSAAC,2RAAkB;QACjB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,mSAAC,2RAAkB;QACjB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,uGACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,mSAAC,8RAAqB;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,mqBACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,mSAAC,8RAAqB;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf;MAXS"}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/components/ui/alert.tsx"],"sourcesContent":["import * as React from 'react'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst alertVariants = cva(\r\n  'relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current',\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: 'bg-card text-card-foreground',\r\n        destructive:\r\n          'text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n    },\r\n  },\r\n)\r\n\r\nfunction Alert({\r\n  className,\r\n  variant,\r\n  ...props\r\n}: React.ComponentProps<'div'> & VariantProps<typeof alertVariants>) {\r\n  return (\r\n    <div\r\n      data-slot=\"alert\"\r\n      role=\"alert\"\r\n      className={cn(alertVariants({ variant }), className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction AlertTitle({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"alert-title\"\r\n      className={cn(\r\n        'col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction AlertDescription({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"alert-description\"\r\n      className={cn(\r\n        'text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Alert, AlertTitle, AlertDescription }\r\n"],"names":[],"mappings":";;;;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,qPAAG,EACvB,qOACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,GAAG,OAC8D;IACjE,qBACE,mSAAC;QACC,aAAU;QACV,MAAK;QACL,WAAW,IAAA,qHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf;KAbS;AAeT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,mSAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,+DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,iBAAiB,EACxB,SAAS,EACT,GAAG,OACyB;IAC5B,qBACE,mSAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kGACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS"}},
    {"offset": {"line": 278, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/app/actions/document-actions.ts"],"sourcesContent":["\"use server\"\r\n\r\nimport { createClient } from \"@/lib/supabase/server\"\r\nimport { revalidatePath } from \"next/cache\"\r\n\r\nexport async function uploadTenderDocument(formData: FormData) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const file = formData.get(\"file\") as File\r\n  const userTenderId = formData.get(\"userTenderId\") as string\r\n\r\n  if (!file || !userTenderId) {\r\n    return { success: false, error: \"File and tender ID are required\" }\r\n  }\r\n\r\n  // Upload file to Supabase Storage\r\n  const fileExt = file.name.split(\".\").pop()\r\n  const fileName = `${user.id}/${userTenderId}/${Date.now()}.${fileExt}`\r\n\r\n  const { data: uploadData, error: uploadError } = await supabase.storage\r\n    .from(\"tender-documents\")\r\n    .upload(fileName, file)\r\n\r\n  if (uploadError) {\r\n    console.error(\"[v0] Error uploading file:\", uploadError)\r\n    return { success: false, error: \"Failed to upload file\" }\r\n  }\r\n\r\n  // Save document metadata to database\r\n  const { data, error } = await supabase\r\n    .from(\"tender_documents\")\r\n    .insert({\r\n      user_tender_id: userTenderId,\r\n      user_id: user.id,\r\n      file_name: file.name,\r\n      file_size: file.size,\r\n      file_type: file.type,\r\n      storage_path: uploadData.path,\r\n    })\r\n    .select()\r\n    .single()\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error saving document metadata:\", error)\r\n    // Clean up uploaded file\r\n    await supabase.storage.from(\"tender-documents\").remove([fileName])\r\n    return { success: false, error: \"Failed to save document\" }\r\n  }\r\n\r\n  revalidatePath(`/dashboard/tenders/${userTenderId}`)\r\n  return { success: true, data }\r\n}\r\n\r\nexport async function getTenderDocuments(userTenderId: string) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\", documents: [] }\r\n\r\n  const { data, error } = await supabase\r\n    .from(\"tender_documents\")\r\n    .select(\"*\")\r\n    .eq(\"user_tender_id\", userTenderId)\r\n    .eq(\"user_id\", user.id)\r\n    .order(\"created_at\", { ascending: false })\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error fetching documents:\", error)\r\n    return { success: false, error: \"Failed to fetch documents\", documents: [] }\r\n  }\r\n\r\n  return { success: true, documents: data || [] }\r\n}\r\n\r\nexport async function downloadTenderDocument(documentId: string) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  // Get document metadata\r\n  const { data: document, error: docError } = await supabase\r\n    .from(\"tender_documents\")\r\n    .select(\"*\")\r\n    .eq(\"id\", documentId)\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  if (docError || !document) {\r\n    console.error(\"[v0] Error fetching document:\", docError)\r\n    return { success: false, error: \"Document not found\" }\r\n  }\r\n\r\n  const isExternalUrl = document.storage_path.startsWith(\"http://\") || document.storage_path.startsWith(\"https://\")\r\n\r\n  if (isExternalUrl) {\r\n    // For external documents (from eTenders API), return the URL directly\r\n    console.log(\"[v0] Returning external document URL:\", document.storage_path)\r\n    return { success: true, url: document.storage_path, fileName: document.file_name }\r\n  }\r\n\r\n  // For documents stored in Supabase Storage, create a signed URL\r\n  const { data: urlData, error: urlError } = await supabase.storage\r\n    .from(\"tender-documents\")\r\n    .createSignedUrl(document.storage_path, 60) // 60 seconds expiry\r\n\r\n  if (urlError) {\r\n    console.error(\"[v0] Error creating signed URL:\", urlError)\r\n    return { success: false, error: \"Failed to generate download link\" }\r\n  }\r\n\r\n  return { success: true, url: urlData.signedUrl, fileName: document.file_name }\r\n}\r\n\r\nexport async function deleteTenderDocument(documentId: string) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  // Get document to delete from storage\r\n  const { data: document, error: docError } = await supabase\r\n    .from(\"tender_documents\")\r\n    .select(\"*\")\r\n    .eq(\"id\", documentId)\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  if (docError || !document) {\r\n    return { success: false, error: \"Document not found\" }\r\n  }\r\n\r\n  // Delete from storage\r\n  const { error: storageError } = await supabase.storage.from(\"tender-documents\").remove([document.storage_path])\r\n\r\n  if (storageError) {\r\n    console.error(\"[v0] Error deleting from storage:\", storageError)\r\n  }\r\n\r\n  // Delete from database\r\n  const { error } = await supabase.from(\"tender_documents\").delete().eq(\"id\", documentId).eq(\"user_id\", user.id)\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error deleting document:\", error)\r\n    return { success: false, error: \"Failed to delete document\" }\r\n  }\r\n\r\n  revalidatePath(`/dashboard/tenders/${document.user_tender_id}`)\r\n  return { success: true }\r\n}\r\n\r\nexport async function analyzeDocument(documentId: string, analysis: any) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  try {\r\n    console.log(\"[v0] Saving analysis for document:\", documentId)\r\n\r\n    // Save analysis to database\r\n    const { error } = await supabase\r\n      .from(\"tender_documents\")\r\n      .update({ ai_analysis: analysis })\r\n      .eq(\"id\", documentId)\r\n      .eq(\"user_id\", user.id)\r\n\r\n    if (error) {\r\n      console.error(\"[v0] Error saving analysis:\", error)\r\n      return { success: false, error: \"Failed to save analysis\" }\r\n    }\r\n\r\n    console.log(\"[v0] Analysis saved successfully\")\r\n    revalidatePath(`/dashboard/tenders`)\r\n    return { success: true, analysis }\r\n  } catch (error) {\r\n    console.error(\"[v0] Error in analyzeDocument:\", error)\r\n    return { success: false, error: \"Failed to save analysis\" }\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;IAKsB,uBAAA,WAAA,GAAA,IAAA,wVAAA,EAAA,8CAAA,6UAAA,EAAA,KAAA,GAAA,mVAAA,EAAA"}},
    {"offset": {"line": 293, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/app/actions/document-actions.ts"],"sourcesContent":["\"use server\"\r\n\r\nimport { createClient } from \"@/lib/supabase/server\"\r\nimport { revalidatePath } from \"next/cache\"\r\n\r\nexport async function uploadTenderDocument(formData: FormData) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const file = formData.get(\"file\") as File\r\n  const userTenderId = formData.get(\"userTenderId\") as string\r\n\r\n  if (!file || !userTenderId) {\r\n    return { success: false, error: \"File and tender ID are required\" }\r\n  }\r\n\r\n  // Upload file to Supabase Storage\r\n  const fileExt = file.name.split(\".\").pop()\r\n  const fileName = `${user.id}/${userTenderId}/${Date.now()}.${fileExt}`\r\n\r\n  const { data: uploadData, error: uploadError } = await supabase.storage\r\n    .from(\"tender-documents\")\r\n    .upload(fileName, file)\r\n\r\n  if (uploadError) {\r\n    console.error(\"[v0] Error uploading file:\", uploadError)\r\n    return { success: false, error: \"Failed to upload file\" }\r\n  }\r\n\r\n  // Save document metadata to database\r\n  const { data, error } = await supabase\r\n    .from(\"tender_documents\")\r\n    .insert({\r\n      user_tender_id: userTenderId,\r\n      user_id: user.id,\r\n      file_name: file.name,\r\n      file_size: file.size,\r\n      file_type: file.type,\r\n      storage_path: uploadData.path,\r\n    })\r\n    .select()\r\n    .single()\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error saving document metadata:\", error)\r\n    // Clean up uploaded file\r\n    await supabase.storage.from(\"tender-documents\").remove([fileName])\r\n    return { success: false, error: \"Failed to save document\" }\r\n  }\r\n\r\n  revalidatePath(`/dashboard/tenders/${userTenderId}`)\r\n  return { success: true, data }\r\n}\r\n\r\nexport async function getTenderDocuments(userTenderId: string) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\", documents: [] }\r\n\r\n  const { data, error } = await supabase\r\n    .from(\"tender_documents\")\r\n    .select(\"*\")\r\n    .eq(\"user_tender_id\", userTenderId)\r\n    .eq(\"user_id\", user.id)\r\n    .order(\"created_at\", { ascending: false })\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error fetching documents:\", error)\r\n    return { success: false, error: \"Failed to fetch documents\", documents: [] }\r\n  }\r\n\r\n  return { success: true, documents: data || [] }\r\n}\r\n\r\nexport async function downloadTenderDocument(documentId: string) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  // Get document metadata\r\n  const { data: document, error: docError } = await supabase\r\n    .from(\"tender_documents\")\r\n    .select(\"*\")\r\n    .eq(\"id\", documentId)\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  if (docError || !document) {\r\n    console.error(\"[v0] Error fetching document:\", docError)\r\n    return { success: false, error: \"Document not found\" }\r\n  }\r\n\r\n  const isExternalUrl = document.storage_path.startsWith(\"http://\") || document.storage_path.startsWith(\"https://\")\r\n\r\n  if (isExternalUrl) {\r\n    // For external documents (from eTenders API), return the URL directly\r\n    console.log(\"[v0] Returning external document URL:\", document.storage_path)\r\n    return { success: true, url: document.storage_path, fileName: document.file_name }\r\n  }\r\n\r\n  // For documents stored in Supabase Storage, create a signed URL\r\n  const { data: urlData, error: urlError } = await supabase.storage\r\n    .from(\"tender-documents\")\r\n    .createSignedUrl(document.storage_path, 60) // 60 seconds expiry\r\n\r\n  if (urlError) {\r\n    console.error(\"[v0] Error creating signed URL:\", urlError)\r\n    return { success: false, error: \"Failed to generate download link\" }\r\n  }\r\n\r\n  return { success: true, url: urlData.signedUrl, fileName: document.file_name }\r\n}\r\n\r\nexport async function deleteTenderDocument(documentId: string) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  // Get document to delete from storage\r\n  const { data: document, error: docError } = await supabase\r\n    .from(\"tender_documents\")\r\n    .select(\"*\")\r\n    .eq(\"id\", documentId)\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  if (docError || !document) {\r\n    return { success: false, error: \"Document not found\" }\r\n  }\r\n\r\n  // Delete from storage\r\n  const { error: storageError } = await supabase.storage.from(\"tender-documents\").remove([document.storage_path])\r\n\r\n  if (storageError) {\r\n    console.error(\"[v0] Error deleting from storage:\", storageError)\r\n  }\r\n\r\n  // Delete from database\r\n  const { error } = await supabase.from(\"tender_documents\").delete().eq(\"id\", documentId).eq(\"user_id\", user.id)\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error deleting document:\", error)\r\n    return { success: false, error: \"Failed to delete document\" }\r\n  }\r\n\r\n  revalidatePath(`/dashboard/tenders/${document.user_tender_id}`)\r\n  return { success: true }\r\n}\r\n\r\nexport async function analyzeDocument(documentId: string, analysis: any) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  try {\r\n    console.log(\"[v0] Saving analysis for document:\", documentId)\r\n\r\n    // Save analysis to database\r\n    const { error } = await supabase\r\n      .from(\"tender_documents\")\r\n      .update({ ai_analysis: analysis })\r\n      .eq(\"id\", documentId)\r\n      .eq(\"user_id\", user.id)\r\n\r\n    if (error) {\r\n      console.error(\"[v0] Error saving analysis:\", error)\r\n      return { success: false, error: \"Failed to save analysis\" }\r\n    }\r\n\r\n    console.log(\"[v0] Analysis saved successfully\")\r\n    revalidatePath(`/dashboard/tenders`)\r\n    return { success: true, analysis }\r\n  } catch (error) {\r\n    console.error(\"[v0] Error in analyzeDocument:\", error)\r\n    return { success: false, error: \"Failed to save analysis\" }\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;IAiFsB,yBAAA,WAAA,GAAA,IAAA,wVAAA,EAAA,8CAAA,6UAAA,EAAA,KAAA,GAAA,mVAAA,EAAA"}},
    {"offset": {"line": 308, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/app/actions/document-actions.ts"],"sourcesContent":["\"use server\"\r\n\r\nimport { createClient } from \"@/lib/supabase/server\"\r\nimport { revalidatePath } from \"next/cache\"\r\n\r\nexport async function uploadTenderDocument(formData: FormData) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const file = formData.get(\"file\") as File\r\n  const userTenderId = formData.get(\"userTenderId\") as string\r\n\r\n  if (!file || !userTenderId) {\r\n    return { success: false, error: \"File and tender ID are required\" }\r\n  }\r\n\r\n  // Upload file to Supabase Storage\r\n  const fileExt = file.name.split(\".\").pop()\r\n  const fileName = `${user.id}/${userTenderId}/${Date.now()}.${fileExt}`\r\n\r\n  const { data: uploadData, error: uploadError } = await supabase.storage\r\n    .from(\"tender-documents\")\r\n    .upload(fileName, file)\r\n\r\n  if (uploadError) {\r\n    console.error(\"[v0] Error uploading file:\", uploadError)\r\n    return { success: false, error: \"Failed to upload file\" }\r\n  }\r\n\r\n  // Save document metadata to database\r\n  const { data, error } = await supabase\r\n    .from(\"tender_documents\")\r\n    .insert({\r\n      user_tender_id: userTenderId,\r\n      user_id: user.id,\r\n      file_name: file.name,\r\n      file_size: file.size,\r\n      file_type: file.type,\r\n      storage_path: uploadData.path,\r\n    })\r\n    .select()\r\n    .single()\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error saving document metadata:\", error)\r\n    // Clean up uploaded file\r\n    await supabase.storage.from(\"tender-documents\").remove([fileName])\r\n    return { success: false, error: \"Failed to save document\" }\r\n  }\r\n\r\n  revalidatePath(`/dashboard/tenders/${userTenderId}`)\r\n  return { success: true, data }\r\n}\r\n\r\nexport async function getTenderDocuments(userTenderId: string) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\", documents: [] }\r\n\r\n  const { data, error } = await supabase\r\n    .from(\"tender_documents\")\r\n    .select(\"*\")\r\n    .eq(\"user_tender_id\", userTenderId)\r\n    .eq(\"user_id\", user.id)\r\n    .order(\"created_at\", { ascending: false })\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error fetching documents:\", error)\r\n    return { success: false, error: \"Failed to fetch documents\", documents: [] }\r\n  }\r\n\r\n  return { success: true, documents: data || [] }\r\n}\r\n\r\nexport async function downloadTenderDocument(documentId: string) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  // Get document metadata\r\n  const { data: document, error: docError } = await supabase\r\n    .from(\"tender_documents\")\r\n    .select(\"*\")\r\n    .eq(\"id\", documentId)\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  if (docError || !document) {\r\n    console.error(\"[v0] Error fetching document:\", docError)\r\n    return { success: false, error: \"Document not found\" }\r\n  }\r\n\r\n  const isExternalUrl = document.storage_path.startsWith(\"http://\") || document.storage_path.startsWith(\"https://\")\r\n\r\n  if (isExternalUrl) {\r\n    // For external documents (from eTenders API), return the URL directly\r\n    console.log(\"[v0] Returning external document URL:\", document.storage_path)\r\n    return { success: true, url: document.storage_path, fileName: document.file_name }\r\n  }\r\n\r\n  // For documents stored in Supabase Storage, create a signed URL\r\n  const { data: urlData, error: urlError } = await supabase.storage\r\n    .from(\"tender-documents\")\r\n    .createSignedUrl(document.storage_path, 60) // 60 seconds expiry\r\n\r\n  if (urlError) {\r\n    console.error(\"[v0] Error creating signed URL:\", urlError)\r\n    return { success: false, error: \"Failed to generate download link\" }\r\n  }\r\n\r\n  return { success: true, url: urlData.signedUrl, fileName: document.file_name }\r\n}\r\n\r\nexport async function deleteTenderDocument(documentId: string) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  // Get document to delete from storage\r\n  const { data: document, error: docError } = await supabase\r\n    .from(\"tender_documents\")\r\n    .select(\"*\")\r\n    .eq(\"id\", documentId)\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  if (docError || !document) {\r\n    return { success: false, error: \"Document not found\" }\r\n  }\r\n\r\n  // Delete from storage\r\n  const { error: storageError } = await supabase.storage.from(\"tender-documents\").remove([document.storage_path])\r\n\r\n  if (storageError) {\r\n    console.error(\"[v0] Error deleting from storage:\", storageError)\r\n  }\r\n\r\n  // Delete from database\r\n  const { error } = await supabase.from(\"tender_documents\").delete().eq(\"id\", documentId).eq(\"user_id\", user.id)\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error deleting document:\", error)\r\n    return { success: false, error: \"Failed to delete document\" }\r\n  }\r\n\r\n  revalidatePath(`/dashboard/tenders/${document.user_tender_id}`)\r\n  return { success: true }\r\n}\r\n\r\nexport async function analyzeDocument(documentId: string, analysis: any) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  try {\r\n    console.log(\"[v0] Saving analysis for document:\", documentId)\r\n\r\n    // Save analysis to database\r\n    const { error } = await supabase\r\n      .from(\"tender_documents\")\r\n      .update({ ai_analysis: analysis })\r\n      .eq(\"id\", documentId)\r\n      .eq(\"user_id\", user.id)\r\n\r\n    if (error) {\r\n      console.error(\"[v0] Error saving analysis:\", error)\r\n      return { success: false, error: \"Failed to save analysis\" }\r\n    }\r\n\r\n    console.log(\"[v0] Analysis saved successfully\")\r\n    revalidatePath(`/dashboard/tenders`)\r\n    return { success: true, analysis }\r\n  } catch (error) {\r\n    console.error(\"[v0] Error in analyzeDocument:\", error)\r\n    return { success: false, error: \"Failed to save analysis\" }\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;IA2HsB,uBAAA,WAAA,GAAA,IAAA,wVAAA,EAAA,8CAAA,6UAAA,EAAA,KAAA,GAAA,mVAAA,EAAA"}},
    {"offset": {"line": 323, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/app/actions/document-actions.ts"],"sourcesContent":["\"use server\"\r\n\r\nimport { createClient } from \"@/lib/supabase/server\"\r\nimport { revalidatePath } from \"next/cache\"\r\n\r\nexport async function uploadTenderDocument(formData: FormData) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const file = formData.get(\"file\") as File\r\n  const userTenderId = formData.get(\"userTenderId\") as string\r\n\r\n  if (!file || !userTenderId) {\r\n    return { success: false, error: \"File and tender ID are required\" }\r\n  }\r\n\r\n  // Upload file to Supabase Storage\r\n  const fileExt = file.name.split(\".\").pop()\r\n  const fileName = `${user.id}/${userTenderId}/${Date.now()}.${fileExt}`\r\n\r\n  const { data: uploadData, error: uploadError } = await supabase.storage\r\n    .from(\"tender-documents\")\r\n    .upload(fileName, file)\r\n\r\n  if (uploadError) {\r\n    console.error(\"[v0] Error uploading file:\", uploadError)\r\n    return { success: false, error: \"Failed to upload file\" }\r\n  }\r\n\r\n  // Save document metadata to database\r\n  const { data, error } = await supabase\r\n    .from(\"tender_documents\")\r\n    .insert({\r\n      user_tender_id: userTenderId,\r\n      user_id: user.id,\r\n      file_name: file.name,\r\n      file_size: file.size,\r\n      file_type: file.type,\r\n      storage_path: uploadData.path,\r\n    })\r\n    .select()\r\n    .single()\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error saving document metadata:\", error)\r\n    // Clean up uploaded file\r\n    await supabase.storage.from(\"tender-documents\").remove([fileName])\r\n    return { success: false, error: \"Failed to save document\" }\r\n  }\r\n\r\n  revalidatePath(`/dashboard/tenders/${userTenderId}`)\r\n  return { success: true, data }\r\n}\r\n\r\nexport async function getTenderDocuments(userTenderId: string) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\", documents: [] }\r\n\r\n  const { data, error } = await supabase\r\n    .from(\"tender_documents\")\r\n    .select(\"*\")\r\n    .eq(\"user_tender_id\", userTenderId)\r\n    .eq(\"user_id\", user.id)\r\n    .order(\"created_at\", { ascending: false })\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error fetching documents:\", error)\r\n    return { success: false, error: \"Failed to fetch documents\", documents: [] }\r\n  }\r\n\r\n  return { success: true, documents: data || [] }\r\n}\r\n\r\nexport async function downloadTenderDocument(documentId: string) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  // Get document metadata\r\n  const { data: document, error: docError } = await supabase\r\n    .from(\"tender_documents\")\r\n    .select(\"*\")\r\n    .eq(\"id\", documentId)\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  if (docError || !document) {\r\n    console.error(\"[v0] Error fetching document:\", docError)\r\n    return { success: false, error: \"Document not found\" }\r\n  }\r\n\r\n  const isExternalUrl = document.storage_path.startsWith(\"http://\") || document.storage_path.startsWith(\"https://\")\r\n\r\n  if (isExternalUrl) {\r\n    // For external documents (from eTenders API), return the URL directly\r\n    console.log(\"[v0] Returning external document URL:\", document.storage_path)\r\n    return { success: true, url: document.storage_path, fileName: document.file_name }\r\n  }\r\n\r\n  // For documents stored in Supabase Storage, create a signed URL\r\n  const { data: urlData, error: urlError } = await supabase.storage\r\n    .from(\"tender-documents\")\r\n    .createSignedUrl(document.storage_path, 60) // 60 seconds expiry\r\n\r\n  if (urlError) {\r\n    console.error(\"[v0] Error creating signed URL:\", urlError)\r\n    return { success: false, error: \"Failed to generate download link\" }\r\n  }\r\n\r\n  return { success: true, url: urlData.signedUrl, fileName: document.file_name }\r\n}\r\n\r\nexport async function deleteTenderDocument(documentId: string) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  // Get document to delete from storage\r\n  const { data: document, error: docError } = await supabase\r\n    .from(\"tender_documents\")\r\n    .select(\"*\")\r\n    .eq(\"id\", documentId)\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  if (docError || !document) {\r\n    return { success: false, error: \"Document not found\" }\r\n  }\r\n\r\n  // Delete from storage\r\n  const { error: storageError } = await supabase.storage.from(\"tender-documents\").remove([document.storage_path])\r\n\r\n  if (storageError) {\r\n    console.error(\"[v0] Error deleting from storage:\", storageError)\r\n  }\r\n\r\n  // Delete from database\r\n  const { error } = await supabase.from(\"tender_documents\").delete().eq(\"id\", documentId).eq(\"user_id\", user.id)\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error deleting document:\", error)\r\n    return { success: false, error: \"Failed to delete document\" }\r\n  }\r\n\r\n  revalidatePath(`/dashboard/tenders/${document.user_tender_id}`)\r\n  return { success: true }\r\n}\r\n\r\nexport async function analyzeDocument(documentId: string, analysis: any) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  try {\r\n    console.log(\"[v0] Saving analysis for document:\", documentId)\r\n\r\n    // Save analysis to database\r\n    const { error } = await supabase\r\n      .from(\"tender_documents\")\r\n      .update({ ai_analysis: analysis })\r\n      .eq(\"id\", documentId)\r\n      .eq(\"user_id\", user.id)\r\n\r\n    if (error) {\r\n      console.error(\"[v0] Error saving analysis:\", error)\r\n      return { success: false, error: \"Failed to save analysis\" }\r\n    }\r\n\r\n    console.log(\"[v0] Analysis saved successfully\")\r\n    revalidatePath(`/dashboard/tenders`)\r\n    return { success: true, analysis }\r\n  } catch (error) {\r\n    console.error(\"[v0] Error in analyzeDocument:\", error)\r\n    return { success: false, error: \"Failed to save analysis\" }\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;IAkKsB,kBAAA,WAAA,GAAA,IAAA,wVAAA,EAAA,8CAAA,6UAAA,EAAA,KAAA,GAAA,mVAAA,EAAA"}},
    {"offset": {"line": 338, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\r\n  return (\r\n    <input\r\n      type={type}\r\n      data-slot=\"input\"\r\n      className={cn(\r\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\r\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\r\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,mSAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS"}},
    {"offset": {"line": 369, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Textarea({ className, ...props }: React.ComponentProps<'textarea'>) {\r\n  return (\r\n    <textarea\r\n      data-slot=\"textarea\"\r\n      className={cn(\r\n        'border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Textarea }\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAyC;IACzE,qBACE,mSAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,ucACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS"}},
    {"offset": {"line": 399, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/components/ui/label.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport * as LabelPrimitive from '@radix-ui/react-label'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Label({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\r\n  return (\r\n    <LabelPrimitive.Root\r\n      data-slot=\"label\"\r\n      className={cn(\r\n        'flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Label }\r\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,mSAAC,yRAAmB;QAClB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,uNACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS"}},
    {"offset": {"line": 432, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/components/ui/select.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport * as SelectPrimitive from '@radix-ui/react-select'\r\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from 'lucide-react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Select({\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\r\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\r\n}\r\n\r\nfunction SelectGroup({\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\r\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\r\n}\r\n\r\nfunction SelectValue({\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\r\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\r\n}\r\n\r\nfunction SelectTrigger({\r\n  className,\r\n  size = 'default',\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\r\n  size?: 'sm' | 'default'\r\n}) {\r\n  return (\r\n    <SelectPrimitive.Trigger\r\n      data-slot=\"select-trigger\"\r\n      data-size={size}\r\n      className={cn(\r\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <SelectPrimitive.Icon asChild>\r\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\r\n      </SelectPrimitive.Icon>\r\n    </SelectPrimitive.Trigger>\r\n  )\r\n}\r\n\r\nfunction SelectContent({\r\n  className,\r\n  children,\r\n  position = 'popper',\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\r\n  return (\r\n    <SelectPrimitive.Portal>\r\n      <SelectPrimitive.Content\r\n        data-slot=\"select-content\"\r\n        className={cn(\r\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md',\r\n          position === 'popper' &&\r\n            'data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1',\r\n          className,\r\n        )}\r\n        position={position}\r\n        {...props}\r\n      >\r\n        <SelectScrollUpButton />\r\n        <SelectPrimitive.Viewport\r\n          className={cn(\r\n            'p-1',\r\n            position === 'popper' &&\r\n              'h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1',\r\n          )}\r\n        >\r\n          {children}\r\n        </SelectPrimitive.Viewport>\r\n        <SelectScrollDownButton />\r\n      </SelectPrimitive.Content>\r\n    </SelectPrimitive.Portal>\r\n  )\r\n}\r\n\r\nfunction SelectLabel({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\r\n  return (\r\n    <SelectPrimitive.Label\r\n      data-slot=\"select-label\"\r\n      className={cn('text-muted-foreground px-2 py-1.5 text-xs', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SelectItem({\r\n  className,\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\r\n  return (\r\n    <SelectPrimitive.Item\r\n      data-slot=\"select-item\"\r\n      className={cn(\r\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\r\n        <SelectPrimitive.ItemIndicator>\r\n          <CheckIcon className=\"size-4\" />\r\n        </SelectPrimitive.ItemIndicator>\r\n      </span>\r\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n    </SelectPrimitive.Item>\r\n  )\r\n}\r\n\r\nfunction SelectSeparator({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\r\n  return (\r\n    <SelectPrimitive.Separator\r\n      data-slot=\"select-separator\"\r\n      className={cn('bg-border pointer-events-none -mx-1 my-1 h-px', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SelectScrollUpButton({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\r\n  return (\r\n    <SelectPrimitive.ScrollUpButton\r\n      data-slot=\"select-scroll-up-button\"\r\n      className={cn(\r\n        'flex cursor-default items-center justify-center py-1',\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      <ChevronUpIcon className=\"size-4\" />\r\n    </SelectPrimitive.ScrollUpButton>\r\n  )\r\n}\r\n\r\nfunction SelectScrollDownButton({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\r\n  return (\r\n    <SelectPrimitive.ScrollDownButton\r\n      data-slot=\"select-scroll-down-button\"\r\n      className={cn(\r\n        'flex cursor-default items-center justify-center py-1',\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      <ChevronDownIcon className=\"size-4\" />\r\n    </SelectPrimitive.ScrollDownButton>\r\n  )\r\n}\r\n\r\nexport {\r\n  Select,\r\n  SelectContent,\r\n  SelectGroup,\r\n  SelectItem,\r\n  SelectLabel,\r\n  SelectScrollDownButton,\r\n  SelectScrollUpButton,\r\n  SelectSeparator,\r\n  SelectTrigger,\r\n  SelectValue,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAAA;AAAA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,mSAAC,0RAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;KAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,mSAAC,2RAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,mSAAC,2RAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,cAAc,EACrB,SAAS,EACT,OAAO,SAAS,EAChB,QAAQ,EACR,GAAG,OAGJ;IACC,qBACE,mSAAC,6RAAuB;QACtB,aAAU;QACV,aAAW;QACX,WAAW,IAAA,qHAAE,EACX,gzBACA;QAED,GAAG,KAAK;;YAER;0BACD,mSAAC,0RAAoB;gBAAC,OAAO;0BAC3B,cAAA,mSAAC,kUAAe;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAInC;MAxBS;AA0BT,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,WAAW,QAAQ,EACnB,GAAG,OACkD;IACrD,qBACE,mSAAC,4RAAsB;kBACrB,cAAA,mSAAC,6RAAuB;YACtB,aAAU;YACV,WAAW,IAAA,qHAAE,EACX,ijBACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,mSAAC;;;;;8BACD,mSAAC,8RAAwB;oBACvB,WAAW,IAAA,qHAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,mSAAC;;;;;;;;;;;;;;;;AAIT;MAjCS;AAmCT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,mSAAC,2RAAqB;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OAC+C;IAClD,qBACE,mSAAC,0RAAoB;QACnB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,6aACA;QAED,GAAG,KAAK;;0BAET,mSAAC;gBAAK,WAAU;0BACd,cAAA,mSAAC,mSAA6B;8BAC5B,cAAA,mSAAC,4SAAS;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGzB,mSAAC,8RAAwB;0BAAE;;;;;;;;;;;;AAGjC;MAtBS;AAwBT,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OACoD;IACvD,qBACE,mSAAC,+RAAyB;QACxB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iDAAiD;QAC9D,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,qBAAqB,EAC5B,SAAS,EACT,GAAG,OACyD;IAC5D,qBACE,mSAAC,oSAA8B;QAC7B,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,mSAAC,4TAAa;YAAC,WAAU;;;;;;;;;;;AAG/B;MAhBS;AAkBT,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OAC2D;IAC9D,qBACE,mSAAC,sSAAgC;QAC/B,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,mSAAC,kUAAe;YAAC,WAAU;;;;;;;;;;;AAGjC;MAhBS"}},
    {"offset": {"line": 689, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/components/ui/checkbox.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport * as CheckboxPrimitive from '@radix-ui/react-checkbox'\r\nimport { CheckIcon } from 'lucide-react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Checkbox({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof CheckboxPrimitive.Root>) {\r\n  return (\r\n    <CheckboxPrimitive.Root\r\n      data-slot=\"checkbox\"\r\n      className={cn(\r\n        'peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50',\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      <CheckboxPrimitive.Indicator\r\n        data-slot=\"checkbox-indicator\"\r\n        className=\"flex items-center justify-center text-current transition-none\"\r\n      >\r\n        <CheckIcon className=\"size-3.5\" />\r\n      </CheckboxPrimitive.Indicator>\r\n    </CheckboxPrimitive.Root>\r\n  )\r\n}\r\n\r\nexport { Checkbox }\r\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACiD;IACpD,qBACE,mSAAC,yRAAsB;QACrB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,+eACA;QAED,GAAG,KAAK;kBAET,cAAA,mSAAC,8RAA2B;YAC1B,aAAU;YACV,WAAU;sBAEV,cAAA,mSAAC,4SAAS;gBAAC,WAAU;;;;;;;;;;;;;;;;AAI7B;KArBS"}},
    {"offset": {"line": 739, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/components/ui/radio-group.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport * as RadioGroupPrimitive from '@radix-ui/react-radio-group'\r\nimport { CircleIcon } from 'lucide-react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction RadioGroup({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof RadioGroupPrimitive.Root>) {\r\n  return (\r\n    <RadioGroupPrimitive.Root\r\n      data-slot=\"radio-group\"\r\n      className={cn('grid gap-3', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction RadioGroupItem({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof RadioGroupPrimitive.Item>) {\r\n  return (\r\n    <RadioGroupPrimitive.Item\r\n      data-slot=\"radio-group-item\"\r\n      className={cn(\r\n        'border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50',\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      <RadioGroupPrimitive.Indicator\r\n        data-slot=\"radio-group-indicator\"\r\n        className=\"relative flex items-center justify-center\"\r\n      >\r\n        <CircleIcon className=\"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2\" />\r\n      </RadioGroupPrimitive.Indicator>\r\n    </RadioGroupPrimitive.Item>\r\n  )\r\n}\r\n\r\nexport { RadioGroup, RadioGroupItem }\r\n"],"names":[],"mappings":";;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,WAAW,EAClB,SAAS,EACT,GAAG,OACmD;IACtD,qBACE,mSAAC,4RAAwB;QACvB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,cAAc;QAC3B,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,eAAe,EACtB,SAAS,EACT,GAAG,OACmD;IACtD,qBACE,mSAAC,4RAAwB;QACvB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,0XACA;QAED,GAAG,KAAK;kBAET,cAAA,mSAAC,iSAA6B;YAC5B,aAAU;YACV,WAAU;sBAEV,cAAA,mSAAC,+SAAU;gBAAC,WAAU;;;;;;;;;;;;;;;;AAI9B;MArBS"}},
    {"offset": {"line": 804, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/lib/utils/currency.ts"],"sourcesContent":["/**\r\n * Format a number as South African Rand (ZAR) currency\r\n * @param amount - The amount to format\r\n * @param options - Optional formatting options\r\n * @returns Formatted currency string (e.g., \"R 1,234,567.00\")\r\n */\r\nexport function formatZAR(\r\n  amount: number | string,\r\n  options?: {\r\n    minimumFractionDigits?: number\r\n    maximumFractionDigits?: number\r\n    showSymbol?: boolean\r\n  },\r\n): string {\r\n  const numAmount = typeof amount === \"string\" ? Number.parseFloat(amount.replace(/[^0-9.-]/g, \"\")) : amount\r\n\r\n  if (isNaN(numAmount)) {\r\n    return \"R 0\"\r\n  }\r\n\r\n  const formatted = new Intl.NumberFormat(\"en-ZA\", {\r\n    style: \"currency\",\r\n    currency: \"ZAR\",\r\n    minimumFractionDigits: options?.minimumFractionDigits ?? 0,\r\n    maximumFractionDigits: options?.maximumFractionDigits ?? 2,\r\n  }).format(numAmount)\r\n\r\n  // Intl.NumberFormat returns \"ZAR 1,234\" or \"R1,234\" depending on locale\r\n  // We want consistent \"R 1,234\" format\r\n  return formatted.replace(/ZAR\\s?/, \"R \").replace(/R(\\d)/, \"R $1\")\r\n}\r\n\r\n/**\r\n * Parse a ZAR currency string to a number\r\n * @param value - Currency string (e.g., \"R 1,234.56\" or \"1234.56\")\r\n * @returns Parsed number\r\n */\r\nexport function parseZAR(value: string): number {\r\n  const cleaned = value.replace(/[^0-9.-]/g, \"\")\r\n  return Number.parseFloat(cleaned) || 0\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;;CAKC;;;;;;AACM,SAAS,UACd,MAAuB,EACvB,OAIC;IAED,MAAM,YAAY,OAAO,WAAW,WAAW,OAAO,UAAU,CAAC,OAAO,OAAO,CAAC,aAAa,OAAO;IAEpG,IAAI,MAAM,YAAY;QACpB,OAAO;IACT;IAEA,MAAM,YAAY,IAAI,KAAK,YAAY,CAAC,SAAS;QAC/C,OAAO;QACP,UAAU;QACV,uBAAuB,SAAS,yBAAyB;QACzD,uBAAuB,SAAS,yBAAyB;IAC3D,GAAG,MAAM,CAAC;IAEV,wEAAwE;IACxE,sCAAsC;IACtC,OAAO,UAAU,OAAO,CAAC,UAAU,MAAM,OAAO,CAAC,SAAS;AAC5D;AAOO,SAAS,SAAS,KAAa;IACpC,MAAM,UAAU,MAAM,OAAO,CAAC,aAAa;IAC3C,OAAO,OAAO,UAAU,CAAC,YAAY;AACvC"}},
    {"offset": {"line": 841, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/app/actions/tender-actions.ts"],"sourcesContent":["\"use server\"\r\n\r\nimport { createClient } from \"@/lib/supabase/server\"\r\nimport { revalidatePath } from \"next/cache\"\r\nimport { put } from \"@vercel/blob\"\r\n\r\nexport interface TenderDocument {\r\n  id?: string\r\n  title: string\r\n  url: string\r\n  documentType?: string\r\n  format?: string\r\n  description?: string\r\n}\r\n\r\nexport interface TenderData {\r\n  tenderId: string\r\n  title: string\r\n  organization: string\r\n  publishDate?: string\r\n  closeDate?: string\r\n  value?: string\r\n  category?: string\r\n  description?: string\r\n  url?: string\r\n  documents?: TenderDocument[] // Add documents array\r\n}\r\n\r\nexport async function addTenderToUser(tenderData: TenderData) {\r\n  const supabase = await createClient()\r\n\r\n  // Get current user\r\n  const {\r\n    data: { user },\r\n    error: userError,\r\n  } = await supabase.auth.getUser()\r\n\r\n  if (userError || !user) {\r\n    return { success: false, error: \"Not authenticated\" }\r\n  }\r\n\r\n  // Insert tender\r\n  const { data, error } = await supabase\r\n    .from(\"user_tenders\")\r\n    .insert({\r\n      user_id: user.id,\r\n      tender_id: tenderData.tenderId,\r\n      title: tenderData.title,\r\n      organization: tenderData.organization,\r\n      publish_date: tenderData.publishDate,\r\n      close_date: tenderData.closeDate,\r\n      value: tenderData.value,\r\n      category: tenderData.category,\r\n      description: tenderData.description,\r\n      url: tenderData.url,\r\n      status: \"draft\",\r\n    })\r\n    .select()\r\n    .single()\r\n\r\n  if (error) {\r\n    // Check if it's a duplicate\r\n    if (error.code === \"23505\") {\r\n      return { success: false, error: \"Tender already added\" }\r\n    }\r\n    console.error(\"[v0] Error adding tender:\", error)\r\n    return { success: false, error: \"Failed to add tender\" }\r\n  }\r\n\r\n  if (tenderData.documents && tenderData.documents.length > 0 && data) {\r\n    console.log(\"[v0] Adding\", tenderData.documents.length, \"documents to tender\", data.id)\r\n    console.log(\"[v0] Document data:\", JSON.stringify(tenderData.documents, null, 2))\r\n\r\n    const documentsToInsert = tenderData.documents.map((doc) => ({\r\n      user_tender_id: data.id, // Changed from tender_id\r\n      user_id: user.id,\r\n      file_name: doc.title, // Changed from name\r\n      storage_path: doc.url, // Changed from file_url - external URLs stored as storage_path\r\n      file_type: doc.format || \"application/pdf\",\r\n      file_size: 0, // Unknown size for external documents\r\n      // Removed document_type and description as they don't exist in schema\r\n    }))\r\n\r\n    console.log(\"[v0] Inserting documents:\", JSON.stringify(documentsToInsert, null, 2))\r\n\r\n    const { data: insertedDocs, error: docsError } = await supabase\r\n      .from(\"tender_documents\")\r\n      .insert(documentsToInsert)\r\n      .select()\r\n\r\n    if (docsError) {\r\n      console.error(\"[v0] Error adding documents:\", docsError)\r\n      console.error(\"[v0] Error details:\", JSON.stringify(docsError, null, 2))\r\n      // Don't fail the whole operation if documents fail, just log it\r\n    } else {\r\n      console.log(\"[v0] Successfully added\", insertedDocs?.length || 0, \"documents\")\r\n      console.log(\r\n        \"[v0] Inserted document IDs:\",\r\n        insertedDocs?.map((d) => d.id),\r\n      )\r\n    }\r\n  } else {\r\n    console.log(\"[v0] No documents to add for this tender\")\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/tenders\")\r\n  return { success: true, data }\r\n}\r\n\r\nexport async function toggleTenderPin(tenderId: string, isPinned: boolean) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const { error } = await supabase\r\n    .from(\"user_tenders\")\r\n    .update({ is_pinned: isPinned })\r\n    .eq(\"id\", tenderId)\r\n    .eq(\"user_id\", user.id)\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error toggling pin:\", error)\r\n    return { success: false, error: \"Failed to update tender\" }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/tenders\")\r\n  revalidatePath(\"/dashboard/search\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function toggleTenderFavourite(tenderId: string, isFavourited: boolean) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const { error } = await supabase\r\n    .from(\"user_tenders\")\r\n    .update({ is_favourited: isFavourited })\r\n    .eq(\"id\", tenderId)\r\n    .eq(\"user_id\", user.id)\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error toggling favourite:\", error)\r\n    return { success: false, error: \"Failed to update tender\" }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/tenders\")\r\n  revalidatePath(\"/dashboard/search\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function toggleTenderWishlist(tenderId: string, isWishlisted: boolean) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const { error } = await supabase\r\n    .from(\"user_tenders\")\r\n    .update({ is_wishlisted: isWishlisted })\r\n    .eq(\"id\", tenderId)\r\n    .eq(\"user_id\", user.id)\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error toggling wishlist:\", error)\r\n    return { success: false, error: \"Failed to update tender\" }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/tenders\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function getUserTenders() {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\", tenders: [] }\r\n\r\n  // Fetch all tenders from user_tenders (both scraped and custom)\r\n  const { data: tenders, error } = await supabase\r\n    .from(\"user_tenders\")\r\n    .select(\"*\")\r\n    .eq(\"user_id\", user.id)\r\n    .order(\"created_at\", { ascending: false })\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error fetching tenders:\", error)\r\n    return { success: false, error: \"Failed to fetch tenders\", tenders: [] }\r\n  }\r\n\r\n  // Normalize data for frontend\r\n  const normalizedTenders = (tenders || []).map((tender) => ({\r\n    id: tender.id,\r\n    tender_id: tender.tender_id || `custom-${tender.id}`, // Fallback for custom tenders\r\n    title: tender.title,\r\n    organization: tender.organization,\r\n    status: tender.status,\r\n    close_date: tender.close_date || tender.deadline, // Use deadline if close_date is null\r\n    value: tender.value,\r\n    category: tender.category,\r\n    is_pinned: tender.is_pinned || false,\r\n    is_favourited: tender.is_favourited || false,\r\n    is_wishlisted: tender.is_wishlisted || false,\r\n    created_at: tender.created_at,\r\n    tender_type: tender.tender_type || \"scraped\", // Default to scraped if null\r\n    location: tender.location,\r\n  }))\r\n\r\n  return { success: true, tenders: normalizedTenders }\r\n}\r\n\r\nexport async function deleteTender(tenderId: string, tenderType?: \"scraped\" | \"custom\") {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  // Simply delete from user_tenders table\r\n  const { error } = await supabase.from(\"user_tenders\").delete().eq(\"id\", tenderId).eq(\"user_id\", user.id)\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error deleting tender:\", error)\r\n    return { success: false, error: \"Failed to delete tender\" }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/tenders\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function saveScrapedTenderToUser(scrapedTender: {\r\n  id: string\r\n  title: string\r\n  source_name: string\r\n  description?: string\r\n  publish_date?: string\r\n  close_date?: string\r\n  estimated_value?: string\r\n  category?: string\r\n  tender_url?: string\r\n}) {\r\n  const supabase = await createClient()\r\n\r\n  // Get current user\r\n  const {\r\n    data: { user },\r\n    error: userError,\r\n  } = await supabase.auth.getUser()\r\n\r\n  if (userError || !user) {\r\n    return { success: false, error: \"Not authenticated\" }\r\n  }\r\n\r\n  // Check if tender already exists for this user\r\n  const { data: existing } = await supabase\r\n    .from(\"user_tenders\")\r\n    .select(\"id, status\")\r\n    .eq(\"user_id\", user.id)\r\n    .eq(\"tender_id\", scrapedTender.id)\r\n    .single()\r\n\r\n  if (existing) {\r\n    // If already exists and is draft, update to in-progress\r\n    if (existing.status === \"draft\") {\r\n      const { error: updateError } = await supabase\r\n        .from(\"user_tenders\")\r\n        .update({ status: \"in-progress\" })\r\n        .eq(\"id\", existing.id)\r\n\r\n      if (updateError) {\r\n        console.error(\"[v0] Error updating tender status:\", updateError)\r\n        return { success: false, error: \"Failed to update tender status\" }\r\n      }\r\n\r\n      revalidatePath(\"/dashboard/tenders\")\r\n      return { success: true, message: \"Tender status updated to in-progress\", isNew: false }\r\n    }\r\n\r\n    // Already exists and not draft, no need to update\r\n    return { success: true, message: \"Tender already in your list\", isNew: false }\r\n  }\r\n\r\n  // Insert new tender with in-progress status\r\n  const { data, error } = await supabase\r\n    .from(\"user_tenders\")\r\n    .insert({\r\n      user_id: user.id,\r\n      tender_id: scrapedTender.id,\r\n      title: scrapedTender.title,\r\n      organization: scrapedTender.source_name,\r\n      publish_date: scrapedTender.publish_date,\r\n      close_date: scrapedTender.close_date,\r\n      value: scrapedTender.estimated_value,\r\n      category: scrapedTender.category,\r\n      description: scrapedTender.description,\r\n      url: scrapedTender.tender_url,\r\n      status: \"in-progress\",\r\n      tender_type: \"scraped\",\r\n    })\r\n    .select()\r\n    .single()\r\n\r\n  if (error) {\r\n    console.error(\"[v0] Error saving tender:\", error)\r\n    return { success: false, error: \"Failed to save tender\" }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/tenders\")\r\n  return { success: true, message: \"Tender saved to My Tenders\", isNew: true, data }\r\n}\r\n\r\nexport async function createCustomTender(tenderData: {\r\n  title: string\r\n  organization: string\r\n  deadline: string\r\n  value: string\r\n  description: string\r\n  category?: string\r\n  location?: string\r\n  uploadedFile?: File\r\n  analysis?: any\r\n}) {\r\n  console.log(\"[v0] createCustomTender called with data:\", {\r\n    title: tenderData.title,\r\n    organization: tenderData.organization,\r\n    deadline: tenderData.deadline,\r\n    hasFile: !!tenderData.uploadedFile,\r\n    hasAnalysis: !!tenderData.analysis,\r\n  })\r\n\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n    error: userError,\r\n  } = await supabase.auth.getUser()\r\n\r\n  if (userError || !user) {\r\n    console.error(\"[v0] Auth error:\", userError)\r\n    return { success: false, error: \"Not authenticated\" }\r\n  }\r\n\r\n  console.log(\"[v0] User authenticated:\", user.id)\r\n\r\n  try {\r\n    console.log(\"[v0] Creating custom tender record...\")\r\n\r\n    const { data: customTender, error: customTenderError } = await supabase\r\n      .from(\"user_tenders\")\r\n      .insert({\r\n        user_id: user.id,\r\n        title: tenderData.title,\r\n        organization: tenderData.organization,\r\n        deadline: tenderData.deadline,\r\n        value: tenderData.value,\r\n        category: tenderData.category || \"Custom\",\r\n        description: tenderData.description,\r\n        location: tenderData.location,\r\n        status: \"in-progress\",\r\n        tender_type: \"custom\",\r\n      })\r\n      .select()\r\n      .single()\r\n\r\n    if (customTenderError) {\r\n      console.error(\"[v0] Error creating custom tender:\", customTenderError)\r\n      return { success: false, error: \"Failed to create tender: \" + customTenderError.message }\r\n    }\r\n\r\n    console.log(\"[v0] Custom tender created successfully:\", customTender.id)\r\n\r\n    let documentSaved = false\r\n    let documentError: string | null = null\r\n\r\n    if (tenderData.uploadedFile) {\r\n      console.log(\"[v0] Uploading file to blob storage...\")\r\n      console.log(\"[v0] File details:\", {\r\n        name: tenderData.uploadedFile.name,\r\n        type: tenderData.uploadedFile.type,\r\n        size: tenderData.uploadedFile.size,\r\n      })\r\n\r\n      try {\r\n        // Upload path includes 'custom-tenders' prefix still, which is fine\r\n        const blob = await put(\r\n          `custom-tenders/${customTender.id}/${tenderData.uploadedFile.name}`,\r\n          tenderData.uploadedFile,\r\n          {\r\n            access: \"public\",\r\n          },\r\n        )\r\n\r\n        console.log(\"[v0] File uploaded to blob:\", blob.url)\r\n\r\n        const documentData = {\r\n          tender_id: customTender.id,\r\n          file_name: tenderData.uploadedFile.name,\r\n          file_type: tenderData.uploadedFile.type,\r\n          file_size: tenderData.uploadedFile.size,\r\n          blob_url: blob.url,\r\n          storage_path: blob.url,\r\n        }\r\n\r\n        console.log(\"[v0] Inserting document with data:\", JSON.stringify(documentData, null, 2))\r\n\r\n        const { data: insertedDoc, error: docError } = await supabase\r\n          .from(\"user_tender_documents\") // Updated table name\r\n          .insert(documentData)\r\n          .select()\r\n          .single()\r\n\r\n        if (docError) {\r\n          console.error(\"[v0] Error saving document reference:\", docError)\r\n          console.error(\"[v0] Error code:\", docError.code)\r\n          console.error(\"[v0] Error message:\", docError.message)\r\n          documentError = `Failed to save document: ${docError.message} (Code: ${docError.code})`\r\n        } else {\r\n          console.log(\"[v0] Document reference saved successfully:\", insertedDoc.id)\r\n          documentSaved = true\r\n        }\r\n      } catch (uploadError) {\r\n        console.error(\"[v0] Error uploading file:\", uploadError)\r\n        documentError = `Failed to upload file: ${uploadError instanceof Error ? uploadError.message : \"Unknown error\"}`\r\n      }\r\n    } else {\r\n      console.log(\"[v0] No file to upload\")\r\n    }\r\n\r\n    let analysisSaved = false\r\n    let analysisError: string | null = null\r\n\r\n    if (tenderData.analysis) {\r\n      console.log(\"[v0] Saving analysis data...\")\r\n\r\n      const analysisData = {\r\n        tender_id: customTender.id,\r\n        analysis_data: tenderData.analysis,\r\n      }\r\n\r\n      console.log(\"[v0] Inserting analysis with tender_id:\", customTender.id)\r\n\r\n      const { data: insertedAnalysis, error: analysisErr } = await supabase\r\n        .from(\"user_tender_analysis\") // Updated table name\r\n        .insert(analysisData)\r\n        .select()\r\n        .single()\r\n\r\n      if (analysisErr) {\r\n        console.error(\"[v0] Error saving analysis:\", analysisErr)\r\n        analysisError = `Failed to save analysis: ${analysisErr.message} (Code: ${analysisErr.code})`\r\n      } else {\r\n        console.log(\"[v0] Analysis saved successfully:\", insertedAnalysis.id)\r\n        analysisSaved = true\r\n      }\r\n    } else {\r\n      console.log(\"[v0] No analysis to save\")\r\n    }\r\n\r\n    console.log(\"[v0] Tender creation completed\")\r\n    revalidatePath(\"/dashboard/tenders\")\r\n    revalidatePath(\"/dashboard/custom-tenders\")\r\n\r\n    return {\r\n      success: true,\r\n      data: customTender,\r\n      tenderId: customTender.id,\r\n      documentSaved,\r\n      documentError,\r\n      analysisSaved,\r\n      analysisError,\r\n    }\r\n  } catch (error) {\r\n    console.error(\"[v0] Error in createCustomTender:\", error)\r\n    return { success: false, error: \"Failed to create tender: \" + (error as Error).message }\r\n  }\r\n}\r\n\r\nexport async function getDashboardStats() {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  try {\r\n    // Get all tenders count for this user\r\n    const { count: totalTenders } = await supabase\r\n      .from(\"user_tenders\")\r\n      .select(\"*\", { count: \"exact\", head: true })\r\n      .eq(\"user_id\", user.id)\r\n\r\n    // Get analyzed tenders count (where we have analysis data)\r\n    // RLS ensures we only see our own analyses\r\n    const { count: analyzedCount } = await supabase\r\n      .from(\"user_tender_analysis\")\r\n      .select(\"tender_id\", { count: \"exact\", head: true })\r\n    // Wait, user_tender_analysis doesn't have user_id in my migration?\r\n    // Let's check migration script...\r\n    // user_custom_tender_analysis didn't have user_id in the original schema I saw in 031?\r\n    // L131: WHERE id = tender_id AND user_id = auth.uid() -> checking parent tender.\r\n    // So user_tender_analysis table assumes linking to user_tenders.\r\n    // query:\r\n    // select count(*) from user_tender_analysis join user_tenders on ... where user_tenders.user_id = ...\r\n\r\n    // Alternative: Just query user_tenders where tender_type='custom' (proxy for analyzed?)\r\n    // Or just fetching recent activity from unified table.\r\n\r\n    // Get recent activity (last 5 tenders)\r\n    const { data: recentTenders } = await supabase\r\n      .from(\"user_tenders\")\r\n      .select(\"*\")\r\n      .eq(\"user_id\", user.id)\r\n      .order(\"created_at\", { ascending: false })\r\n      .limit(5)\r\n\r\n    const recentActivity = (recentTenders || []).map((tender) => ({\r\n      id: tender.id,\r\n      title: tender.title,\r\n      organization: tender.organization,\r\n      type: tender.tender_type === \"custom\" ? (\"analyzed\" as const) : (\"saved\" as const),\r\n      created_at: tender.created_at,\r\n    }))\r\n\r\n    // Get tenders closing soon (next 7 days)\r\n    const sevenDaysFromNow = new Date()\r\n    sevenDaysFromNow.setDate(sevenDaysFromNow.getDate() + 7)\r\n\r\n    // Check both close_date (scraped) and deadline (custom, if parsed?)\r\n    // For now, relying on close_date. My migration copied deadline to close_date if I recall?\r\n    // No, I copied close_date to close_date. Custom tenders might rely on 'deadline' text column.\r\n    // This is tricky for sorting. Ideally we parse deadline to close_date.\r\n    // Assuming close_date is populated for meaningful deadlines.\r\n\r\n    const { data: closingSoon } = await supabase\r\n      .from(\"user_tenders\")\r\n      .select(\"*\")\r\n      .eq(\"user_id\", user.id)\r\n      .not(\"close_date\", \"is\", null)\r\n      .gte(\"close_date\", new Date().toISOString())\r\n      .lte(\"close_date\", sevenDaysFromNow.toISOString())\r\n      .order(\"close_date\", { ascending: true })\r\n      .limit(5)\r\n\r\n    return {\r\n      success: true,\r\n      stats: {\r\n        totalTenders: totalTenders || 0,\r\n        analyzedTenders: analyzedCount || 0, // This might be inaccurate without join, but acceptable for now or I can do a join query if needed.\r\n        // Actually, let's try to get substantial analyzed count if possible.\r\n        // For now 0 is fine or just count custom tenders?\r\n        closingSoon: closingSoon?.length || 0,\r\n        recentActivity,\r\n        upcomingDeadlines: closingSoon || [],\r\n      },\r\n    }\r\n  } catch (error) {\r\n    console.error(\"[v0] Error fetching dashboard stats:\", error)\r\n    return { success: false, error: \"Failed to fetch dashboard statistics\" }\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;IAiPsB,0BAAA,WAAA,GAAA,IAAA,wVAAA,EAAA,8CAAA,6UAAA,EAAA,KAAA,GAAA,mVAAA,EAAA"}},
    {"offset": {"line": 856, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/hooks/use-toast.ts"],"sourcesContent":["'use client'\r\n\r\n// Inspired by react-hot-toast library\r\nimport * as React from 'react'\r\n\r\nimport type { ToastActionElement, ToastProps } from '@/components/ui/toast'\r\n\r\nconst TOAST_LIMIT = 1\r\nconst TOAST_REMOVE_DELAY = 1000000\r\n\r\ntype ToasterToast = ToastProps & {\r\n  id: string\r\n  title?: React.ReactNode\r\n  description?: React.ReactNode\r\n  action?: ToastActionElement\r\n}\r\n\r\nconst actionTypes = {\r\n  ADD_TOAST: 'ADD_TOAST',\r\n  UPDATE_TOAST: 'UPDATE_TOAST',\r\n  DISMISS_TOAST: 'DISMISS_TOAST',\r\n  REMOVE_TOAST: 'REMOVE_TOAST',\r\n} as const\r\n\r\nlet count = 0\r\n\r\nfunction genId() {\r\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\r\n  return count.toString()\r\n}\r\n\r\ntype ActionType = typeof actionTypes\r\n\r\ntype Action =\r\n  | {\r\n      type: ActionType['ADD_TOAST']\r\n      toast: ToasterToast\r\n    }\r\n  | {\r\n      type: ActionType['UPDATE_TOAST']\r\n      toast: Partial<ToasterToast>\r\n    }\r\n  | {\r\n      type: ActionType['DISMISS_TOAST']\r\n      toastId?: ToasterToast['id']\r\n    }\r\n  | {\r\n      type: ActionType['REMOVE_TOAST']\r\n      toastId?: ToasterToast['id']\r\n    }\r\n\r\ninterface State {\r\n  toasts: ToasterToast[]\r\n}\r\n\r\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\r\n\r\nconst addToRemoveQueue = (toastId: string) => {\r\n  if (toastTimeouts.has(toastId)) {\r\n    return\r\n  }\r\n\r\n  const timeout = setTimeout(() => {\r\n    toastTimeouts.delete(toastId)\r\n    dispatch({\r\n      type: 'REMOVE_TOAST',\r\n      toastId: toastId,\r\n    })\r\n  }, TOAST_REMOVE_DELAY)\r\n\r\n  toastTimeouts.set(toastId, timeout)\r\n}\r\n\r\nexport const reducer = (state: State, action: Action): State => {\r\n  switch (action.type) {\r\n    case 'ADD_TOAST':\r\n      return {\r\n        ...state,\r\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\r\n      }\r\n\r\n    case 'UPDATE_TOAST':\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.map((t) =>\r\n          t.id === action.toast.id ? { ...t, ...action.toast } : t,\r\n        ),\r\n      }\r\n\r\n    case 'DISMISS_TOAST': {\r\n      const { toastId } = action\r\n\r\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\r\n      // but I'll keep it here for simplicity\r\n      if (toastId) {\r\n        addToRemoveQueue(toastId)\r\n      } else {\r\n        state.toasts.forEach((toast) => {\r\n          addToRemoveQueue(toast.id)\r\n        })\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.map((t) =>\r\n          t.id === toastId || toastId === undefined\r\n            ? {\r\n                ...t,\r\n                open: false,\r\n              }\r\n            : t,\r\n        ),\r\n      }\r\n    }\r\n    case 'REMOVE_TOAST':\r\n      if (action.toastId === undefined) {\r\n        return {\r\n          ...state,\r\n          toasts: [],\r\n        }\r\n      }\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\r\n      }\r\n  }\r\n}\r\n\r\nconst listeners: Array<(state: State) => void> = []\r\n\r\nlet memoryState: State = { toasts: [] }\r\n\r\nfunction dispatch(action: Action) {\r\n  memoryState = reducer(memoryState, action)\r\n  listeners.forEach((listener) => {\r\n    listener(memoryState)\r\n  })\r\n}\r\n\r\ntype Toast = Omit<ToasterToast, 'id'>\r\n\r\nfunction toast({ ...props }: Toast) {\r\n  const id = genId()\r\n\r\n  const update = (props: ToasterToast) =>\r\n    dispatch({\r\n      type: 'UPDATE_TOAST',\r\n      toast: { ...props, id },\r\n    })\r\n  const dismiss = () => dispatch({ type: 'DISMISS_TOAST', toastId: id })\r\n\r\n  dispatch({\r\n    type: 'ADD_TOAST',\r\n    toast: {\r\n      ...props,\r\n      id,\r\n      open: true,\r\n      onOpenChange: (open) => {\r\n        if (!open) dismiss()\r\n      },\r\n    },\r\n  })\r\n\r\n  return {\r\n    id: id,\r\n    dismiss,\r\n    update,\r\n  }\r\n}\r\n\r\nfunction useToast() {\r\n  const [state, setState] = React.useState<State>(memoryState)\r\n\r\n  React.useEffect(() => {\r\n    listeners.push(setState)\r\n    return () => {\r\n      const index = listeners.indexOf(setState)\r\n      if (index > -1) {\r\n        listeners.splice(index, 1)\r\n      }\r\n    }\r\n  }, [state])\r\n\r\n  return {\r\n    ...state,\r\n    toast,\r\n    dismiss: (toastId?: string) => dispatch({ type: 'DISMISS_TOAST', toastId }),\r\n  }\r\n}\r\n\r\nexport { useToast, toast }\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1023, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/components/ui/progress.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport * as ProgressPrimitive from '@radix-ui/react-progress'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Progress({\r\n  className,\r\n  value,\r\n  ...props\r\n}: React.ComponentProps<typeof ProgressPrimitive.Root>) {\r\n  return (\r\n    <ProgressPrimitive.Root\r\n      data-slot=\"progress\"\r\n      className={cn(\r\n        'bg-primary/20 relative h-2 w-full overflow-hidden rounded-full',\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      <ProgressPrimitive.Indicator\r\n        data-slot=\"progress-indicator\"\r\n        className=\"bg-primary h-full w-full flex-1 transition-all\"\r\n        style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\r\n      />\r\n    </ProgressPrimitive.Root>\r\n  )\r\n}\r\n\r\nexport { Progress }\r\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,SAAS,EAChB,SAAS,EACT,KAAK,EACL,GAAG,OACiD;IACpD,qBACE,mSAAC,yRAAsB;QACrB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kEACA;QAED,GAAG,KAAK;kBAET,cAAA,mSAAC,8RAA2B;YAC1B,aAAU;YACV,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIlE;KArBS"}},
    {"offset": {"line": 1067, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/components/dynamic-tender-form.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { AlertTitle } from \"@/components/ui/alert\"\r\nimport { useState, useEffect } from \"react\"\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Textarea } from \"@/components/ui/textarea\"\r\nimport { Label } from \"@/components/ui/label\"\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\r\nimport { Checkbox } from \"@/components/ui/checkbox\"\r\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\"\r\nimport { Alert, AlertDescription } from \"@/components/ui/alert\"\r\nimport {\r\n  Loader2,\r\n  Save,\r\n  CheckCircle2,\r\n  Download,\r\n  FileText,\r\n  AlertCircle,\r\n  ChevronDown,\r\n  ChevronUp,\r\n  Clock,\r\n  Percent,\r\n} from \"lucide-react\"\r\nimport { formatZAR } from \"@/lib/utils/currency\"\r\nimport { saveScrapedTenderToUser } from \"@/app/actions/tender-actions\"\r\nimport { useToast } from \"@/hooks/use-toast\"\r\nimport { Progress } from \"@/components/ui/progress\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\ninterface FormField {\r\n  id: string\r\n  label: string\r\n  type: string\r\n  required: boolean\r\n  placeholder?: string\r\n  description?: string\r\n  options?: string[]\r\n  validation?: {\r\n    min?: number\r\n    max?: number\r\n    pattern?: string\r\n    maxLength?: number\r\n  }\r\n  section?: string\r\n}\r\n\r\ninterface DynamicTenderFormProps {\r\n  tenderId: string\r\n  formFields: FormField[]\r\n  googleMapsApiKey?: string\r\n  documents?: any[]\r\n  tenderData?: {\r\n    id: string\r\n    title: string\r\n    source_name: string\r\n    description?: string\r\n    publish_date?: string\r\n    close_date?: string\r\n    estimated_value?: string\r\n    category?: string\r\n    tender_url?: string\r\n  }\r\n  onProgressChange?: (progressPercent: number, status: string) => void\r\n}\r\n\r\nexport function DynamicTenderForm({\r\n  tenderId,\r\n  formFields,\r\n  googleMapsApiKey,\r\n  documents = [],\r\n  tenderData,\r\n  onProgressChange,\r\n}: DynamicTenderFormProps) {\r\n  console.log(\"[v0]  DynamicTenderForm COMPONENT RENDERING\")\r\n  console.log(\"[v0] Tender ID:\", tenderId)\r\n  console.log(\"[v0] FormFields received:\", formFields?.length || 0, \"fields\")\r\n  console.log(\"[v0] FormFields:\", formFields)\r\n  console.log(\"[v0] Documents:\", documents?.length || 0)\r\n\r\n  const [formData, setFormData] = useState<Record<string, any>>({})\r\n  const [loading, setLoading] = useState(true)\r\n  const [saving, setSaving] = useState(false)\r\n  const [saved, setSaved] = useState(false)\r\n  const [errors, setErrors] = useState<Record<string, string>>({})\r\n  const [fillingPdf, setFillingPdf] = useState(false)\r\n  const [hasAutoSaved, setHasAutoSaved] = useState(false)\r\n  const [collapsedSections, setCollapsedSections] = useState<Set<string>>(new Set())\r\n  const [lastSaveTime, setLastSaveTime] = useState<Date | null>(null)\r\n  const [formCompletionPercent, setFormCompletionPercent] = useState(0)\r\n  const { toast } = useToast()\r\n\r\n  const isCustomTender = tenderId.length === 36 && tenderId.includes(\"-\")\r\n  const apiBasePath = isCustomTender ? `/api/custom-tenders/${tenderId}` : `/api/tenders/scraped/${tenderId}`\r\n\r\n  const availableDocuments = documents.filter(\r\n    (doc: any) => doc.document_type === \"application/pdf\" || doc.file_type === \"application/pdf\",\r\n  )\r\n\r\n  useEffect(() => {\r\n    loadSavedResponses()\r\n  }, [tenderId])\r\n\r\n  useEffect(() => {\r\n    calculateFormCompletion()\r\n  }, [formData, formFields])\r\n\r\n  const calculateFormCompletion = () => {\r\n    if (formFields.length === 0) {\r\n      setFormCompletionPercent(0)\r\n      return\r\n    }\r\n\r\n    const requiredFields = formFields.filter((f) => f.required)\r\n    const totalFields = requiredFields.length > 0 ? requiredFields.length : formFields.length\r\n    const filledFields =\r\n      requiredFields.length > 0\r\n        ? requiredFields.filter((f) => formData[f.id] && formData[f.id] !== \"\").length\r\n        : Object.keys(formData).filter((key) => formData[key] && formData[key] !== \"\").length\r\n\r\n    const percent = Math.round((filledFields / totalFields) * 100)\r\n    setFormCompletionPercent(percent)\r\n\r\n    // Update tender progress status based on form completion\r\n    let status = \"reviewing\"\r\n    if (percent >= 100) {\r\n      status = \"ready\"\r\n    } else if (percent >= 75) {\r\n      status = \"preparing\"\r\n    } else if (percent >= 50) {\r\n      status = \"planning\"\r\n    } else if (percent >= 25) {\r\n      status = \"analyzing\"\r\n    }\r\n\r\n    if (onProgressChange && percent > 0) {\r\n      onProgressChange(Math.min(percent, 95), status) // Cap at 95% until submitted\r\n    }\r\n  }\r\n\r\n  const loadSavedResponses = async () => {\r\n    try {\r\n      const response = await fetch(`${apiBasePath}/responses`)\r\n      if (response.ok) {\r\n        const { responses } = await response.json()\r\n        if (responses) {\r\n          setFormData(responses)\r\n          setLastSaveTime(new Date())\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[v0] Error loading saved responses:\", error)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleAutoSave = async () => {\r\n    if (!tenderData || hasAutoSaved) return\r\n\r\n    try {\r\n      const result = await saveScrapedTenderToUser(tenderData)\r\n      if (result.success) {\r\n        setHasAutoSaved(true)\r\n        if (result.isNew) {\r\n          toast({\r\n            title: \"Tender Saved\",\r\n            description: \"This tender has been added to 'My Tenders' with status 'In Progress'\",\r\n          })\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[v0] Error auto-saving tender:\", error)\r\n    }\r\n  }\r\n\r\n  const handleChange = (fieldId: string, value: any) => {\r\n    setFormData((prev) => ({ ...prev, [fieldId]: value }))\r\n    setErrors((prev) => ({ ...prev, [fieldId]: \"\" }))\r\n    setSaved(false)\r\n\r\n    if (Object.keys(formData).length === 0 && !hasAutoSaved) {\r\n      handleAutoSave()\r\n    }\r\n  }\r\n\r\n  const validateField = (field: FormField, value: any): string | null => {\r\n    if (field.required && (!value || value === \"\")) {\r\n      return \"This field is required\"\r\n    }\r\n\r\n    if (field.validation && value) {\r\n      if (field.type === \"number\") {\r\n        const num = Number(value)\r\n        if (field.validation.min !== undefined && num < field.validation.min) {\r\n          return `Minimum value is ${field.validation.min}`\r\n        }\r\n        if (field.validation.max !== undefined && num > field.validation.max) {\r\n          return `Maximum value is ${field.validation.max}`\r\n        }\r\n      }\r\n\r\n      if (field.type === \"text\" || field.type === \"textarea\") {\r\n        if (field.validation.maxLength && value.length > field.validation.maxLength) {\r\n          return `Maximum length is ${field.validation.maxLength} characters`\r\n        }\r\n        if (field.validation.pattern && !new RegExp(field.validation.pattern).test(value)) {\r\n          return `Invalid format`\r\n        }\r\n      }\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  const handleSave = async () => {\r\n    const newErrors: Record<string, string> = {}\r\n\r\n    // Validate all required fields\r\n    formFields.forEach((field) => {\r\n      const error = validateField(field, formData[field.id])\r\n      if (error) {\r\n        newErrors[field.id] = error\r\n      }\r\n    })\r\n\r\n    if (Object.keys(newErrors).length > 0) {\r\n      setErrors(newErrors)\r\n      toast({\r\n        title: \"Validation Error\",\r\n        description: `Please fix ${Object.keys(newErrors).length} error(s) before saving`,\r\n        variant: \"destructive\",\r\n      })\r\n      return\r\n    }\r\n\r\n    setSaving(true)\r\n    try {\r\n      const response = await fetch(`${apiBasePath}/responses`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ responses: formData }),\r\n      })\r\n\r\n      if (response.ok) {\r\n        setSaved(true)\r\n        setLastSaveTime(new Date())\r\n        setTimeout(() => setSaved(false), 3000)\r\n        toast({\r\n          title: \"Saved\",\r\n          description: \"Your responses have been saved successfully\",\r\n        })\r\n\r\n        // Update progress log\r\n        if (isCustomTender) {\r\n          await fetch(`/api/strategist/progress`, {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({\r\n              tenderId,\r\n              tenderType: \"custom\",\r\n              status: formCompletionPercent >= 100 ? \"ready\" : \"preparing\",\r\n              progressPercent: Math.min(formCompletionPercent, 95),\r\n              milestone: `Form ${formCompletionPercent}% complete`,\r\n              notes: `User saved form responses - ${Object.keys(formData).length} fields filled`,\r\n            }),\r\n          })\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[v0] Error saving responses:\", error)\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to save responses\",\r\n        variant: \"destructive\",\r\n      })\r\n    } finally {\r\n      setSaving(false)\r\n    }\r\n  }\r\n\r\n  const handlePreviewFilledPdf = async (documentId: string) => {\r\n    console.log(\"[v0]  PREVIEW BUTTON CLICKED - Function starting...\")\r\n    console.log(\"[v0] Current timestamp:\", new Date().toISOString())\r\n\r\n    setFillingPdf(true)\r\n    try {\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] PREVIEW FILLED PDF REQUEST\")\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] Document ID:\", documentId)\r\n      console.log(\"[v0] Form data being sent:\", formData)\r\n      console.log(\"[v0] Number of filled fields:\", Object.keys(formData).length)\r\n      console.log(\"[v0] Field IDs:\", Object.keys(formData))\r\n\r\n      if (Object.keys(formData).length === 0) {\r\n        console.log(\"[v0]  WARNING: No form data to fill! \")\r\n        console.log(\"[v0] You haven't filled any fields yet. The PDF will open but will be empty.\")\r\n      }\r\n\r\n      console.log(\"[v0] Making fetch request to:\", `${apiBasePath}/fill-pdf`)\r\n      const response = await fetch(`${apiBasePath}/fill-pdf`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ documentId }),\r\n      })\r\n\r\n      console.log(\"[v0]  Fetch completed\")\r\n      console.log(\"[v0] Response status:\", response.status)\r\n      console.log(\"[v0] Response OK:\", response.ok)\r\n      console.log(\"[v0] Response headers:\")\r\n      console.log(\"[v0]   - PDF Fields Total:\", response.headers.get(\"X-PDF-Fields-Total\"))\r\n      console.log(\"[v0]   - Fields Filled:\", response.headers.get(\"X-Fields-Filled\"))\r\n      console.log(\"[v0]   - Responses Total:\", response.headers.get(\"X-Responses-Total\"))\r\n      console.log(\"[v0]   - Fill Success Rate:\", response.headers.get(\"X-Fill-Success-Rate\") + \"%\")\r\n\r\n      const pdfFieldsTotal = Number.parseInt(response.headers.get(\"X-PDF-Fields-Total\") || \"0\")\r\n      const fieldsFilled = Number.parseInt(response.headers.get(\"X-Fields-Filled\") || \"0\")\r\n      const responsesTotal = Number.parseInt(response.headers.get(\"X-Responses-Total\") || \"0\")\r\n      const successRate = Number.parseFloat(response.headers.get(\"X-Fill-Success-Rate\") || \"0\")\r\n\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] FILL RESULTS:\")\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] PDF has\", pdfFieldsTotal, \"interactive form fields\")\r\n      console.log(\"[v0] You filled\", responsesTotal, \"form fields\")\r\n      console.log(\"[v0] Successfully matched and filled\", fieldsFilled, \"fields\")\r\n      console.log(\"[v0] Success rate:\", successRate.toFixed(1) + \"%\")\r\n      console.log(\"[v0] ========================================\")\r\n\r\n      if (pdfFieldsTotal === 0) {\r\n        console.log(\"[v0]  WARNING: This PDF has NO interactive form fields! \")\r\n        console.log(\"[v0] This is a static PDF document. The fields cannot be filled automatically.\")\r\n        console.log(\"[v0] You may need to manually fill this PDF or use a different document.\")\r\n        toast({\r\n          title: \"Static PDF Detected\",\r\n          description:\r\n            \"This PDF has no fillable fields. Click 'Generate Response PDF' below to create a new document with your responses.\",\r\n          variant: \"destructive\",\r\n        })\r\n      } else if (fieldsFilled === 0 && responsesTotal > 0) {\r\n        console.log(\"[v0]  WARNING: No fields were filled! \")\r\n        console.log(\"[v0] The form field names don't match the PDF field names.\")\r\n        console.log(\"[v0] Check the server logs for detailed field matching information.\")\r\n        toast({\r\n          title: \"No Fields Matched\",\r\n          description:\r\n            \"The form field names don't match the PDF field names. The document will open, but your responses couldn't be filled in automatically.\",\r\n          variant: \"destructive\",\r\n        })\r\n      } else if (successRate < 50) {\r\n        console.log(\"[v0]  Low success rate - many fields didn't match\")\r\n        toast({\r\n          title: \"Partial Fill\",\r\n          description: `Only ${fieldsFilled} out of ${responsesTotal} fields were filled (${successRate.toFixed(1)}%). Some field names may not match.`,\r\n        })\r\n      } else if (fieldsFilled > 0) {\r\n        toast({\r\n          title: \"PDF Filled Successfully\",\r\n          description: `${fieldsFilled} field${fieldsFilled === 1 ? \"\" : \"s\"} filled in the PDF`,\r\n        })\r\n      }\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || \"Failed to fill PDF\")\r\n      }\r\n\r\n      console.log(\"[v0] Converting response to blob...\")\r\n      const blob = await response.blob()\r\n      console.log(\"[v0] Blob size:\", blob.size, \"bytes\")\r\n      console.log(\"[v0] Blob type:\", blob.type)\r\n\r\n      const url = window.URL.createObjectURL(blob)\r\n      console.log(\"[v0] Opening PDF in new window...\")\r\n      window.open(url, \"_blank\")\r\n\r\n      setTimeout(() => window.URL.revokeObjectURL(url), 1000)\r\n      console.log(\"[v0]  Preview completed successfully\")\r\n    } catch (error: any) {\r\n      console.error(\"[v0]  ERROR in handlePreviewFilledPdf:\")\r\n      console.error(\"[v0] Error type:\", error?.constructor?.name)\r\n      console.error(\"[v0] Error message:\", error?.message)\r\n      console.error(\"[v0] Full error:\", error)\r\n      toast({\r\n        title: \"Error\",\r\n        description: error.message || \"Failed to preview filled PDF\",\r\n        variant: \"destructive\",\r\n      })\r\n    } finally {\r\n      console.log(\"[v0]  PREVIEW FUNCTION ENDING\")\r\n      setFillingPdf(false)\r\n    }\r\n  }\r\n\r\n  const handleDownloadFilledPdf = async (documentId: string) => {\r\n    setFillingPdf(true)\r\n    try {\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] DOWNLOAD FILLED PDF REQUEST\")\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] Document ID:\", documentId)\r\n      console.log(\"[v0] Form data being sent:\", formData)\r\n      console.log(\"[v0] Number of filled fields:\", Object.keys(formData).length)\r\n\r\n      const response = await fetch(`${apiBasePath}/fill-pdf`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ documentId }),\r\n      })\r\n\r\n      const pdfFieldsTotal = Number.parseInt(response.headers.get(\"X-PDF-Fields-Total\") || \"0\")\r\n      const fieldsFilled = Number.parseInt(response.headers.get(\"X-Fields-Filled\") || \"0\")\r\n      const responsesTotal = Number.parseInt(response.headers.get(\"X-Responses-Total\") || \"0\")\r\n      const successRate = Number.parseFloat(response.headers.get(\"X-Fill-Success-Rate\") || \"0\")\r\n\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] FILL RESULTS:\")\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] PDF Fields:\", pdfFieldsTotal)\r\n      console.log(\"[v0] Responses:\", responsesTotal)\r\n      console.log(\"[v0] Filled:\", fieldsFilled)\r\n      console.log(\"[v0] Success Rate:\", successRate.toFixed(1) + \"%\")\r\n      console.log(\"[v0] ========================================\")\r\n\r\n      if (pdfFieldsTotal === 0) {\r\n        toast({\r\n          title: \"PDF Has No Form Fields\",\r\n          description:\r\n            \"This PDF doesn't have interactive form fields. The document will download, but your responses cannot be automatically filled in.\",\r\n          variant: \"destructive\",\r\n        })\r\n      } else if (fieldsFilled === 0 && responsesTotal > 0) {\r\n        toast({\r\n          title: \"No Fields Matched\",\r\n          description: \"The form field names don't match the PDF field names. Check the console for details.\",\r\n          variant: \"destructive\",\r\n        })\r\n      } else if (fieldsFilled > 0) {\r\n        toast({\r\n          title: \"Success\",\r\n          description: `Filled PDF downloaded with ${fieldsFilled} field${fieldsFilled === 1 ? \"\" : \"s\"} filled`,\r\n        })\r\n      }\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || \"Failed to fill PDF\")\r\n      }\r\n\r\n      const blob = await response.blob()\r\n      const url = window.URL.createObjectURL(blob)\r\n      const a = document.createElement(\"a\")\r\n      a.href = url\r\n      a.download = `filled_tender_${tenderId}.pdf`\r\n      document.body.appendChild(a)\r\n      a.click()\r\n      window.URL.revokeObjectURL(url)\r\n      document.body.removeChild(a)\r\n    } catch (error: any) {\r\n      console.error(\"[v0] Error downloading filled PDF:\", error)\r\n      toast({\r\n        title: \"Error\",\r\n        description: error.message || \"Failed to download filled PDF\",\r\n        variant: \"destructive\",\r\n      })\r\n    } finally {\r\n      setFillingPdf(false)\r\n    }\r\n  }\r\n\r\n  const handleGenerateResponsePdf = async () => {\r\n    if (Object.keys(formData).length === 0) {\r\n      toast({\r\n        title: \"No Responses\",\r\n        description: \"Please fill in some form fields before generating a response PDF.\",\r\n        variant: \"destructive\",\r\n      })\r\n      return\r\n    }\r\n\r\n    setFillingPdf(true)\r\n    try {\r\n      const response = await fetch(`${apiBasePath}/generate-response-pdf`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || \"Failed to generate PDF\")\r\n      }\r\n\r\n      const blob = await response.blob()\r\n      const url = window.URL.createObjectURL(blob)\r\n      window.open(url, \"_blank\")\r\n      setTimeout(() => window.URL.revokeObjectURL(url), 1000)\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Response PDF generated successfully\",\r\n      })\r\n    } catch (error: any) {\r\n      console.error(\"[v0] Error generating response PDF:\", error)\r\n      toast({\r\n        title: \"Error\",\r\n        description: error.message || \"Failed to generate response PDF\",\r\n        variant: \"destructive\",\r\n      })\r\n    } finally {\r\n      setFillingPdf(false)\r\n    }\r\n  }\r\n\r\n  const handleDownloadResponsePdf = async () => {\r\n    if (Object.keys(formData).length === 0) {\r\n      toast({\r\n        title: \"No Responses\",\r\n        description: \"Please fill in some form fields before downloading a response PDF.\",\r\n        variant: \"destructive\",\r\n      })\r\n      return\r\n    }\r\n\r\n    setFillingPdf(true)\r\n    try {\r\n      const response = await fetch(`${apiBasePath}/generate-response-pdf`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || \"Failed to generate PDF\")\r\n      }\r\n\r\n      const blob = await response.blob()\r\n      const url = window.URL.createObjectURL(blob)\r\n      const a = document.createElement(\"a\")\r\n      a.href = url\r\n      a.download = `tender_response_${tenderId}.pdf`\r\n      document.body.appendChild(a)\r\n      a.click()\r\n      window.URL.revokeObjectURL(url)\r\n      document.body.removeChild(a)\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Response PDF downloaded successfully\",\r\n      })\r\n    } catch (error: any) {\r\n      console.error(\"[v0] Error downloading response PDF:\", error)\r\n      toast({\r\n        title: \"Error\",\r\n        description: error.message || \"Failed to download response PDF\",\r\n        variant: \"destructive\",\r\n      })\r\n    } finally {\r\n      setFillingPdf(false)\r\n    }\r\n  }\r\n\r\n  const handleMakePdfEditable = async () => {\r\n    if (availableDocuments.length === 0) {\r\n      toast({\r\n        title: \"No Document\",\r\n        description: \"Please upload a PDF document first.\",\r\n        variant: \"destructive\",\r\n      })\r\n      return\r\n    }\r\n\r\n    if (Object.keys(formData).length === 0) {\r\n      toast({\r\n        title: \"No Responses\",\r\n        description: \"Please fill in some form fields first.\",\r\n        variant: \"destructive\",\r\n      })\r\n      return\r\n    }\r\n\r\n    setFillingPdf(true)\r\n    try {\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] MAKE PDF EDITABLE - URL CONSTRUCTION\")\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] tenderId:\", tenderId)\r\n      console.log(\"[v0] isCustomTender:\", isCustomTender)\r\n      console.log(\"[v0] apiBasePath:\", apiBasePath)\r\n      const fullUrl = `${apiBasePath}/make-pdf-editable`\r\n      console.log(\"[v0] Full URL being fetched:\", fullUrl)\r\n      console.log(\"[v0] URL length:\", fullUrl.length)\r\n      console.log(\"[v0] URL contains duplicate?:\", fullUrl.includes(\"/make-pdf-editable/\"))\r\n      console.log(\"[v0] Document ID:\", availableDocuments[0].id)\r\n      console.log(\"[v0] ========================================\")\r\n\r\n      const response = await fetch(fullUrl, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ documentId: availableDocuments[0].id }),\r\n      })\r\n\r\n      console.log(\"[v0] Response status:\", response.status)\r\n      console.log(\"[v0] Response OK:\", response.ok)\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        console.error(\"[v0] API error response:\", error)\r\n        throw new Error(error.error || \"Failed to make PDF editable\")\r\n      }\r\n\r\n      const fieldsAdded = response.headers.get(\"X-Fields-Added\")\r\n      const fieldsFilled = response.headers.get(\"X-Fields-Filled\")\r\n\r\n      console.log(\"[v0] Fields added:\", fieldsAdded)\r\n      console.log(\"[v0] Fields filled:\", fieldsFilled)\r\n\r\n      const blob = await response.blob()\r\n      const url = window.URL.createObjectURL(blob)\r\n      window.open(url, \"_blank\")\r\n      setTimeout(() => window.URL.revokeObjectURL(url), 1000)\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: `Created editable PDF with ${fieldsAdded} form fields (${fieldsFilled} filled)`,\r\n      })\r\n    } catch (error: any) {\r\n      console.error(\"[v0] Error making PDF editable:\", error)\r\n      toast({\r\n        title: \"Error\",\r\n        description: error.message || \"Failed to make PDF editable\",\r\n        variant: \"destructive\",\r\n      })\r\n    } finally {\r\n      setFillingPdf(false)\r\n    }\r\n  }\r\n\r\n  const handleDownloadEditablePdf = async () => {\r\n    if (availableDocuments.length === 0) {\r\n      toast({\r\n        title: \"No Document\",\r\n        description: \"Please upload a PDF document first.\",\r\n        variant: \"destructive\",\r\n      })\r\n      return\r\n    }\r\n\r\n    if (Object.keys(formData).length === 0) {\r\n      toast({\r\n        title: \"No Responses\",\r\n        description: \"Please fill in some form fields first.\",\r\n        variant: \"destructive\",\r\n      })\r\n      return\r\n    }\r\n\r\n    setFillingPdf(true)\r\n    try {\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] DOWNLOAD EDITABLE PDF - URL CONSTRUCTION\")\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] tenderId:\", tenderId)\r\n      console.log(\"[v0] isCustomTender:\", isCustomTender)\r\n      console.log(\"[v0] apiBasePath:\", apiBasePath)\r\n      const fullUrl = `${apiBasePath}/make-pdf-editable`\r\n      console.log(\"[v0] Full URL being fetched:\", fullUrl)\r\n      console.log(\"[v0] Document ID:\", availableDocuments[0].id)\r\n      console.log(\"[v0] ========================================\")\r\n\r\n      const response = await fetch(fullUrl, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ documentId: availableDocuments[0].id }),\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || \"Failed to make PDF editable\")\r\n      }\r\n\r\n      const blob = await response.blob()\r\n      const url = window.URL.createObjectURL(blob)\r\n      const a = document.createElement(\"a\")\r\n      a.href = url\r\n      a.download = `editable_tender_${tenderId}.pdf`\r\n      document.body.appendChild(a)\r\n      a.click()\r\n      window.URL.revokeObjectURL(url)\r\n      document.body.removeChild(a)\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Editable PDF downloaded successfully\",\r\n      })\r\n    } catch (error: any) {\r\n      console.error(\"[v0] Error downloading editable PDF:\", error)\r\n      toast({\r\n        title: \"Error\",\r\n        description: error.message || \"Failed to download editable PDF\",\r\n        variant: \"destructive\",\r\n      })\r\n    } finally {\r\n      setFillingPdf(false)\r\n    }\r\n  }\r\n\r\n  const handleGenerateFilledEditable = async () => {\r\n    if (availableDocuments.length === 0) {\r\n      toast({\r\n        title: \"No Document\",\r\n        description: \"Please upload a PDF document first.\",\r\n        variant: \"destructive\",\r\n      })\r\n      return\r\n    }\r\n\r\n    if (Object.keys(formData).length === 0) {\r\n      toast({\r\n        title: \"No Responses\",\r\n        description: \"Please fill in some form fields first.\",\r\n        variant: \"destructive\",\r\n      })\r\n      return\r\n    }\r\n\r\n    setFillingPdf(true)\r\n    try {\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] GENERATE FILLED EDITABLE PDF\")\r\n      console.log(\"[v0] ========================================\")\r\n      console.log(\"[v0] Tender ID:\", tenderId)\r\n      console.log(\"[v0] Document ID:\", availableDocuments[0].id)\r\n      console.log(\"[v0] Form responses:\", Object.keys(formData).length)\r\n\r\n      const response = await fetch(`${apiBasePath}/generate-filled-editable`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          documentId: availableDocuments[0].id,\r\n          saveToBlob: true,\r\n        }),\r\n      })\r\n\r\n      console.log(\"[v0] Response status:\", response.status)\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || \"Failed to generate filled editable PDF\")\r\n      }\r\n\r\n      const fieldsCreated = response.headers.get(\"X-Fields-Created\")\r\n      const fieldsFilled = response.headers.get(\"X-Fields-Filled\")\r\n      const totalPages = response.headers.get(\"X-Total-Pages\")\r\n      const isReadOnly = response.headers.get(\"X-Is-Read-Only\")\r\n      const savedBlobUrl = response.headers.get(\"X-Saved-Blob-Url\")\r\n\r\n      console.log(\"[v0] Fields created:\", fieldsCreated)\r\n      console.log(\"[v0] Fields filled:\", fieldsFilled)\r\n      console.log(\"[v0] Total pages:\", totalPages)\r\n      console.log(\"[v0] Was read-only:\", isReadOnly)\r\n      console.log(\"[v0] Saved to blob:\", savedBlobUrl)\r\n\r\n      const blob = await response.blob()\r\n      const url = window.URL.createObjectURL(blob)\r\n\r\n      // Download the file\r\n      const a = document.createElement(\"a\")\r\n      a.href = url\r\n      a.download = `filled_tender_${tenderId}.pdf`\r\n      document.body.appendChild(a)\r\n      a.click()\r\n      window.URL.revokeObjectURL(url)\r\n      document.body.removeChild(a)\r\n\r\n      toast({\r\n        title: \"Success!\",\r\n        description: `Generated editable PDF with ${fieldsFilled} fields filled. ${savedBlobUrl ? \"Saved to your documents.\" : \"\"}`,\r\n      })\r\n    } catch (error: any) {\r\n      console.error(\"[v0] Error generating filled editable PDF:\", error)\r\n      toast({\r\n        title: \"Error\",\r\n        description: error.message || \"Failed to generate filled editable PDF\",\r\n        variant: \"destructive\",\r\n      })\r\n    } finally {\r\n      setFillingPdf(false)\r\n    }\r\n  }\r\n\r\n  const isAddressField = (field: FormField): boolean => {\r\n    const addressKeywords = [\"address\", \"street\", \"location\", \"physical address\", \"postal address\"]\r\n    const label = field.label.toLowerCase()\r\n    return addressKeywords.some((keyword) => label.includes(keyword))\r\n  }\r\n\r\n  const isCurrencyField = (field: FormField): boolean => {\r\n    const currencyKeywords = [\"price\", \"cost\", \"amount\", \"value\", \"budget\", \"fee\", \"payment\", \"tender value\"]\r\n    const label = field.label.toLowerCase()\r\n    return currencyKeywords.some((keyword) => label.includes(keyword)) || field.type === \"currency\"\r\n  }\r\n\r\n  const renderField = (field: FormField) => {\r\n    const value = formData[field.id] || \"\"\r\n    const error = errors[field.id]\r\n\r\n    // Address fields now use regular text input\r\n    if (isAddressField(field) && field.type === \"text\") {\r\n      return (\r\n        <Input\r\n          type=\"text\"\r\n          id={field.id}\r\n          value={value}\r\n          onChange={(e) => handleChange(field.id, e.target.value)}\r\n          placeholder={field.placeholder || \"Enter address...\"}\r\n          required={field.required}\r\n          className={error ? \"border-destructive\" : \"\"}\r\n        />\r\n      )\r\n    }\r\n\r\n    if (isCurrencyField(field) && (field.type === \"text\" || field.type === \"number\")) {\r\n      return (\r\n        <div className=\"relative\">\r\n          <Input\r\n            id={field.id}\r\n            type=\"text\"\r\n            value={value}\r\n            onChange={(e) => handleChange(field.id, e.target.value)}\r\n            placeholder={field.placeholder || \"e.g., R 1,000,000 or 1000000\"}\r\n            className={error ? \"border-destructive\" : \"\"}\r\n          />\r\n          {value && !isNaN(Number(value.toString().replace(/[^0-9.-]/g, \"\"))) && (\r\n            <p className=\"text-xs text-muted-foreground mt-1\">\r\n              Formatted: {formatZAR(value.toString().replace(/[^0-9.-]/g, \"\"))}\r\n            </p>\r\n          )}\r\n        </div>\r\n      )\r\n    }\r\n\r\n    switch (field.type) {\r\n      case \"textarea\":\r\n        return (\r\n          <Textarea\r\n            id={field.id}\r\n            value={value}\r\n            onChange={(e) => handleChange(field.id, e.target.value)}\r\n            placeholder={field.placeholder}\r\n            className={error ? \"border-destructive\" : \"\"}\r\n            rows={4}\r\n          />\r\n        )\r\n\r\n      case \"select\":\r\n        return (\r\n          <Select value={value} onValueChange={(val) => handleChange(field.id, val)}>\r\n            <SelectTrigger className={error ? \"border-destructive\" : \"\"}>\r\n              <SelectValue placeholder={field.placeholder || \"Select an option\"} />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {field.options?.map((option) => (\r\n                <SelectItem key={option} value={option}>\r\n                  {option}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        )\r\n\r\n      case \"checkbox\":\r\n        return (\r\n          <div className=\"space-y-2\">\r\n            {field.options?.map((option) => (\r\n              <div key={option} className=\"flex items-center space-x-2\">\r\n                <Checkbox\r\n                  id={`${field.id}-${option}`}\r\n                  checked={Array.isArray(value) && value.includes(option)}\r\n                  onCheckedChange={(checked) => {\r\n                    const currentValues = Array.isArray(value) ? value : []\r\n                    const newValues = checked ? [...currentValues, option] : currentValues.filter((v) => v !== option)\r\n                    handleChange(field.id, newValues)\r\n                  }}\r\n                />\r\n                <label htmlFor={`${field.id}-${option}`} className=\"text-sm\">\r\n                  {option}\r\n                </label>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )\r\n\r\n      case \"radio\":\r\n        return (\r\n          <RadioGroup value={value} onValueChange={(val) => handleChange(field.id, val)}>\r\n            {field.options?.map((option) => (\r\n              <div key={option} className=\"flex items-center space-x-2\">\r\n                <RadioGroupItem value={option} id={`${field.id}-${option}`} />\r\n                <label htmlFor={`${field.id}-${option}`} className=\"text-sm\">\r\n                  {option}\r\n                </label>\r\n              </div>\r\n            ))}\r\n          </RadioGroup>\r\n        )\r\n\r\n      case \"file\":\r\n        return (\r\n          <Input\r\n            id={field.id}\r\n            type=\"file\"\r\n            onChange={(e) => handleChange(field.id, e.target.files?.[0]?.name || \"\")}\r\n            className={error ? \"border-destructive\" : \"\"}\r\n          />\r\n        )\r\n\r\n      default:\r\n        return (\r\n          <Input\r\n            id={field.id}\r\n            type={field.type}\r\n            value={value}\r\n            onChange={(e) => handleChange(field.id, e.target.value)}\r\n            placeholder={field.placeholder}\r\n            className={error ? \"border-destructive\" : \"\"}\r\n            min={field.validation?.min}\r\n            max={field.validation?.max}\r\n            maxLength={field.validation?.maxLength}\r\n          />\r\n        )\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    console.log(\"[v0]  Form is in LOADING state\")\r\n    return (\r\n      <Card>\r\n        <CardContent className=\"p-12 text-center\">\r\n          <Loader2 className=\"h-8 w-8 animate-spin text-primary mx-auto\" />\r\n        </CardContent>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  const sections = Array.from(new Set(formFields.map((f) => f.section || \"General Information\")))\r\n\r\n  console.log(\"[v0]  Form LOADED - Rendering sections:\", sections)\r\n  console.log(\"[v0] Total sections:\", sections.length)\r\n\r\n  const toggleSection = (section: string) => {\r\n    const newCollapsed = new Set(collapsedSections)\r\n    if (newCollapsed.has(section)) {\r\n      newCollapsed.delete(section)\r\n    } else {\r\n      newCollapsed.add(section)\r\n    }\r\n    setCollapsedSections(newCollapsed)\r\n  }\r\n\r\n  const getSectionCompletion = (section: string): { filled: number; total: number; percent: number } => {\r\n    const sectionFields = formFields.filter((f) => (f.section || \"General Information\") === section)\r\n    const requiredFields = sectionFields.filter((f) => f.required)\r\n    const fieldsToCheck = requiredFields.length > 0 ? requiredFields : sectionFields\r\n\r\n    const filled = fieldsToCheck.filter((f) => formData[f.id] && formData[f.id] !== \"\").length\r\n    const total = fieldsToCheck.length\r\n    const percent = total > 0 ? Math.round((filled / total) * 100) : 0\r\n\r\n    return { filled, total, percent }\r\n  }\r\n\r\n  const requiredFieldsCount = formFields.filter((f) => f.required).length\r\n  const totalFilledCount = Object.keys(formData).filter((key) => formData[key] && formData[key] !== \"\").length\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {console.log(\"[v0]  DynamicTenderForm JSX RENDERING\")}\r\n\r\n      <Card className=\"border-primary/20 bg-gradient-to-r from-primary/5 to-primary/10\">\r\n        <CardHeader className=\"pb-3\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <CardTitle className=\"text-lg\">Response Form Progress</CardTitle>\r\n              <CardDescription className=\"mt-1\">\r\n                {requiredFieldsCount > 0\r\n                  ? `${requiredFieldsCount} required fields  ${totalFilledCount} of ${formFields.length} total fields filled`\r\n                  : `${totalFilledCount} of ${formFields.length} fields filled`}\r\n              </CardDescription>\r\n            </div>\r\n            <div className=\"text-right\">\r\n              <div className=\"text-3xl font-bold text-primary\">{formCompletionPercent}%</div>\r\n              <p className=\"text-xs text-muted-foreground\">Complete</p>\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-3\">\r\n          <Progress value={formCompletionPercent} className=\"h-3\" />\r\n          <div className=\"flex items-center justify-between text-xs text-muted-foreground\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <Clock className=\"h-3 w-3\" />\r\n              {lastSaveTime ? `Last saved ${lastSaveTime.toLocaleTimeString()}` : \"Not saved yet\"}\r\n            </div>\r\n            <Badge variant={formCompletionPercent >= 100 ? \"default\" : \"secondary\"} className=\"gap-1\">\r\n              <Percent className=\"h-3 w-3\" />\r\n              {formCompletionPercent >= 100 ? \"Ready to Submit\" : \"In Progress\"}\r\n            </Badge>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* PDF Actions Section */}\r\n      {availableDocuments.length > 0 && (\r\n        <Card className=\"mt-6\">\r\n          <CardHeader>\r\n            <CardTitle className=\"flex items-center gap-2\">\r\n              <FileText className=\"h-5 w-5\" />\r\n              Generate Filled Document\r\n            </CardTitle>\r\n            <CardDescription>\r\n              Download an editable copy of your tender document with all form fields filled in. Your responses will be\r\n              overlaid directly onto the original document pages.\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n            {Object.keys(formData).length === 0 ? (\r\n              <Alert>\r\n                <AlertCircle className=\"h-4 w-4\" />\r\n                <AlertTitle>Fill in the form first</AlertTitle>\r\n                <AlertDescription>\r\n                  Complete the form fields above before generating your filled document.\r\n                </AlertDescription>\r\n              </Alert>\r\n            ) : (\r\n              <Alert className=\"bg-green-50 border-green-200\">\r\n                <CheckCircle2 className=\"h-4 w-4 text-green-600\" />\r\n                <AlertTitle className=\"text-green-800\">Ready to generate</AlertTitle>\r\n                <AlertDescription className=\"text-green-700\">\r\n                  You have filled {Object.keys(formData).length} field(s). Click below to generate your filled document.\r\n                </AlertDescription>\r\n              </Alert>\r\n            )}\r\n\r\n            <div className=\"flex flex-wrap gap-3\">\r\n              <Button\r\n                onClick={handleGenerateFilledEditable}\r\n                disabled={fillingPdf || Object.keys(formData).length === 0}\r\n                size=\"lg\"\r\n                className=\"bg-primary\"\r\n              >\r\n                {fillingPdf ? (\r\n                  <>\r\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                    Generating Filled Document...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Download className=\"h-4 w-4 mr-2\" />\r\n                    Generate & Download Filled PDF\r\n                  </>\r\n                )}\r\n              </Button>\r\n            </div>\r\n\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              The filled PDF will be saved to your documents. Your responses are overlaid directly on the original\r\n              tender document.\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {sections.map((section) => {\r\n        const sectionFields = formFields.filter((f) => (f.section || \"General Information\") === section)\r\n        const completion = getSectionCompletion(section)\r\n        const isCollapsed = collapsedSections.has(section)\r\n        const requiredFieldsInSection = sectionFields.filter((f) => f.required).length\r\n\r\n        return (\r\n          <Card\r\n            key={section}\r\n            className={cn(\"transition-all\", completion.percent === 100 && \"border-green-500/50 bg-green-50/50\")}\r\n          >\r\n            <CardHeader\r\n              className=\"cursor-pointer hover:bg-muted/50 transition-colors\"\r\n              onClick={() => toggleSection(section)}\r\n            >\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <CardTitle className=\"text-base\">{section}</CardTitle>\r\n                    {requiredFieldsInSection > 0 && (\r\n                      <Badge variant=\"secondary\" className=\"text-xs\">\r\n                        {requiredFieldsInSection} Required\r\n                      </Badge>\r\n                    )}\r\n                  </div>\r\n                  <CardDescription className=\"mt-1\">\r\n                    {completion.filled} of {completion.total} fields completed\r\n                  </CardDescription>\r\n                </div>\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Progress value={completion.percent} className=\"h-2 w-20\" />\r\n                    <span\r\n                      className={cn(\r\n                        \"text-sm font-medium w-12 text-right\",\r\n                        completion.percent === 100 ? \"text-green-600\" : \"text-muted-foreground\",\r\n                      )}\r\n                    >\r\n                      {completion.percent}%\r\n                    </span>\r\n                  </div>\r\n                  {isCollapsed ? (\r\n                    <ChevronDown className=\"h-5 w-5 text-muted-foreground\" />\r\n                  ) : (\r\n                    <ChevronUp className=\"h-5 w-5 text-muted-foreground\" />\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </CardHeader>\r\n            {!isCollapsed && (\r\n              <CardContent className=\"space-y-4 pt-0\">\r\n                {sectionFields.map((field) => (\r\n                  <div key={field.id} className=\"space-y-2\">\r\n                    <Label htmlFor={field.id} className=\"flex items-center gap-2\">\r\n                      {field.label}\r\n                      {field.required && (\r\n                        <Badge variant=\"destructive\" className=\"text-xs px-1.5 py-0\">\r\n                          Required\r\n                        </Badge>\r\n                      )}\r\n                    </Label>\r\n                    {field.description && <p className=\"text-sm text-muted-foreground\">{field.description}</p>}\r\n                    {renderField(field)}\r\n                    {errors[field.id] && (\r\n                      <p className=\"text-sm text-destructive flex items-center gap-1\">\r\n                        <AlertCircle className=\"h-3 w-3\" />\r\n                        {errors[field.id]}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </CardContent>\r\n            )}\r\n          </Card>\r\n        )\r\n      })}\r\n\r\n      <Card className=\"sticky bottom-4 shadow-lg border-primary/20\">\r\n        <CardContent className=\"py-4\">\r\n          <div className=\"flex items-center gap-4 flex-wrap\">\r\n            <Button onClick={handleSave} disabled={saving} size=\"lg\" className=\"flex-1 min-w-[200px]\">\r\n              {saving ? (\r\n                <>\r\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                  Saving...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Save className=\"h-4 w-4 mr-2\" />\r\n                  Save Progress ({formCompletionPercent}% Complete)\r\n                </>\r\n              )}\r\n            </Button>\r\n\r\n            {saved && (\r\n              <Alert className=\"flex-1 bg-green-500/10 border-green-500/20 py-2\">\r\n                <CheckCircle2 className=\"h-4 w-4 text-green-500\" />\r\n                <AlertDescription className=\"text-green-500\">Saved successfully!</AlertDescription>\r\n              </Alert>\r\n            )}\r\n\r\n            {Object.keys(errors).length > 0 && (\r\n              <Alert variant=\"destructive\" className=\"flex-1 py-2\">\r\n                <AlertCircle className=\"h-4 w-4\" />\r\n                <AlertDescription>\r\n                  {Object.keys(errors).length} validation error(s) - check required fields\r\n                </AlertDescription>\r\n              </Alert>\r\n            )}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AACA;AACA;AACA;AACA;AACA;;;AA9BA;;;;;;;;;;;;;;;;;;;AAoEO,SAAS,kBAAkB,EAChC,QAAQ,EACR,UAAU,EACV,gBAAgB,EAChB,YAAY,EAAE,EACd,UAAU,EACV,gBAAgB,EACO;;IACvB,QAAQ,GAAG,CAAC;IACZ,QAAQ,GAAG,CAAC,mBAAmB;IAC/B,QAAQ,GAAG,CAAC,6BAA6B,YAAY,UAAU,GAAG;IAClE,QAAQ,GAAG,CAAC,oBAAoB;IAChC,QAAQ,GAAG,CAAC,mBAAmB,WAAW,UAAU;IAEpD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,+QAAQ,EAAsB,CAAC;IAC/D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+QAAQ,EAAC;IACvC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+QAAQ,EAAC;IACrC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+QAAQ,EAAC;IACnC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+QAAQ,EAAyB,CAAC;IAC9D,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,+QAAQ,EAAC;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,+QAAQ,EAAC;IACjD,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,+QAAQ,EAAc,IAAI;IAC5E,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,+QAAQ,EAAc;IAC9D,MAAM,CAAC,uBAAuB,yBAAyB,GAAG,IAAA,+QAAQ,EAAC;IACnE,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,oIAAQ;IAE1B,MAAM,iBAAiB,SAAS,MAAM,KAAK,MAAM,SAAS,QAAQ,CAAC;IACnE,MAAM,cAAc,iBAAiB,CAAC,oBAAoB,EAAE,UAAU,GAAG,CAAC,qBAAqB,EAAE,UAAU;IAE3G,MAAM,qBAAqB,UAAU,MAAM,CACzC,CAAC,MAAa,IAAI,aAAa,KAAK,qBAAqB,IAAI,SAAS,KAAK;IAG7E,IAAA,gRAAS;uCAAC;YACR;QACF;sCAAG;QAAC;KAAS;IAEb,IAAA,gRAAS;uCAAC;YACR;QACF;sCAAG;QAAC;QAAU;KAAW;IAEzB,MAAM,0BAA0B;QAC9B,IAAI,WAAW,MAAM,KAAK,GAAG;YAC3B,yBAAyB;YACzB;QACF;QAEA,MAAM,iBAAiB,WAAW,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ;QAC1D,MAAM,cAAc,eAAe,MAAM,GAAG,IAAI,eAAe,MAAM,GAAG,WAAW,MAAM;QACzF,MAAM,eACJ,eAAe,MAAM,GAAG,IACpB,eAAe,MAAM,CAAC,CAAC,IAAM,QAAQ,CAAC,EAAE,EAAE,CAAC,IAAI,QAAQ,CAAC,EAAE,EAAE,CAAC,KAAK,IAAI,MAAM,GAC5E,OAAO,IAAI,CAAC,UAAU,MAAM,CAAC,CAAC,MAAQ,QAAQ,CAAC,IAAI,IAAI,QAAQ,CAAC,IAAI,KAAK,IAAI,MAAM;QAEzF,MAAM,UAAU,KAAK,KAAK,CAAC,AAAC,eAAe,cAAe;QAC1D,yBAAyB;QAEzB,yDAAyD;QACzD,IAAI,SAAS;QACb,IAAI,WAAW,KAAK;YAClB,SAAS;QACX,OAAO,IAAI,WAAW,IAAI;YACxB,SAAS;QACX,OAAO,IAAI,WAAW,IAAI;YACxB,SAAS;QACX,OAAO,IAAI,WAAW,IAAI;YACxB,SAAS;QACX;QAEA,IAAI,oBAAoB,UAAU,GAAG;YACnC,iBAAiB,KAAK,GAAG,CAAC,SAAS,KAAK,SAAQ,6BAA6B;QAC/E;IACF;IAEA,MAAM,qBAAqB;QACzB,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,GAAG,YAAY,UAAU,CAAC;YACvD,IAAI,SAAS,EAAE,EAAE;gBACf,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM,SAAS,IAAI;gBACzC,IAAI,WAAW;oBACb,YAAY;oBACZ,gBAAgB,IAAI;gBACtB;YACF;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,uCAAuC;QACvD,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,iBAAiB;QACrB,IAAI,CAAC,cAAc,cAAc;QAEjC,IAAI;YACF,MAAM,SAAS,MAAM,IAAA,oLAAuB,EAAC;YAC7C,IAAI,OAAO,OAAO,EAAE;gBAClB,gBAAgB;gBAChB,IAAI,OAAO,KAAK,EAAE;oBAChB,MAAM;wBACJ,OAAO;wBACP,aAAa;oBACf;gBACF;YACF;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,kCAAkC;QAClD;IACF;IAEA,MAAM,eAAe,CAAC,SAAiB;QACrC,YAAY,CAAC,OAAS,CAAC;gBAAE,GAAG,IAAI;gBAAE,CAAC,QAAQ,EAAE;YAAM,CAAC;QACpD,UAAU,CAAC,OAAS,CAAC;gBAAE,GAAG,IAAI;gBAAE,CAAC,QAAQ,EAAE;YAAG,CAAC;QAC/C,SAAS;QAET,IAAI,OAAO,IAAI,CAAC,UAAU,MAAM,KAAK,KAAK,CAAC,cAAc;YACvD;QACF;IACF;IAEA,MAAM,gBAAgB,CAAC,OAAkB;QACvC,IAAI,MAAM,QAAQ,IAAI,CAAC,CAAC,SAAS,UAAU,EAAE,GAAG;YAC9C,OAAO;QACT;QAEA,IAAI,MAAM,UAAU,IAAI,OAAO;YAC7B,IAAI,MAAM,IAAI,KAAK,UAAU;gBAC3B,MAAM,MAAM,OAAO;gBACnB,IAAI,MAAM,UAAU,CAAC,GAAG,KAAK,aAAa,MAAM,MAAM,UAAU,CAAC,GAAG,EAAE;oBACpE,OAAO,CAAC,iBAAiB,EAAE,MAAM,UAAU,CAAC,GAAG,EAAE;gBACnD;gBACA,IAAI,MAAM,UAAU,CAAC,GAAG,KAAK,aAAa,MAAM,MAAM,UAAU,CAAC,GAAG,EAAE;oBACpE,OAAO,CAAC,iBAAiB,EAAE,MAAM,UAAU,CAAC,GAAG,EAAE;gBACnD;YACF;YAEA,IAAI,MAAM,IAAI,KAAK,UAAU,MAAM,IAAI,KAAK,YAAY;gBACtD,IAAI,MAAM,UAAU,CAAC,SAAS,IAAI,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,SAAS,EAAE;oBAC3E,OAAO,CAAC,kBAAkB,EAAE,MAAM,UAAU,CAAC,SAAS,CAAC,WAAW,CAAC;gBACrE;gBACA,IAAI,MAAM,UAAU,CAAC,OAAO,IAAI,CAAC,IAAI,OAAO,MAAM,UAAU,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ;oBACjF,OAAO,CAAC,cAAc,CAAC;gBACzB;YACF;QACF;QAEA,OAAO;IACT;IAEA,MAAM,aAAa;QACjB,MAAM,YAAoC,CAAC;QAE3C,+BAA+B;QAC/B,WAAW,OAAO,CAAC,CAAC;YAClB,MAAM,QAAQ,cAAc,OAAO,QAAQ,CAAC,MAAM,EAAE,CAAC;YACrD,IAAI,OAAO;gBACT,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG;YACxB;QACF;QAEA,IAAI,OAAO,IAAI,CAAC,WAAW,MAAM,GAAG,GAAG;YACrC,UAAU;YACV,MAAM;gBACJ,OAAO;gBACP,aAAa,CAAC,WAAW,EAAE,OAAO,IAAI,CAAC,WAAW,MAAM,CAAC,uBAAuB,CAAC;gBACjF,SAAS;YACX;YACA;QACF;QAEA,UAAU;QACV,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,GAAG,YAAY,UAAU,CAAC,EAAE;gBACvD,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,WAAW;gBAAS;YAC7C;YAEA,IAAI,SAAS,EAAE,EAAE;gBACf,SAAS;gBACT,gBAAgB,IAAI;gBACpB,WAAW,IAAM,SAAS,QAAQ;gBAClC,MAAM;oBACJ,OAAO;oBACP,aAAa;gBACf;gBAEA,sBAAsB;gBACtB,IAAI,gBAAgB;oBAClB,MAAM,MAAM,CAAC,wBAAwB,CAAC,EAAE;wBACtC,QAAQ;wBACR,SAAS;4BAAE,gBAAgB;wBAAmB;wBAC9C,MAAM,KAAK,SAAS,CAAC;4BACnB;4BACA,YAAY;4BACZ,QAAQ,yBAAyB,MAAM,UAAU;4BACjD,iBAAiB,KAAK,GAAG,CAAC,uBAAuB;4BACjD,WAAW,CAAC,KAAK,EAAE,sBAAsB,UAAU,CAAC;4BACpD,OAAO,CAAC,4BAA4B,EAAE,OAAO,IAAI,CAAC,UAAU,MAAM,CAAC,cAAc,CAAC;wBACpF;oBACF;gBACF;YACF;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gCAAgC;YAC9C,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;YACX;QACF,SAAU;YACR,UAAU;QACZ;IACF;IAEA,MAAM,yBAAyB,OAAO;QACpC,QAAQ,GAAG,CAAC;QACZ,QAAQ,GAAG,CAAC,2BAA2B,IAAI,OAAO,WAAW;QAE7D,cAAc;QACd,IAAI;YACF,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC,qBAAqB;YACjC,QAAQ,GAAG,CAAC,8BAA8B;YAC1C,QAAQ,GAAG,CAAC,iCAAiC,OAAO,IAAI,CAAC,UAAU,MAAM;YACzE,QAAQ,GAAG,CAAC,mBAAmB,OAAO,IAAI,CAAC;YAE3C,IAAI,OAAO,IAAI,CAAC,UAAU,MAAM,KAAK,GAAG;gBACtC,QAAQ,GAAG,CAAC;gBACZ,QAAQ,GAAG,CAAC;YACd;YAEA,QAAQ,GAAG,CAAC,iCAAiC,GAAG,YAAY,SAAS,CAAC;YACtE,MAAM,WAAW,MAAM,MAAM,GAAG,YAAY,SAAS,CAAC,EAAE;gBACtD,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;gBAAW;YACpC;YAEA,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC,yBAAyB,SAAS,MAAM;YACpD,QAAQ,GAAG,CAAC,qBAAqB,SAAS,EAAE;YAC5C,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC,8BAA8B,SAAS,OAAO,CAAC,GAAG,CAAC;YAC/D,QAAQ,GAAG,CAAC,2BAA2B,SAAS,OAAO,CAAC,GAAG,CAAC;YAC5D,QAAQ,GAAG,CAAC,6BAA6B,SAAS,OAAO,CAAC,GAAG,CAAC;YAC9D,QAAQ,GAAG,CAAC,+BAA+B,SAAS,OAAO,CAAC,GAAG,CAAC,yBAAyB;YAEzF,MAAM,iBAAiB,OAAO,QAAQ,CAAC,SAAS,OAAO,CAAC,GAAG,CAAC,yBAAyB;YACrF,MAAM,eAAe,OAAO,QAAQ,CAAC,SAAS,OAAO,CAAC,GAAG,CAAC,sBAAsB;YAChF,MAAM,iBAAiB,OAAO,QAAQ,CAAC,SAAS,OAAO,CAAC,GAAG,CAAC,wBAAwB;YACpF,MAAM,cAAc,OAAO,UAAU,CAAC,SAAS,OAAO,CAAC,GAAG,CAAC,0BAA0B;YAErF,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC,gBAAgB,gBAAgB;YAC5C,QAAQ,GAAG,CAAC,mBAAmB,gBAAgB;YAC/C,QAAQ,GAAG,CAAC,wCAAwC,cAAc;YAClE,QAAQ,GAAG,CAAC,sBAAsB,YAAY,OAAO,CAAC,KAAK;YAC3D,QAAQ,GAAG,CAAC;YAEZ,IAAI,mBAAmB,GAAG;gBACxB,QAAQ,GAAG,CAAC;gBACZ,QAAQ,GAAG,CAAC;gBACZ,QAAQ,GAAG,CAAC;gBACZ,MAAM;oBACJ,OAAO;oBACP,aACE;oBACF,SAAS;gBACX;YACF,OAAO,IAAI,iBAAiB,KAAK,iBAAiB,GAAG;gBACnD,QAAQ,GAAG,CAAC;gBACZ,QAAQ,GAAG,CAAC;gBACZ,QAAQ,GAAG,CAAC;gBACZ,MAAM;oBACJ,OAAO;oBACP,aACE;oBACF,SAAS;gBACX;YACF,OAAO,IAAI,cAAc,IAAI;gBAC3B,QAAQ,GAAG,CAAC;gBACZ,MAAM;oBACJ,OAAO;oBACP,aAAa,CAAC,KAAK,EAAE,aAAa,QAAQ,EAAE,eAAe,qBAAqB,EAAE,YAAY,OAAO,CAAC,GAAG,mCAAmC,CAAC;gBAC/I;YACF,OAAO,IAAI,eAAe,GAAG;gBAC3B,MAAM;oBACJ,OAAO;oBACP,aAAa,GAAG,aAAa,MAAM,EAAE,iBAAiB,IAAI,KAAK,IAAI,kBAAkB,CAAC;gBACxF;YACF;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,QAAQ,MAAM,SAAS,IAAI;gBACjC,MAAM,IAAI,MAAM,MAAM,KAAK,IAAI;YACjC;YAEA,QAAQ,GAAG,CAAC;YACZ,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,QAAQ,GAAG,CAAC,mBAAmB,KAAK,IAAI,EAAE;YAC1C,QAAQ,GAAG,CAAC,mBAAmB,KAAK,IAAI;YAExC,MAAM,MAAM,OAAO,GAAG,CAAC,eAAe,CAAC;YACvC,QAAQ,GAAG,CAAC;YACZ,OAAO,IAAI,CAAC,KAAK;YAEjB,WAAW,IAAM,OAAO,GAAG,CAAC,eAAe,CAAC,MAAM;YAClD,QAAQ,GAAG,CAAC;QACd,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC;YACd,QAAQ,KAAK,CAAC,oBAAoB,OAAO,aAAa;YACtD,QAAQ,KAAK,CAAC,uBAAuB,OAAO;YAC5C,QAAQ,KAAK,CAAC,oBAAoB;YAClC,MAAM;gBACJ,OAAO;gBACP,aAAa,MAAM,OAAO,IAAI;gBAC9B,SAAS;YACX;QACF,SAAU;YACR,QAAQ,GAAG,CAAC;YACZ,cAAc;QAChB;IACF;IAEA,MAAM,0BAA0B,OAAO;QACrC,cAAc;QACd,IAAI;YACF,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC,qBAAqB;YACjC,QAAQ,GAAG,CAAC,8BAA8B;YAC1C,QAAQ,GAAG,CAAC,iCAAiC,OAAO,IAAI,CAAC,UAAU,MAAM;YAEzE,MAAM,WAAW,MAAM,MAAM,GAAG,YAAY,SAAS,CAAC,EAAE;gBACtD,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;gBAAW;YACpC;YAEA,MAAM,iBAAiB,OAAO,QAAQ,CAAC,SAAS,OAAO,CAAC,GAAG,CAAC,yBAAyB;YACrF,MAAM,eAAe,OAAO,QAAQ,CAAC,SAAS,OAAO,CAAC,GAAG,CAAC,sBAAsB;YAChF,MAAM,iBAAiB,OAAO,QAAQ,CAAC,SAAS,OAAO,CAAC,GAAG,CAAC,wBAAwB;YACpF,MAAM,cAAc,OAAO,UAAU,CAAC,SAAS,OAAO,CAAC,GAAG,CAAC,0BAA0B;YAErF,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC,oBAAoB;YAChC,QAAQ,GAAG,CAAC,mBAAmB;YAC/B,QAAQ,GAAG,CAAC,gBAAgB;YAC5B,QAAQ,GAAG,CAAC,sBAAsB,YAAY,OAAO,CAAC,KAAK;YAC3D,QAAQ,GAAG,CAAC;YAEZ,IAAI,mBAAmB,GAAG;gBACxB,MAAM;oBACJ,OAAO;oBACP,aACE;oBACF,SAAS;gBACX;YACF,OAAO,IAAI,iBAAiB,KAAK,iBAAiB,GAAG;gBACnD,MAAM;oBACJ,OAAO;oBACP,aAAa;oBACb,SAAS;gBACX;YACF,OAAO,IAAI,eAAe,GAAG;gBAC3B,MAAM;oBACJ,OAAO;oBACP,aAAa,CAAC,2BAA2B,EAAE,aAAa,MAAM,EAAE,iBAAiB,IAAI,KAAK,IAAI,OAAO,CAAC;gBACxG;YACF;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,QAAQ,MAAM,SAAS,IAAI;gBACjC,MAAM,IAAI,MAAM,MAAM,KAAK,IAAI;YACjC;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,MAAM,MAAM,OAAO,GAAG,CAAC,eAAe,CAAC;YACvC,MAAM,IAAI,SAAS,aAAa,CAAC;YACjC,EAAE,IAAI,GAAG;YACT,EAAE,QAAQ,GAAG,CAAC,cAAc,EAAE,SAAS,IAAI,CAAC;YAC5C,SAAS,IAAI,CAAC,WAAW,CAAC;YAC1B,EAAE,KAAK;YACP,OAAO,GAAG,CAAC,eAAe,CAAC;YAC3B,SAAS,IAAI,CAAC,WAAW,CAAC;QAC5B,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,sCAAsC;YACpD,MAAM;gBACJ,OAAO;gBACP,aAAa,MAAM,OAAO,IAAI;gBAC9B,SAAS;YACX;QACF,SAAU;YACR,cAAc;QAChB;IACF;IAEA,MAAM,4BAA4B;QAChC,IAAI,OAAO,IAAI,CAAC,UAAU,MAAM,KAAK,GAAG;YACtC,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;YACX;YACA;QACF;QAEA,cAAc;QACd,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,GAAG,YAAY,sBAAsB,CAAC,EAAE;gBACnE,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;YAChD;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,QAAQ,MAAM,SAAS,IAAI;gBACjC,MAAM,IAAI,MAAM,MAAM,KAAK,IAAI;YACjC;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,MAAM,MAAM,OAAO,GAAG,CAAC,eAAe,CAAC;YACvC,OAAO,IAAI,CAAC,KAAK;YACjB,WAAW,IAAM,OAAO,GAAG,CAAC,eAAe,CAAC,MAAM;YAElD,MAAM;gBACJ,OAAO;gBACP,aAAa;YACf;QACF,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,uCAAuC;YACrD,MAAM;gBACJ,OAAO;gBACP,aAAa,MAAM,OAAO,IAAI;gBAC9B,SAAS;YACX;QACF,SAAU;YACR,cAAc;QAChB;IACF;IAEA,MAAM,4BAA4B;QAChC,IAAI,OAAO,IAAI,CAAC,UAAU,MAAM,KAAK,GAAG;YACtC,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;YACX;YACA;QACF;QAEA,cAAc;QACd,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,GAAG,YAAY,sBAAsB,CAAC,EAAE;gBACnE,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;YAChD;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,QAAQ,MAAM,SAAS,IAAI;gBACjC,MAAM,IAAI,MAAM,MAAM,KAAK,IAAI;YACjC;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,MAAM,MAAM,OAAO,GAAG,CAAC,eAAe,CAAC;YACvC,MAAM,IAAI,SAAS,aAAa,CAAC;YACjC,EAAE,IAAI,GAAG;YACT,EAAE,QAAQ,GAAG,CAAC,gBAAgB,EAAE,SAAS,IAAI,CAAC;YAC9C,SAAS,IAAI,CAAC,WAAW,CAAC;YAC1B,EAAE,KAAK;YACP,OAAO,GAAG,CAAC,eAAe,CAAC;YAC3B,SAAS,IAAI,CAAC,WAAW,CAAC;YAE1B,MAAM;gBACJ,OAAO;gBACP,aAAa;YACf;QACF,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,wCAAwC;YACtD,MAAM;gBACJ,OAAO;gBACP,aAAa,MAAM,OAAO,IAAI;gBAC9B,SAAS;YACX;QACF,SAAU;YACR,cAAc;QAChB;IACF;IAEA,MAAM,wBAAwB;QAC5B,IAAI,mBAAmB,MAAM,KAAK,GAAG;YACnC,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;YACX;YACA;QACF;QAEA,IAAI,OAAO,IAAI,CAAC,UAAU,MAAM,KAAK,GAAG;YACtC,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;YACX;YACA;QACF;QAEA,cAAc;QACd,IAAI;YACF,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC,kBAAkB;YAC9B,QAAQ,GAAG,CAAC,wBAAwB;YACpC,QAAQ,GAAG,CAAC,qBAAqB;YACjC,MAAM,UAAU,GAAG,YAAY,kBAAkB,CAAC;YAClD,QAAQ,GAAG,CAAC,gCAAgC;YAC5C,QAAQ,GAAG,CAAC,oBAAoB,QAAQ,MAAM;YAC9C,QAAQ,GAAG,CAAC,iCAAiC,QAAQ,QAAQ,CAAC;YAC9D,QAAQ,GAAG,CAAC,qBAAqB,kBAAkB,CAAC,EAAE,CAAC,EAAE;YACzD,QAAQ,GAAG,CAAC;YAEZ,MAAM,WAAW,MAAM,MAAM,SAAS;gBACpC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,YAAY,kBAAkB,CAAC,EAAE,CAAC,EAAE;gBAAC;YAC9D;YAEA,QAAQ,GAAG,CAAC,yBAAyB,SAAS,MAAM;YACpD,QAAQ,GAAG,CAAC,qBAAqB,SAAS,EAAE;YAE5C,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,QAAQ,MAAM,SAAS,IAAI;gBACjC,QAAQ,KAAK,CAAC,4BAA4B;gBAC1C,MAAM,IAAI,MAAM,MAAM,KAAK,IAAI;YACjC;YAEA,MAAM,cAAc,SAAS,OAAO,CAAC,GAAG,CAAC;YACzC,MAAM,eAAe,SAAS,OAAO,CAAC,GAAG,CAAC;YAE1C,QAAQ,GAAG,CAAC,sBAAsB;YAClC,QAAQ,GAAG,CAAC,uBAAuB;YAEnC,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,MAAM,MAAM,OAAO,GAAG,CAAC,eAAe,CAAC;YACvC,OAAO,IAAI,CAAC,KAAK;YACjB,WAAW,IAAM,OAAO,GAAG,CAAC,eAAe,CAAC,MAAM;YAElD,MAAM;gBACJ,OAAO;gBACP,aAAa,CAAC,0BAA0B,EAAE,YAAY,cAAc,EAAE,aAAa,QAAQ,CAAC;YAC9F;QACF,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,mCAAmC;YACjD,MAAM;gBACJ,OAAO;gBACP,aAAa,MAAM,OAAO,IAAI;gBAC9B,SAAS;YACX;QACF,SAAU;YACR,cAAc;QAChB;IACF;IAEA,MAAM,4BAA4B;QAChC,IAAI,mBAAmB,MAAM,KAAK,GAAG;YACnC,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;YACX;YACA;QACF;QAEA,IAAI,OAAO,IAAI,CAAC,UAAU,MAAM,KAAK,GAAG;YACtC,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;YACX;YACA;QACF;QAEA,cAAc;QACd,IAAI;YACF,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC,kBAAkB;YAC9B,QAAQ,GAAG,CAAC,wBAAwB;YACpC,QAAQ,GAAG,CAAC,qBAAqB;YACjC,MAAM,UAAU,GAAG,YAAY,kBAAkB,CAAC;YAClD,QAAQ,GAAG,CAAC,gCAAgC;YAC5C,QAAQ,GAAG,CAAC,qBAAqB,kBAAkB,CAAC,EAAE,CAAC,EAAE;YACzD,QAAQ,GAAG,CAAC;YAEZ,MAAM,WAAW,MAAM,MAAM,SAAS;gBACpC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,YAAY,kBAAkB,CAAC,EAAE,CAAC,EAAE;gBAAC;YAC9D;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,QAAQ,MAAM,SAAS,IAAI;gBACjC,MAAM,IAAI,MAAM,MAAM,KAAK,IAAI;YACjC;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,MAAM,MAAM,OAAO,GAAG,CAAC,eAAe,CAAC;YACvC,MAAM,IAAI,SAAS,aAAa,CAAC;YACjC,EAAE,IAAI,GAAG;YACT,EAAE,QAAQ,GAAG,CAAC,gBAAgB,EAAE,SAAS,IAAI,CAAC;YAC9C,SAAS,IAAI,CAAC,WAAW,CAAC;YAC1B,EAAE,KAAK;YACP,OAAO,GAAG,CAAC,eAAe,CAAC;YAC3B,SAAS,IAAI,CAAC,WAAW,CAAC;YAE1B,MAAM;gBACJ,OAAO;gBACP,aAAa;YACf;QACF,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,wCAAwC;YACtD,MAAM;gBACJ,OAAO;gBACP,aAAa,MAAM,OAAO,IAAI;gBAC9B,SAAS;YACX;QACF,SAAU;YACR,cAAc;QAChB;IACF;IAEA,MAAM,+BAA+B;QACnC,IAAI,mBAAmB,MAAM,KAAK,GAAG;YACnC,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;YACX;YACA;QACF;QAEA,IAAI,OAAO,IAAI,CAAC,UAAU,MAAM,KAAK,GAAG;YACtC,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;YACX;YACA;QACF;QAEA,cAAc;QACd,IAAI;YACF,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC,mBAAmB;YAC/B,QAAQ,GAAG,CAAC,qBAAqB,kBAAkB,CAAC,EAAE,CAAC,EAAE;YACzD,QAAQ,GAAG,CAAC,wBAAwB,OAAO,IAAI,CAAC,UAAU,MAAM;YAEhE,MAAM,WAAW,MAAM,MAAM,GAAG,YAAY,yBAAyB,CAAC,EAAE;gBACtE,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB,YAAY,kBAAkB,CAAC,EAAE,CAAC,EAAE;oBACpC,YAAY;gBACd;YACF;YAEA,QAAQ,GAAG,CAAC,yBAAyB,SAAS,MAAM;YAEpD,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,QAAQ,MAAM,SAAS,IAAI;gBACjC,MAAM,IAAI,MAAM,MAAM,KAAK,IAAI;YACjC;YAEA,MAAM,gBAAgB,SAAS,OAAO,CAAC,GAAG,CAAC;YAC3C,MAAM,eAAe,SAAS,OAAO,CAAC,GAAG,CAAC;YAC1C,MAAM,aAAa,SAAS,OAAO,CAAC,GAAG,CAAC;YACxC,MAAM,aAAa,SAAS,OAAO,CAAC,GAAG,CAAC;YACxC,MAAM,eAAe,SAAS,OAAO,CAAC,GAAG,CAAC;YAE1C,QAAQ,GAAG,CAAC,wBAAwB;YACpC,QAAQ,GAAG,CAAC,uBAAuB;YACnC,QAAQ,GAAG,CAAC,qBAAqB;YACjC,QAAQ,GAAG,CAAC,uBAAuB;YACnC,QAAQ,GAAG,CAAC,uBAAuB;YAEnC,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,MAAM,MAAM,OAAO,GAAG,CAAC,eAAe,CAAC;YAEvC,oBAAoB;YACpB,MAAM,IAAI,SAAS,aAAa,CAAC;YACjC,EAAE,IAAI,GAAG;YACT,EAAE,QAAQ,GAAG,CAAC,cAAc,EAAE,SAAS,IAAI,CAAC;YAC5C,SAAS,IAAI,CAAC,WAAW,CAAC;YAC1B,EAAE,KAAK;YACP,OAAO,GAAG,CAAC,eAAe,CAAC;YAC3B,SAAS,IAAI,CAAC,WAAW,CAAC;YAE1B,MAAM;gBACJ,OAAO;gBACP,aAAa,CAAC,4BAA4B,EAAE,aAAa,gBAAgB,EAAE,eAAe,6BAA6B,IAAI;YAC7H;QACF,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,8CAA8C;YAC5D,MAAM;gBACJ,OAAO;gBACP,aAAa,MAAM,OAAO,IAAI;gBAC9B,SAAS;YACX;QACF,SAAU;YACR,cAAc;QAChB;IACF;IAEA,MAAM,iBAAiB,CAAC;QACtB,MAAM,kBAAkB;YAAC;YAAW;YAAU;YAAY;YAAoB;SAAiB;QAC/F,MAAM,QAAQ,MAAM,KAAK,CAAC,WAAW;QACrC,OAAO,gBAAgB,IAAI,CAAC,CAAC,UAAY,MAAM,QAAQ,CAAC;IAC1D;IAEA,MAAM,kBAAkB,CAAC;QACvB,MAAM,mBAAmB;YAAC;YAAS;YAAQ;YAAU;YAAS;YAAU;YAAO;YAAW;SAAe;QACzG,MAAM,QAAQ,MAAM,KAAK,CAAC,WAAW;QACrC,OAAO,iBAAiB,IAAI,CAAC,CAAC,UAAY,MAAM,QAAQ,CAAC,aAAa,MAAM,IAAI,KAAK;IACvF;IAEA,MAAM,cAAc,CAAC;QACnB,MAAM,QAAQ,QAAQ,CAAC,MAAM,EAAE,CAAC,IAAI;QACpC,MAAM,QAAQ,MAAM,CAAC,MAAM,EAAE,CAAC;QAE9B,4CAA4C;QAC5C,IAAI,eAAe,UAAU,MAAM,IAAI,KAAK,QAAQ;YAClD,qBACE,mSAAC,sIAAK;gBACJ,MAAK;gBACL,IAAI,MAAM,EAAE;gBACZ,OAAO;gBACP,UAAU,CAAC,IAAM,aAAa,MAAM,EAAE,EAAE,EAAE,MAAM,CAAC,KAAK;gBACtD,aAAa,MAAM,WAAW,IAAI;gBAClC,UAAU,MAAM,QAAQ;gBACxB,WAAW,QAAQ,uBAAuB;;;;;;QAGhD;QAEA,IAAI,gBAAgB,UAAU,CAAC,MAAM,IAAI,KAAK,UAAU,MAAM,IAAI,KAAK,QAAQ,GAAG;YAChF,qBACE,mSAAC;gBAAI,WAAU;;kCACb,mSAAC,sIAAK;wBACJ,IAAI,MAAM,EAAE;wBACZ,MAAK;wBACL,OAAO;wBACP,UAAU,CAAC,IAAM,aAAa,MAAM,EAAE,EAAE,EAAE,MAAM,CAAC,KAAK;wBACtD,aAAa,MAAM,WAAW,IAAI;wBAClC,WAAW,QAAQ,uBAAuB;;;;;;oBAE3C,SAAS,CAAC,MAAM,OAAO,MAAM,QAAQ,GAAG,OAAO,CAAC,aAAa,uBAC5D,mSAAC;wBAAE,WAAU;;4BAAqC;4BACpC,IAAA,wIAAS,EAAC,MAAM,QAAQ,GAAG,OAAO,CAAC,aAAa;;;;;;;;;;;;;QAKtE;QAEA,OAAQ,MAAM,IAAI;YAChB,KAAK;gBACH,qBACE,mSAAC,4IAAQ;oBACP,IAAI,MAAM,EAAE;oBACZ,OAAO;oBACP,UAAU,CAAC,IAAM,aAAa,MAAM,EAAE,EAAE,EAAE,MAAM,CAAC,KAAK;oBACtD,aAAa,MAAM,WAAW;oBAC9B,WAAW,QAAQ,uBAAuB;oBAC1C,MAAM;;;;;;YAIZ,KAAK;gBACH,qBACE,mSAAC,wIAAM;oBAAC,OAAO;oBAAO,eAAe,CAAC,MAAQ,aAAa,MAAM,EAAE,EAAE;;sCACnE,mSAAC,+IAAa;4BAAC,WAAW,QAAQ,uBAAuB;sCACvD,cAAA,mSAAC,6IAAW;gCAAC,aAAa,MAAM,WAAW,IAAI;;;;;;;;;;;sCAEjD,mSAAC,+IAAa;sCACX,MAAM,OAAO,EAAE,IAAI,CAAC,uBACnB,mSAAC,4IAAU;oCAAc,OAAO;8CAC7B;mCADc;;;;;;;;;;;;;;;;YAQ3B,KAAK;gBACH,qBACE,mSAAC;oBAAI,WAAU;8BACZ,MAAM,OAAO,EAAE,IAAI,CAAC,uBACnB,mSAAC;4BAAiB,WAAU;;8CAC1B,mSAAC,4IAAQ;oCACP,IAAI,GAAG,MAAM,EAAE,CAAC,CAAC,EAAE,QAAQ;oCAC3B,SAAS,MAAM,OAAO,CAAC,UAAU,MAAM,QAAQ,CAAC;oCAChD,iBAAiB,CAAC;wCAChB,MAAM,gBAAgB,MAAM,OAAO,CAAC,SAAS,QAAQ,EAAE;wCACvD,MAAM,YAAY,UAAU;+CAAI;4CAAe;yCAAO,GAAG,cAAc,MAAM,CAAC,CAAC,IAAM,MAAM;wCAC3F,aAAa,MAAM,EAAE,EAAE;oCACzB;;;;;;8CAEF,mSAAC;oCAAM,SAAS,GAAG,MAAM,EAAE,CAAC,CAAC,EAAE,QAAQ;oCAAE,WAAU;8CAChD;;;;;;;2BAXK;;;;;;;;;;YAkBlB,KAAK;gBACH,qBACE,mSAAC,oJAAU;oBAAC,OAAO;oBAAO,eAAe,CAAC,MAAQ,aAAa,MAAM,EAAE,EAAE;8BACtE,MAAM,OAAO,EAAE,IAAI,CAAC,uBACnB,mSAAC;4BAAiB,WAAU;;8CAC1B,mSAAC,wJAAc;oCAAC,OAAO;oCAAQ,IAAI,GAAG,MAAM,EAAE,CAAC,CAAC,EAAE,QAAQ;;;;;;8CAC1D,mSAAC;oCAAM,SAAS,GAAG,MAAM,EAAE,CAAC,CAAC,EAAE,QAAQ;oCAAE,WAAU;8CAChD;;;;;;;2BAHK;;;;;;;;;;YAUlB,KAAK;gBACH,qBACE,mSAAC,sIAAK;oBACJ,IAAI,MAAM,EAAE;oBACZ,MAAK;oBACL,UAAU,CAAC,IAAM,aAAa,MAAM,EAAE,EAAE,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,EAAE,QAAQ;oBACrE,WAAW,QAAQ,uBAAuB;;;;;;YAIhD;gBACE,qBACE,mSAAC,sIAAK;oBACJ,IAAI,MAAM,EAAE;oBACZ,MAAM,MAAM,IAAI;oBAChB,OAAO;oBACP,UAAU,CAAC,IAAM,aAAa,MAAM,EAAE,EAAE,EAAE,MAAM,CAAC,KAAK;oBACtD,aAAa,MAAM,WAAW;oBAC9B,WAAW,QAAQ,uBAAuB;oBAC1C,KAAK,MAAM,UAAU,EAAE;oBACvB,KAAK,MAAM,UAAU,EAAE;oBACvB,WAAW,MAAM,UAAU,EAAE;;;;;;QAGrC;IACF;IAEA,IAAI,SAAS;QACX,QAAQ,GAAG,CAAC;QACZ,qBACE,mSAAC,oIAAI;sBACH,cAAA,mSAAC,2IAAW;gBAAC,WAAU;0BACrB,cAAA,mSAAC,mTAAO;oBAAC,WAAU;;;;;;;;;;;;;;;;IAI3B;IAEA,MAAM,WAAW,MAAM,IAAI,CAAC,IAAI,IAAI,WAAW,GAAG,CAAC,CAAC,IAAM,EAAE,OAAO,IAAI;IAEvE,QAAQ,GAAG,CAAC,6CAA6C;IACzD,QAAQ,GAAG,CAAC,wBAAwB,SAAS,MAAM;IAEnD,MAAM,gBAAgB,CAAC;QACrB,MAAM,eAAe,IAAI,IAAI;QAC7B,IAAI,aAAa,GAAG,CAAC,UAAU;YAC7B,aAAa,MAAM,CAAC;QACtB,OAAO;YACL,aAAa,GAAG,CAAC;QACnB;QACA,qBAAqB;IACvB;IAEA,MAAM,uBAAuB,CAAC;QAC5B,MAAM,gBAAgB,WAAW,MAAM,CAAC,CAAC,IAAM,CAAC,EAAE,OAAO,IAAI,qBAAqB,MAAM;QACxF,MAAM,iBAAiB,cAAc,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ;QAC7D,MAAM,gBAAgB,eAAe,MAAM,GAAG,IAAI,iBAAiB;QAEnE,MAAM,SAAS,cAAc,MAAM,CAAC,CAAC,IAAM,QAAQ,CAAC,EAAE,EAAE,CAAC,IAAI,QAAQ,CAAC,EAAE,EAAE,CAAC,KAAK,IAAI,MAAM;QAC1F,MAAM,QAAQ,cAAc,MAAM;QAClC,MAAM,UAAU,QAAQ,IAAI,KAAK,KAAK,CAAC,AAAC,SAAS,QAAS,OAAO;QAEjE,OAAO;YAAE;YAAQ;YAAO;QAAQ;IAClC;IAEA,MAAM,sBAAsB,WAAW,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,EAAE,MAAM;IACvE,MAAM,mBAAmB,OAAO,IAAI,CAAC,UAAU,MAAM,CAAC,CAAC,MAAQ,QAAQ,CAAC,IAAI,IAAI,QAAQ,CAAC,IAAI,KAAK,IAAI,MAAM;IAE5G,qBACE,mSAAC;QAAI,WAAU;;YACZ,QAAQ,GAAG,CAAC;0BAEb,mSAAC,oIAAI;gBAAC,WAAU;;kCACd,mSAAC,0IAAU;wBAAC,WAAU;kCACpB,cAAA,mSAAC;4BAAI,WAAU;;8CACb,mSAAC;;sDACC,mSAAC,yIAAS;4CAAC,WAAU;sDAAU;;;;;;sDAC/B,mSAAC,+IAAe;4CAAC,WAAU;sDACxB,sBAAsB,IACnB,GAAG,oBAAoB,mBAAmB,EAAE,iBAAiB,IAAI,EAAE,WAAW,MAAM,CAAC,oBAAoB,CAAC,GAC1G,GAAG,iBAAiB,IAAI,EAAE,WAAW,MAAM,CAAC,cAAc,CAAC;;;;;;;;;;;;8CAGnE,mSAAC;oCAAI,WAAU;;sDACb,mSAAC;4CAAI,WAAU;;gDAAmC;gDAAsB;;;;;;;sDACxE,mSAAC;4CAAE,WAAU;sDAAgC;;;;;;;;;;;;;;;;;;;;;;;kCAInD,mSAAC,2IAAW;wBAAC,WAAU;;0CACrB,mSAAC,4IAAQ;gCAAC,OAAO;gCAAuB,WAAU;;;;;;0CAClD,mSAAC;gCAAI,WAAU;;kDACb,mSAAC;wCAAI,WAAU;;0DACb,mSAAC,oSAAK;gDAAC,WAAU;;;;;;4CAChB,eAAe,CAAC,WAAW,EAAE,aAAa,kBAAkB,IAAI,GAAG;;;;;;;kDAEtE,mSAAC,sIAAK;wCAAC,SAAS,yBAAyB,MAAM,YAAY;wCAAa,WAAU;;0DAChF,mSAAC,0SAAO;gDAAC,WAAU;;;;;;4CAClB,yBAAyB,MAAM,oBAAoB;;;;;;;;;;;;;;;;;;;;;;;;;YAO3D,mBAAmB,MAAM,GAAG,mBAC3B,mSAAC,oIAAI;gBAAC,WAAU;;kCACd,mSAAC,0IAAU;;0CACT,mSAAC,yIAAS;gCAAC,WAAU;;kDACnB,mSAAC,iTAAQ;wCAAC,WAAU;;;;;;oCAAY;;;;;;;0CAGlC,mSAAC,+IAAe;0CAAC;;;;;;;;;;;;kCAKnB,mSAAC,2IAAW;wBAAC,WAAU;;4BACpB,OAAO,IAAI,CAAC,UAAU,MAAM,KAAK,kBAChC,mSAAC,sIAAK;;kDACJ,mSAAC,0TAAW;wCAAC,WAAU;;;;;;kDACvB,mSAAC,2IAAU;kDAAC;;;;;;kDACZ,mSAAC,iJAAgB;kDAAC;;;;;;;;;;;qDAKpB,mSAAC,sIAAK;gCAAC,WAAU;;kDACf,mSAAC,4TAAY;wCAAC,WAAU;;;;;;kDACxB,mSAAC,2IAAU;wCAAC,WAAU;kDAAiB;;;;;;kDACvC,mSAAC,iJAAgB;wCAAC,WAAU;;4CAAiB;4CAC1B,OAAO,IAAI,CAAC,UAAU,MAAM;4CAAC;;;;;;;;;;;;;0CAKpD,mSAAC;gCAAI,WAAU;0CACb,cAAA,mSAAC,wIAAM;oCACL,SAAS;oCACT,UAAU,cAAc,OAAO,IAAI,CAAC,UAAU,MAAM,KAAK;oCACzD,MAAK;oCACL,WAAU;8CAET,2BACC;;0DACE,mSAAC,mTAAO;gDAAC,WAAU;;;;;;4CAA8B;;qEAInD;;0DACE,mSAAC,6SAAQ;gDAAC,WAAU;;;;;;4CAAiB;;;;;;;;;;;;;0CAO7C,mSAAC;gCAAE,WAAU;0CAAgC;;;;;;;;;;;;;;;;;;YAQlD,SAAS,GAAG,CAAC,CAAC;gBACb,MAAM,gBAAgB,WAAW,MAAM,CAAC,CAAC,IAAM,CAAC,EAAE,OAAO,IAAI,qBAAqB,MAAM;gBACxF,MAAM,aAAa,qBAAqB;gBACxC,MAAM,cAAc,kBAAkB,GAAG,CAAC;gBAC1C,MAAM,0BAA0B,cAAc,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,EAAE,MAAM;gBAE9E,qBACE,mSAAC,oIAAI;oBAEH,WAAW,IAAA,qHAAE,EAAC,kBAAkB,WAAW,OAAO,KAAK,OAAO;;sCAE9D,mSAAC,0IAAU;4BACT,WAAU;4BACV,SAAS,IAAM,cAAc;sCAE7B,cAAA,mSAAC;gCAAI,WAAU;;kDACb,mSAAC;wCAAI,WAAU;;0DACb,mSAAC;gDAAI,WAAU;;kEACb,mSAAC,yIAAS;wDAAC,WAAU;kEAAa;;;;;;oDACjC,0BAA0B,mBACzB,mSAAC,sIAAK;wDAAC,SAAQ;wDAAY,WAAU;;4DAClC;4DAAwB;;;;;;;;;;;;;0DAI/B,mSAAC,+IAAe;gDAAC,WAAU;;oDACxB,WAAW,MAAM;oDAAC;oDAAK,WAAW,KAAK;oDAAC;;;;;;;;;;;;;kDAG7C,mSAAC;wCAAI,WAAU;;0DACb,mSAAC;gDAAI,WAAU;;kEACb,mSAAC,4IAAQ;wDAAC,OAAO,WAAW,OAAO;wDAAE,WAAU;;;;;;kEAC/C,mSAAC;wDACC,WAAW,IAAA,qHAAE,EACX,uCACA,WAAW,OAAO,KAAK,MAAM,mBAAmB;;4DAGjD,WAAW,OAAO;4DAAC;;;;;;;;;;;;;4CAGvB,4BACC,mSAAC,0TAAW;gDAAC,WAAU;;;;;qEAEvB,mSAAC,oTAAS;gDAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;wBAK5B,CAAC,6BACA,mSAAC,2IAAW;4BAAC,WAAU;sCACpB,cAAc,GAAG,CAAC,CAAC,sBAClB,mSAAC;oCAAmB,WAAU;;sDAC5B,mSAAC,sIAAK;4CAAC,SAAS,MAAM,EAAE;4CAAE,WAAU;;gDACjC,MAAM,KAAK;gDACX,MAAM,QAAQ,kBACb,mSAAC,sIAAK;oDAAC,SAAQ;oDAAc,WAAU;8DAAsB;;;;;;;;;;;;wCAKhE,MAAM,WAAW,kBAAI,mSAAC;4CAAE,WAAU;sDAAiC,MAAM,WAAW;;;;;;wCACpF,YAAY;wCACZ,MAAM,CAAC,MAAM,EAAE,CAAC,kBACf,mSAAC;4CAAE,WAAU;;8DACX,mSAAC,0TAAW;oDAAC,WAAU;;;;;;gDACtB,MAAM,CAAC,MAAM,EAAE,CAAC;;;;;;;;mCAdb,MAAM,EAAE;;;;;;;;;;;mBA5CnB;;;;;YAmEX;0BAEA,mSAAC,oIAAI;gBAAC,WAAU;0BACd,cAAA,mSAAC,2IAAW;oBAAC,WAAU;8BACrB,cAAA,mSAAC;wBAAI,WAAU;;0CACb,mSAAC,wIAAM;gCAAC,SAAS;gCAAY,UAAU;gCAAQ,MAAK;gCAAK,WAAU;0CAChE,uBACC;;sDACE,mSAAC,mTAAO;4CAAC,WAAU;;;;;;wCAA8B;;iEAInD;;sDACE,mSAAC,iSAAI;4CAAC,WAAU;;;;;;wCAAiB;wCACjB;wCAAsB;;;;;;;;4BAK3C,uBACC,mSAAC,sIAAK;gCAAC,WAAU;;kDACf,mSAAC,4TAAY;wCAAC,WAAU;;;;;;kDACxB,mSAAC,iJAAgB;wCAAC,WAAU;kDAAiB;;;;;;;;;;;;4BAIhD,OAAO,IAAI,CAAC,QAAQ,MAAM,GAAG,mBAC5B,mSAAC,sIAAK;gCAAC,SAAQ;gCAAc,WAAU;;kDACrC,mSAAC,0TAAW;wCAAC,WAAU;;;;;;kDACvB,mSAAC,iJAAgB;;4CACd,OAAO,IAAI,CAAC,QAAQ,MAAM;4CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAS9C;GAhmCgB;;QAwBI,oIAAQ;;;KAxBZ"}},
    {"offset": {"line": 2707, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/lib/providers/index.ts"],"sourcesContent":["import OpenAI from \"openai\"\r\nimport { streamText as aiStreamText, convertToModelMessages as aiConvertToModelMessages, DefaultChatTransport as aiDefaultChatTransport } from \"ai\"\r\n\r\ntype GenerateOptions = {\r\n  model: string\r\n  prompt: string\r\n  system?: string\r\n  temperature?: number\r\n  maxTokens?: number\r\n}\r\n\r\n/**\r\n * Simple provider abstraction.\r\n * - If `AZURE_OPENAI_ENDPOINT` + `AZURE_OPENAI_KEY` + `AZURE_OPENAI_DEPLOYMENT` are set, calls Azure OpenAI chat completions.\r\n * - Otherwise falls back to OpenAI (requires `OPENAI_API_KEY`).\r\n */\r\nexport async function generateTextViaProvider(opts: GenerateOptions) {\r\n  const { model, prompt } = opts\r\n\r\n  // Prefer Azure if configured\r\n  const azureEndpoint = process.env.AZURE_OPENAI_ENDPOINT\r\n  const azureKey = process.env.AZURE_OPENAI_KEY\r\n  const azureDeployment = process.env.AZURE_OPENAI_DEPLOYMENT\r\n\r\n  if (azureEndpoint && azureKey && azureDeployment) {\r\n    // Use Azure Chat Completions endpoint\r\n    const url = `${azureEndpoint.replace(/\\/$/, \"\")}/openai/deployments/${azureDeployment}/chat/completions?api-version=2023-05-15`\r\n    const body = {\r\n      messages: [{ role: \"system\", content: opts.system || \"\" }, { role: \"user\", content: prompt }],\r\n      max_tokens: opts.maxTokens || 1500,\r\n      temperature: typeof opts.temperature === \"number\" ? opts.temperature : 0.2,\r\n    }\r\n\r\n    const res = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"api-key\": azureKey,\r\n      },\r\n      body: JSON.stringify(body),\r\n    })\r\n\r\n    if (!res.ok) {\r\n      const text = await res.text()\r\n      throw new Error(`Azure OpenAI request failed: ${res.status} ${text}`)\r\n    }\r\n\r\n    const data = await res.json()\r\n    const content = data?.choices?.[0]?.message?.content || data?.choices?.[0]?.text\r\n    return { text: content ?? \"\" }\r\n  }\r\n\r\n  // Fallback: OpenAI (openai package must be installed and `OPENAI_API_KEY` set)\r\n  const openaiKey = process.env.OPENAI_API_KEY\r\n  if (!openaiKey) throw new Error(\"No OpenAI credentials found (set OPENAI_API_KEY or AZURE_OPENAI_* env vars)\")\r\n\r\n  const client = new OpenAI({ apiKey: openaiKey })\r\n\r\n  const resp = await client.chat.completions.create({\r\n    model,\r\n    messages: [{ role: \"system\", content: opts.system || \"\" }, { role: \"user\", content: prompt }],\r\n    max_tokens: opts.maxTokens || 1500,\r\n    temperature: typeof opts.temperature === \"number\" ? opts.temperature : 0.2,\r\n  })\r\n\r\n  const content = resp.choices?.[0]?.message?.content\r\n  return { text: content ?? \"\" }\r\n}\r\n\r\nexport default generateTextViaProvider\r\n\r\n// Streaming wrapper that delegates to the `ai` SDK but injects provider credentials\r\ntype StreamOptions = {\r\n  model: string\r\n  messages: Array<{ role: string; content: string }>\r\n  temperature?: number\r\n  maxTokens?: number\r\n  abortSignal?: AbortSignal\r\n  onFinish?: (args: { text: string; isAborted?: boolean }) => Promise<void> | void\r\n}\r\n\r\nexport function streamTextViaProvider(opts: StreamOptions) {\r\n  const openaiKey = process.env.OPENAI_API_KEY\r\n  const azureEndpoint = process.env.AZURE_OPENAI_ENDPOINT\r\n  const azureKey = process.env.AZURE_OPENAI_KEY\r\n\r\n  const providerOptions: any = {}\r\n  if (azureEndpoint && azureKey) {\r\n    providerOptions.azure = {\r\n      apiKey: azureKey,\r\n      endpoint: azureEndpoint,\r\n    }\r\n  } else if (openaiKey) {\r\n    providerOptions.openai = {\r\n      apiKey: openaiKey,\r\n    }\r\n  }\r\n\r\n  // Delegate to ai.streamText, preserving the SDK's stream response helpers\r\n  return aiStreamText({\r\n    model: opts.model,\r\n    messages: opts.messages,\r\n    temperature: typeof opts.temperature === \"number\" ? opts.temperature : 0.2,\r\n    maxTokens: opts.maxTokens || 1500,\r\n    abortSignal: opts.abortSignal,\r\n    onFinish: opts.onFinish,\r\n    providerOptions,\r\n  } as any)\r\n}\r\n\r\nexport const convertToModelMessages = aiConvertToModelMessages\r\nexport const DefaultChatTransport = aiDefaultChatTransport\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2828, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/components/ui/scroll-area.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport * as ScrollAreaPrimitive from '@radix-ui/react-scroll-area'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction ScrollArea({\r\n  className,\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<typeof ScrollAreaPrimitive.Root>) {\r\n  return (\r\n    <ScrollAreaPrimitive.Root\r\n      data-slot=\"scroll-area\"\r\n      className={cn('relative', className)}\r\n      {...props}\r\n    >\r\n      <ScrollAreaPrimitive.Viewport\r\n        data-slot=\"scroll-area-viewport\"\r\n        className=\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\"\r\n      >\r\n        {children}\r\n      </ScrollAreaPrimitive.Viewport>\r\n      <ScrollBar />\r\n      <ScrollAreaPrimitive.Corner />\r\n    </ScrollAreaPrimitive.Root>\r\n  )\r\n}\r\n\r\nfunction ScrollBar({\r\n  className,\r\n  orientation = 'vertical',\r\n  ...props\r\n}: React.ComponentProps<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>) {\r\n  return (\r\n    <ScrollAreaPrimitive.ScrollAreaScrollbar\r\n      data-slot=\"scroll-area-scrollbar\"\r\n      orientation={orientation}\r\n      className={cn(\r\n        'flex touch-none p-px transition-colors select-none',\r\n        orientation === 'vertical' &&\r\n          'h-full w-2.5 border-l border-l-transparent',\r\n        orientation === 'horizontal' &&\r\n          'h-2.5 flex-col border-t border-t-transparent',\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      <ScrollAreaPrimitive.ScrollAreaThumb\r\n        data-slot=\"scroll-area-thumb\"\r\n        className=\"bg-border relative flex-1 rounded-full\"\r\n      />\r\n    </ScrollAreaPrimitive.ScrollAreaScrollbar>\r\n  )\r\n}\r\n\r\nexport { ScrollArea, ScrollBar }\r\n"],"names":[],"mappings":";;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OACmD;IACtD,qBACE,mSAAC,4RAAwB;QACvB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,YAAY;QACzB,GAAG,KAAK;;0BAET,mSAAC,gSAA4B;gBAC3B,aAAU;gBACV,WAAU;0BAET;;;;;;0BAEH,mSAAC;;;;;0BACD,mSAAC,8RAA0B;;;;;;;;;;;AAGjC;KArBS;AAuBT,SAAS,UAAU,EACjB,SAAS,EACT,cAAc,UAAU,EACxB,GAAG,OACkE;IACrE,qBACE,mSAAC,2SAAuC;QACtC,aAAU;QACV,aAAa;QACb,WAAW,IAAA,qHAAE,EACX,sDACA,gBAAgB,cACd,8CACF,gBAAgB,gBACd,gDACF;QAED,GAAG,KAAK;kBAET,cAAA,mSAAC,uSAAmC;YAClC,aAAU;YACV,WAAU;;;;;;;;;;;AAIlB;MAzBS"}},
    {"offset": {"line": 2906, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/components/strategist/tender-context-panel.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect, useRef } from \"react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\"\r\nimport {\r\n  Send,\r\n  Target,\r\n  AlertTriangle,\r\n  Loader2,\r\n  Sparkles,\r\n  Lightbulb,\r\n  DollarSign,\r\n  ArrowRight,\r\n  CheckCircle2,\r\n  FileSpreadsheet,\r\n  Calculator,\r\n} from \"lucide-react\"\r\nimport Link from \"next/link\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { toast } from \"sonner\"\r\n\r\ninterface TenderContext {\r\n  id: string\r\n  title: string | null\r\n  organization?: string | null\r\n  description?: string | null\r\n  deadline?: string | null\r\n  value?: string | null\r\n  requirements?: any\r\n}\r\n\r\ninterface Message {\r\n  role: \"user\" | \"assistant\"\r\n  content: string\r\n}\r\n\r\ninterface Props {\r\n  tender: TenderContext\r\n  className?: string\r\n  onPlanGenerated?: (plan: any) => void // Added callback for when plan is generated\r\n  onBoqGenerated?: (boq: any) => void // Added callback for BOQ generation\r\n  onReadinessGenerated?: (readiness: any) => void // Added callback for readiness check\r\n}\r\n\r\nexport function TenderContextStrategistPanel({\r\n  tender,\r\n  className,\r\n  onPlanGenerated,\r\n  onBoqGenerated,\r\n  onReadinessGenerated,\r\n}: Props) {\r\n  const [messages, setMessages] = useState<Message[]>([])\r\n  const [input, setInput] = useState(\"\")\r\n  const [loading, setLoading] = useState(false)\r\n  const [readiness, setReadiness] = useState<any>(null)\r\n  const [loadingReadiness, setLoadingReadiness] = useState(false)\r\n  const [isExpanded, setIsExpanded] = useState(true)\r\n  const [generatingPlan, setGeneratingPlan] = useState(false)\r\n  const [projectPlan, setProjectPlan] = useState<any>(null)\r\n  const scrollRef = useRef<HTMLDivElement>(null)\r\n\r\n  useEffect(() => {\r\n    if (tender.id) {\r\n      loadReadiness()\r\n      loadProjectPlan()\r\n    }\r\n  }, [tender.id])\r\n\r\n  useEffect(() => {\r\n    if (scrollRef.current) {\r\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight\r\n    }\r\n  }, [messages])\r\n\r\n  const loadReadiness = async () => {\r\n    setLoadingReadiness(true)\r\n    try {\r\n      const response = await fetch(`/api/strategist/readiness?tenderId=${tender.id}`)\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        setReadiness(data)\r\n        if (onReadinessGenerated) {\r\n          onReadinessGenerated(data)\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[v0] Error loading readiness:\", error)\r\n    } finally {\r\n      setLoadingReadiness(false)\r\n    }\r\n  }\r\n\r\n  const handleSend = async () => {\r\n    if (!input.trim() || loading) return\r\n\r\n    const userMessage = input.trim()\r\n    setInput(\"\")\r\n    setMessages((prev) => [...prev, { role: \"user\", content: userMessage }])\r\n    setLoading(true)\r\n\r\n    try {\r\n      const response = await fetch(\"/api/strategist/message\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          message: userMessage,\r\n          tender_id: tender.id,\r\n          context_type: \"tender\",\r\n          include_context: true,\r\n          tenderContext: {\r\n            id: tender.id,\r\n            title: tender.title,\r\n            organization: tender.organization,\r\n            description: tender.description,\r\n            deadline: tender.deadline,\r\n            value: tender.value,\r\n            requirements: tender.requirements,\r\n            analysis: tender.analysis,\r\n          },\r\n        }),\r\n      })\r\n\r\n      if (response.ok) {\r\n        const reader = response.body?.getReader()\r\n        const decoder = new TextDecoder()\r\n        let assistantMessage = \"\"\r\n\r\n        setMessages((prev) => [...prev, { role: \"assistant\", content: \"\" }])\r\n\r\n        if (reader) {\r\n          while (true) {\r\n            const { done, value } = await reader.read()\r\n            if (done) break\r\n\r\n            const chunk = decoder.decode(value)\r\n            const lines = chunk.split(\"\\n\")\r\n\r\n            for (const line of lines) {\r\n              if (line.startsWith(\"0:\")) {\r\n                try {\r\n                  const text = JSON.parse(line.slice(2))\r\n                  assistantMessage += text\r\n                  setMessages((prev) => {\r\n                    const newMessages = [...prev]\r\n                    newMessages[newMessages.length - 1] = {\r\n                      role: \"assistant\",\r\n                      content: assistantMessage,\r\n                    }\r\n                    return newMessages\r\n                  })\r\n                } catch (e) {\r\n                  // Skip parse errors\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[v0] Error sending message:\", error)\r\n      setMessages((prev) => [\r\n        ...prev,\r\n        {\r\n          role: \"assistant\",\r\n          content: \"Sorry, I encountered an error. Please try again.\",\r\n        },\r\n      ])\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleQuickAction = (action: string) => {\r\n    let question = \"\"\r\n    switch (action) {\r\n      case \"strategy\":\r\n        question = `Create a winning bid strategy for \"${tender.title}\". What are the key success factors?`\r\n        break\r\n      case \"risks\":\r\n        question = `What are the potential risks and compliance gaps I should be aware of for this tender?`\r\n        break\r\n      case \"pricing\":\r\n        question = `Help me develop a competitive pricing strategy for this bid.`\r\n        break\r\n      case \"strengths\":\r\n        question = `Analyze my strengths and weaknesses for this specific tender based on typical requirements.`\r\n        break\r\n    }\r\n    setInput(question)\r\n  }\r\n\r\n  const loadProjectPlan = async () => {\r\n    try {\r\n      const response = await fetch(`/api/strategist/plan?tenderId=${tender.id}&tenderType=custom`)\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        if (data.plan) {\r\n          setProjectPlan(data.plan)\r\n          if (onPlanGenerated) {\r\n            onPlanGenerated(data.plan)\r\n          }\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[v0] Error loading project plan:\", error)\r\n    }\r\n  }\r\n\r\n  const generateProjectPlan = async () => {\r\n    if (generatingPlan) return\r\n\r\n    try {\r\n      setGeneratingPlan(true)\r\n      console.log(\"[v0] Generating project plan for tender:\", tender.id)\r\n\r\n      const response = await fetch(\"/api/strategist/plan\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          tenderId: tender.id,\r\n          tenderType: \"custom\",\r\n          tenderTitle: tender.title,\r\n          tenderDescription: tender.description,\r\n          analysisData: tender.analysis,\r\n        }),\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.details || error.error || \"Failed to generate project plan\")\r\n      }\r\n\r\n      const { plan } = await response.json()\r\n      console.log(\"[v0] Project plan generated successfully\")\r\n\r\n      if (onPlanGenerated) {\r\n        onPlanGenerated(plan)\r\n      }\r\n\r\n      toast.success(\"Project Plan Generated\", {\r\n        description: \"Your comprehensive project plan is now available in the Planning section\",\r\n      })\r\n    } catch (error) {\r\n      console.error(\"[v0] Plan generation error:\", error)\r\n      toast.error(\"Error\", {\r\n        description: error instanceof Error ? error.message : \"Failed to generate project plan\",\r\n      })\r\n    } finally {\r\n      setGeneratingPlan(false)\r\n    }\r\n  }\r\n\r\n  const generateBoq = async () => {\r\n    try {\r\n      console.log(\"[v0] Generating BOQ for tender:\", tender.id)\r\n\r\n      const response = await fetch(\"/api/strategist/boq\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          tenderId: tender.id,\r\n          tenderType: \"custom\",\r\n          tenderTitle: tender.title,\r\n          tenderDescription: tender.description,\r\n          analysisData: tender.analysis,\r\n        }),\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.details || error.error || \"Failed to generate BOQ\")\r\n      }\r\n\r\n      const { boq } = await response.json()\r\n      console.log(\"[v0] BOQ generated successfully\")\r\n\r\n      if (onBoqGenerated) {\r\n        onBoqGenerated(boq)\r\n      }\r\n\r\n      toast.success(\"BOQ Generated\", {\r\n        description: \"Your Bill of Quantities is now available in the Financial section\",\r\n      })\r\n    } catch (error) {\r\n      console.error(\"[v0] BOQ generation error:\", error)\r\n      toast.error(\"Error\", {\r\n        description: error instanceof Error ? error.message : \"Failed to generate BOQ\",\r\n      })\r\n    }\r\n  }\r\n\r\n  const checkReadiness = async () => {\r\n    try {\r\n      console.log(\"[v0] Checking readiness for tender:\", tender.id)\r\n\r\n      const response = await fetch(`/api/strategist/readiness?tender_id=${tender.id}&tender_type=custom`)\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Failed to check readiness\")\r\n      }\r\n\r\n      const readiness = await response.json()\r\n      console.log(\"[v0] Readiness check complete\")\r\n\r\n      if (onReadinessGenerated) {\r\n        onReadinessGenerated(readiness)\r\n      }\r\n\r\n      toast.success(\"Readiness Check Complete\", {\r\n        description: \"Your bid readiness assessment is now available in the Overview section\",\r\n      })\r\n    } catch (error) {\r\n      console.error(\"[v0] Readiness check error:\", error)\r\n      toast.error(\"Error\", {\r\n        description: \"Failed to check readiness\",\r\n      })\r\n    }\r\n  }\r\n\r\n  const getScoreColor = (score: number) => {\r\n    if (score >= 80) return \"text-green-500\"\r\n    if (score >= 60) return \"text-yellow-500\"\r\n    return \"text-red-500\"\r\n  }\r\n\r\n  const getScoreBg = (score: number) => {\r\n    if (score >= 80) return \"bg-green-500/10\"\r\n    if (score >= 60) return \"bg-yellow-500/10\"\r\n    return \"bg-red-500/10\"\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full\">\r\n      {/* Header */}\r\n      <div className=\"p-4 border-b bg-muted/30\">\r\n        <div className=\"flex items-center justify-between mb-3\">\r\n          <h3 className=\"font-semibold flex items-center gap-2\">\r\n            <Sparkles className=\"h-4 w-4 text-primary\" />\r\n            AI Strategist\r\n          </h3>\r\n          <Badge variant=\"outline\" className=\"text-xs\">\r\n            Tender-Specific\r\n          </Badge>\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <p className=\"text-xs text-muted-foreground\">Generate strategic plans and analysis</p>\r\n          <div className=\"grid grid-cols-1 gap-2\">\r\n            <Button\r\n              onClick={generateProjectPlan}\r\n              disabled={generatingPlan}\r\n              variant=\"default\"\r\n              size=\"sm\"\r\n              className=\"w-full justify-start h-auto py-3\"\r\n            >\r\n              {generatingPlan ? (\r\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin flex-shrink-0\" />\r\n              ) : (\r\n                <FileSpreadsheet className=\"mr-2 h-4 w-4 flex-shrink-0\" />\r\n              )}\r\n              <div className=\"text-left flex-1\">\r\n                <div className=\"font-medium\">Generate Project Plan</div>\r\n                <div className=\"text-xs opacity-80 font-normal\">Opens in Planning section</div>\r\n              </div>\r\n            </Button>\r\n\r\n            <Button\r\n              onClick={generateBoq}\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              className=\"w-full justify-start h-auto py-3 bg-transparent\"\r\n            >\r\n              <Calculator className=\"mr-2 h-4 w-4 flex-shrink-0\" />\r\n              <div className=\"text-left flex-1\">\r\n                <div className=\"font-medium\">Generate BOQ</div>\r\n                <div className=\"text-xs opacity-80 font-normal\">Opens in Financial section</div>\r\n              </div>\r\n            </Button>\r\n\r\n            <Button\r\n              onClick={checkReadiness}\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              className=\"w-full justify-start h-auto py-3 bg-transparent\"\r\n            >\r\n              <CheckCircle2 className=\"mr-2 h-4 w-4 flex-shrink-0\" />\r\n              <div className=\"text-left flex-1\">\r\n                <div className=\"font-medium\">Check Readiness</div>\r\n                <div className=\"text-xs opacity-80 font-normal\">Score your bid readiness</div>\r\n              </div>\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"p-3 border-b bg-muted/20\">\r\n        <p className=\"text-xs font-medium mb-2 text-muted-foreground\">Conversation Starters</p>\r\n        <div className=\"grid grid-cols-2 gap-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            className=\"text-xs h-auto py-2 justify-start bg-transparent\"\r\n            onClick={() => handleQuickAction(\"strategy\")}\r\n          >\r\n            <Target className=\"h-3 w-3 mr-2 flex-shrink-0\" />\r\n            <span className=\"truncate\">Bid Strategy</span>\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            className=\"text-xs h-auto py-2 justify-start bg-transparent\"\r\n            onClick={() => handleQuickAction(\"risks\")}\r\n          >\r\n            <AlertTriangle className=\"h-3 w-3 mr-2 flex-shrink-0\" />\r\n            <span className=\"truncate\">Risk Analysis</span>\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            className=\"text-xs h-auto py-2 justify-start bg-transparent\"\r\n            onClick={() => handleQuickAction(\"pricing\")}\r\n          >\r\n            <DollarSign className=\"h-3 w-3 mr-2 flex-shrink-0\" />\r\n            <span className=\"truncate\">Pricing Help</span>\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            className=\"text-xs h-auto py-2 justify-start bg-transparent\"\r\n            onClick={() => handleQuickAction(\"strengths\")}\r\n          >\r\n            <Lightbulb className=\"h-3 w-3 mr-2 flex-shrink-0\" />\r\n            <span className=\"truncate\">SWOT Analysis</span>\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Chat Messages */}\r\n      {messages.length > 0 && (\r\n        <ScrollArea className=\"h-48 rounded-lg border p-3\" ref={scrollRef}>\r\n          <div className=\"space-y-3\">\r\n            {messages.map((message, i) => (\r\n              <div\r\n                key={i}\r\n                className={cn(\r\n                  \"p-3 rounded-lg text-sm whitespace-pre-wrap\",\r\n                  message.role === \"user\" ? \"bg-primary text-primary-foreground ml-8\" : \"bg-muted mr-8\",\r\n                )}\r\n              >\r\n                {message.content || (\r\n                  <span className=\"flex items-center gap-2\">\r\n                    <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                    Thinking...\r\n                  </span>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </ScrollArea>\r\n      )}\r\n\r\n      {/* Chat Input */}\r\n      <div className=\"flex gap-2\">\r\n        <Input\r\n          placeholder=\"Ask about this tender...\"\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          onKeyDown={(e) => e.key === \"Enter\" && !e.shiftKey && handleSend()}\r\n          disabled={loading}\r\n          className=\"text-sm\"\r\n        />\r\n        <Button size=\"icon\" onClick={handleSend} disabled={loading || !input.trim()}>\r\n          {loading ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <Send className=\"h-4 w-4\" />}\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Full Strategist Link */}\r\n      <Button variant=\"ghost\" size=\"sm\" className=\"w-full text-xs\" asChild>\r\n        <Link href={`/dashboard/strategist?tenderId=${tender.id}`}>\r\n          Open Full Strategist\r\n          <ArrowRight className=\"h-3 w-3 ml-2\" />\r\n        </Link>\r\n      </Button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport { TenderContextStrategistPanel as TenderContextPanel }\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3693, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repo/LogsOfN/v0-bid-mate-ai/app/dashboard/tenders/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type React from \"react\"\r\nimport { useState, useEffect } from \"react\"\r\nimport { useParams } from \"next/navigation\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\r\nimport { Alert, AlertDescription } from \"@/components/ui/alert\"\r\nimport {\r\n  ArrowLeft,\r\n  Building2,\r\n  Calendar,\r\n  FileText,\r\n  Sparkles,\r\n  Download,\r\n  Upload,\r\n  Trash2,\r\n  Loader2,\r\n  CheckCircle2,\r\n  AlertCircle,\r\n  Clock,\r\n  ClipboardList,\r\n} from \"lucide-react\"\r\nimport Link from \"next/link\"\r\nimport {\r\n  uploadTenderDocument,\r\n  getTenderDocuments,\r\n  downloadTenderDocument,\r\n  deleteTenderDocument,\r\n  analyzeDocument,\r\n} from \"@/app/actions/document-actions\"\r\nimport { DynamicTenderForm } from \"@/components/dynamic-tender-form\"\r\nimport { useChat } from \"@ai-sdk/react\"\r\nimport { DefaultChatTransport } from \"@/lib/providers\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { TenderContextStrategistPanel } from \"@/components/strategist/tender-context-panel\"\r\n\r\n// Mock data - will be replaced with database queries\r\nconst mockTender = {\r\n  id: \"1\",\r\n  title: \"Medical Supplies Procurement\",\r\n  organization: \"Department of Health\",\r\n  status: \"in-progress\",\r\n  deadline: \"2025-02-15\",\r\n  value: \"R 2,500,000\",\r\n  analyzed: true,\r\n  createdAt: \"2025-01-05\",\r\n  description:\r\n    \"Procurement of medical supplies including surgical equipment, pharmaceuticals, and protective gear for provincial hospitals.\",\r\n  requirements: [\r\n    \"Valid tax clearance certificate\",\r\n    \"BEE Level 2 or higher\",\r\n    \"Minimum 5 years experience in medical supply\",\r\n    \"ISO 9001 certification\",\r\n  ],\r\n  documents: [\r\n    {\r\n      id: \"1\",\r\n      file_name: \"Tender Document.pdf\",\r\n      file_size: 2500000,\r\n      file_type: \"application/pdf\",\r\n      created_at: \"2025-01-05\",\r\n      ai_analysis: {\r\n        summary: \"AI Analysis Summary\",\r\n        keyRequirements: [\"Key Requirement 1\", \"Key Requirement 2\"],\r\n        recommendations: [\"Recommendation 1\", \"Recommendation 2\"],\r\n        actionableTasks: [\r\n          { task: \"Task 1\", priority: \"high\", category: \"Category 1\", deadline: \"2025-01-10\" },\r\n          { task: \"Task 2\", priority: \"medium\", category: \"Category 2\", deadline: \"2025-01-15\" },\r\n        ],\r\n        deadlines: [\"Deadline 1\", \"Deadline 2\"],\r\n        complianceChecklist: [\"Item 1\", \"Item 2\"],\r\n      },\r\n    },\r\n    {\r\n      id: \"2\",\r\n      file_name: \"Company Profile.pdf\",\r\n      file_size: 1200000,\r\n      file_type: \"application/pdf\",\r\n      created_at: \"2025-01-06\",\r\n      ai_analysis: null,\r\n    },\r\n    {\r\n      id: \"3\",\r\n      file_name: \"Tax Clearance.pdf\",\r\n      file_size: 800000,\r\n      file_type: \"application/pdf\",\r\n      created_at: \"2025-01-06\",\r\n      ai_analysis: null,\r\n    },\r\n  ],\r\n}\r\n\r\nexport default function TenderDetailPage() {\r\n  const params = useParams()\r\n  const id = params.id as string\r\n  const router = useRouter()\r\n\r\n  const [tender, setTender] = useState<any>(null)\r\n  const [documents, setDocuments] = useState<any[]>([])\r\n  const [analysis, setAnalysis] = useState<any>(null)\r\n  const [uploading, setUploading] = useState(false)\r\n  const [analyzing, setAnalyzing] = useState<string | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [chatInput, setChatInput] = useState(\"\")\r\n  const [selectedFile, setSelectedFile] = useState<File | null>(null) // Declare setSelectedFile variable\r\n\r\n  useEffect(() => {\r\n    loadTenderData()\r\n  }, [id])\r\n\r\n  const loadTenderData = async () => {\r\n    try {\r\n      // Fetch tender and analysis from database\r\n      const response = await fetch(`/api/tenders/${id}`)\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        setTender(data.tender)\r\n        setAnalysis(data.analysis)\r\n        setDocuments(data.documents || [])\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[v0] Error loading tender:\", error)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  // loadDocuments removed as we load everything in loadTenderData\r\n\r\n  const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0]\r\n    if (!file) return\r\n\r\n    setSelectedFile(file)\r\n    setUploading(true)\r\n\r\n    const formData = new FormData()\r\n    formData.append(\"file\", file)\r\n    formData.append(\"userTenderId\", id)\r\n\r\n    const result = await uploadTenderDocument(formData)\r\n\r\n    if (result.success) {\r\n      await loadTenderData()\r\n      setSelectedFile(null)\r\n      e.target.value = \"\"\r\n\r\n      // Auto-analyze PDF documents\r\n      if (file.type === \"application/pdf\") {\r\n        await handleAnalyzeDocument(result.data.id, file)\r\n      }\r\n    } else {\r\n      alert(result.error || \"Failed to upload document\")\r\n    }\r\n\r\n    setUploading(false)\r\n  }\r\n\r\n  const handleDownload = async (documentId: string) => {\r\n    const result = await downloadTenderDocument(documentId)\r\n    if (result.success && result.url) {\r\n      window.open(result.url, \"_blank\")\r\n    } else {\r\n      alert(result.error || \"Failed to download document\")\r\n    }\r\n  }\r\n\r\n  const handleDelete = async (documentId: string) => {\r\n    if (!confirm(\"Are you sure you want to delete this document?\")) return\r\n\r\n    const result = await deleteTenderDocument(documentId)\r\n    if (result.success) {\r\n      await loadTenderData()\r\n    } else {\r\n      alert(result.error || \"Failed to delete document\")\r\n    }\r\n  }\r\n\r\n  const handleAnalyzeDocument = async (documentId: string, file: File) => {\r\n    setAnalyzing(documentId)\r\n\r\n    try {\r\n      console.log(\"[v0] Starting document analysis for:\", file.name, \"Type:\", file.type, \"Size:\", file.size)\r\n\r\n      // Extract text from PDF using the API\r\n      const formData = new FormData()\r\n      formData.append(\"file\", file)\r\n\r\n      console.log(\"[v0] Sending PDF to extraction API...\")\r\n      const extractResponse = await fetch(\"/api/extract-pdf\", {\r\n        method: \"POST\",\r\n        body: formData,\r\n      })\r\n\r\n      console.log(\"[v0] Extract API response status:\", extractResponse.status)\r\n\r\n      if (!extractResponse.ok) {\r\n        let errorData\r\n        try {\r\n          errorData = await extractResponse.json()\r\n        } catch {\r\n          errorData = { error: `HTTP ${extractResponse.status}: ${extractResponse.statusText}` }\r\n        }\r\n        console.error(\"[v0] PDF extraction failed:\", errorData)\r\n        throw new Error(errorData.error || \"Failed to extract text from PDF\")\r\n      }\r\n\r\n      const { text } = await extractResponse.json()\r\n      console.log(\"[v0] Extracted text length:\", text.length)\r\n      console.log(\"[v0] Text preview:\", text.substring(0, 200))\r\n\r\n      if (!text || text.length < 50) {\r\n        throw new Error(\"Could not extract sufficient text from PDF. Please ensure the PDF contains searchable text.\")\r\n      }\r\n\r\n      console.log(\"[v0] Sending text to analysis API...\")\r\n      const analyzeResponse = await fetch(\"/api/analyze-tender\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ documentText: text }),\r\n      })\r\n\r\n      console.log(\"[v0] Analyze API response status:\", analyzeResponse.status)\r\n      console.log(\"[v0] Analyze API response headers:\", Object.fromEntries(analyzeResponse.headers.entries()))\r\n\r\n      const responseClone = analyzeResponse.clone()\r\n\r\n      if (!analyzeResponse.ok) {\r\n        let errorData\r\n        try {\r\n          errorData = await analyzeResponse.json()\r\n        } catch (jsonError) {\r\n          console.error(\"[v0] Failed to parse error response as JSON:\", jsonError)\r\n          const responseText = await responseClone.text()\r\n          console.error(\"[v0] Error response body:\", responseText)\r\n          errorData = { error: `HTTP ${analyzeResponse.status}: ${analyzeResponse.statusText}` }\r\n        }\r\n        console.error(\"[v0] Analysis API failed:\", errorData)\r\n        throw new Error(errorData.error || \"Failed to analyze document\")\r\n      }\r\n\r\n      let analysis\r\n      try {\r\n        const contentType = analyzeResponse.headers.get(\"content-type\")\r\n        console.log(\"[v0] Response content-type:\", contentType)\r\n\r\n        if (!contentType || !contentType.includes(\"application/json\")) {\r\n          const responseText = await responseClone.text()\r\n          console.error(\"[v0] Response is not JSON. Content-Type:\", contentType)\r\n          console.error(\"[v0] Response body:\", responseText)\r\n          throw new Error(\"Server returned non-JSON response. Expected JSON but got: \" + contentType)\r\n        }\r\n\r\n        analysis = await analyzeResponse.json()\r\n        console.log(\"[v0] Analysis received:\", analysis)\r\n      } catch (jsonError) {\r\n        console.error(\"[v0] Failed to parse analysis response as JSON:\", jsonError)\r\n        try {\r\n          const responseText = await responseClone.text()\r\n          console.error(\"[v0] Response body was:\", responseText)\r\n        } catch (textError) {\r\n          console.error(\"[v0] Could not read response body:\", textError)\r\n        }\r\n        throw new Error(\"Failed to parse analysis response. The server returned invalid JSON.\")\r\n      }\r\n\r\n      const result = await analyzeDocument(documentId, analysis)\r\n      console.log(\"[v0] Save result:\", result)\r\n\r\n      if (result.success) {\r\n        await loadTenderData()\r\n        alert(\"Document analyzed successfully!\")\r\n      } else {\r\n        console.error(\"[v0] Failed to save analysis:\", result.error)\r\n        throw new Error(result.error || \"Failed to save analysis\")\r\n      }\r\n    } catch (error: any) {\r\n      console.error(\"[v0] Error analyzing document:\", error)\r\n      alert(error.message || \"Failed to analyze document\")\r\n    } finally {\r\n      setAnalyzing(null)\r\n    }\r\n  }\r\n\r\n  const handleAnalyzeFromInsights = async (doc: any) => {\r\n    setAnalyzing(doc.id)\r\n    try {\r\n      console.log(\"[v0] Analyzing document from insights:\", doc.file_name)\r\n      console.log(\"[v0] Storage path:\", doc.storage_path)\r\n      console.log(\"[v0] File type:\", doc.file_type)\r\n\r\n      // Check if it's an external document or uploaded document\r\n      const isExternalUrl = doc.storage_path.startsWith(\"http://\") || doc.storage_path.startsWith(\"https://\")\r\n\r\n      if (isExternalUrl) {\r\n        console.log(\"[v0] Fetching external document via proxy:\", doc.storage_path)\r\n\r\n        const proxyResponse = await fetch(\"/api/proxy-document\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({ url: doc.storage_path }),\r\n        })\r\n\r\n        console.log(\"[v0] Proxy response status:\", proxyResponse.status)\r\n\r\n        if (!proxyResponse.ok) {\r\n          const error = await proxyResponse.json()\r\n          console.error(\"[v0] Proxy failed:\", error)\r\n          throw new Error(error.error || \"Failed to fetch external document\")\r\n        }\r\n\r\n        const { data, type } = await proxyResponse.json()\r\n        console.log(\"[v0] Received document from proxy, type:\", type, \"data length:\", data.length)\r\n\r\n        // Convert base64 back to blob\r\n        const binaryString = atob(data)\r\n        const bytes = new Uint8Array(binaryString.length)\r\n        for (let i = 0; i < binaryString.length; i++) {\r\n          bytes[i] = binaryString.charCodeAt(i)\r\n        }\r\n        const blob = new Blob([bytes], { type })\r\n        const file = new File([blob], doc.file_name, { type })\r\n\r\n        console.log(\"[v0] Created file from blob:\", file.name, file.size, file.type)\r\n        await handleAnalyzeDocument(doc.id, file)\r\n      } else {\r\n        // For uploaded documents, download from Supabase Storage\r\n        console.log(\"[v0] Downloading uploaded document from Supabase\")\r\n        const downloadResult = await downloadTenderDocument(doc.id)\r\n\r\n        if (!downloadResult.success || !downloadResult.url) {\r\n          console.error(\"[v0] Download failed:\", downloadResult.error)\r\n          throw new Error(downloadResult.error || \"Failed to download document\")\r\n        }\r\n\r\n        console.log(\"[v0] Download URL obtained, fetching file...\")\r\n        const fileResponse = await fetch(downloadResult.url)\r\n\r\n        if (!fileResponse.ok) {\r\n          throw new Error(`Failed to fetch file: ${fileResponse.statusText}`)\r\n        }\r\n\r\n        const blob = await fileResponse.blob()\r\n        const file = new File([blob], doc.file_name, { type: doc.file_type })\r\n\r\n        console.log(\"[v0] File downloaded:\", file.name, file.size, file.type)\r\n        await handleAnalyzeDocument(doc.id, file)\r\n      }\r\n    } catch (error: any) {\r\n      console.error(\"[v0] Error in handleAnalyzeFromInsights:\", error)\r\n      alert(error.message || \"Failed to analyze document\")\r\n      setAnalyzing(null)\r\n    }\r\n  }\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case \"draft\":\r\n        return \"bg-muted text-muted-foreground\"\r\n      case \"in-progress\":\r\n        return \"bg-accent/10 text-accent\"\r\n      case \"submitted\":\r\n        return \"bg-secondary/10 text-secondary\"\r\n      default:\r\n        return \"bg-muted text-muted-foreground\"\r\n    }\r\n  }\r\n\r\n  const getPriorityColor = (priority: string) => {\r\n    switch (priority) {\r\n      case \"high\":\r\n        return \"bg-red-500/10 text-red-500 border-red-500/20\"\r\n      case \"medium\":\r\n        return \"bg-yellow-500/10 text-yellow-500 border-yellow-500/20\"\r\n      case \"low\":\r\n        return \"bg-green-500/10 text-green-500 border-green-500/20\"\r\n      default:\r\n        return \"bg-muted text-muted-foreground\"\r\n    }\r\n  }\r\n\r\n  const getPriorityIcon = (priority: string) => {\r\n    switch (priority) {\r\n      case \"high\":\r\n        return <AlertCircle className=\"h-4 w-4\" />\r\n      case \"medium\":\r\n        return <Clock className=\"h-4 w-4\" />\r\n      case \"low\":\r\n        return <CheckCircle2 className=\"h-4 w-4\" />\r\n      default:\r\n        return null\r\n    }\r\n  }\r\n\r\n  const { messages, sendMessage, status } = useChat({\r\n    transport: new DefaultChatTransport({\r\n      api: \"/api/ai-assistant\",\r\n      body: {\r\n        tenderContext: {\r\n          title: tender?.title || \"Tender\",\r\n          organization: tender?.source_name,\r\n          description: tender?.description,\r\n        },\r\n      },\r\n    }),\r\n  })\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center p-8\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!tender) {\r\n    return (\r\n      <div className=\"p-6 md:p-8\">\r\n        <Alert variant=\"destructive\">\r\n          <AlertCircle className=\"h-4 w-4\" />\r\n          <AlertDescription>Tender not found</AlertDescription>\r\n        </Alert>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-4 md:p-6 lg:p-8 space-y-4 md:space-y-6\">\r\n      <div className=\"flex flex-col lg:flex-row gap-6\">\r\n        {/* Main Content */}\r\n        <div className=\"flex-1 space-y-4 md:space-y-6\">\r\n          <div>\r\n            <div className=\"flex items-center gap-4 mb-4\">\r\n              <Button variant=\"ghost\" size=\"icon\" asChild>\r\n                <Link href=\"/dashboard/tenders\">\r\n                  <ArrowLeft className=\"h-5 w-5\" />\r\n                </Link>\r\n              </Button>\r\n              <h1 className=\"text-2xl md:text-3xl font-bold text-foreground\">\r\n                {analysis?.tender_summary?.title || tender.title || \"Tender\"}\r\n              </h1>\r\n            </div>\r\n            <div className=\"flex flex-wrap gap-2 mb-4\">\r\n              <Badge className=\"bg-primary/10 text-primary\">Scraped</Badge>\r\n              {tender.category && <Badge variant=\"outline\">{tender.category}</Badge>}\r\n              {analysis && (\r\n                <Badge variant=\"secondary\" className=\"flex items-center gap-1\">\r\n                  <Sparkles className=\"h-3 w-3\" />\r\n                  AI Analyzed\r\n                </Badge>\r\n              )}\r\n            </div>\r\n            {(analysis?.tender_summary?.description || tender.description) && (\r\n              <p className=\"text-muted-foreground mb-4\">\r\n                {analysis?.tender_summary?.description || tender.description}\r\n              </p>\r\n            )}\r\n            <div className=\"flex flex-wrap gap-4 text-sm text-muted-foreground\">\r\n              {(analysis?.tender_summary?.entity || tender.source_name) && (\r\n                <span className=\"flex items-center gap-1\">\r\n                  <Building2 className=\"h-4 w-4\" />\r\n                  {analysis?.tender_summary?.entity || tender.source_name}\r\n                </span>\r\n              )}\r\n              {(analysis?.tender_summary?.closing_date || tender.close_date) && (\r\n                <span className=\"flex items-center gap-1\">\r\n                  <Clock className=\"h-4 w-4\" />\r\n                  Closes: {new Date(analysis?.tender_summary?.closing_date || tender.close_date).toLocaleDateString()}\r\n                </span>\r\n              )}\r\n              {tender.estimated_value && (\r\n                <span className=\"flex items-center gap-1\">\r\n                  <span>Value: {tender.estimated_value}</span>\r\n                </span>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {analyzing && (\r\n            <Alert>\r\n              <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n              <AlertDescription>Analyzing tender documents with AI... This may take a minute.</AlertDescription>\r\n            </Alert>\r\n          )}\r\n\r\n          <Tabs defaultValue=\"overview\" className=\"space-y-4 md:space-y-6\">\r\n            <TabsList>\r\n              <TabsTrigger value=\"overview\">\r\n                <FileText className=\"h-4 w-4 mr-2\" />\r\n                Overview\r\n              </TabsTrigger>\r\n              {analysis?.action_plan && (\r\n                <TabsTrigger value=\"action-plan\">\r\n                  <CheckCircle2 className=\"h-4 w-4 mr-2\" />\r\n                  Action Plan\r\n                </TabsTrigger>\r\n              )}\r\n              {analysis && (\r\n                <TabsTrigger value=\"analysis\">\r\n                  <Sparkles className=\"h-4 w-4 mr-2\" />\r\n                  AI Insights\r\n                </TabsTrigger>\r\n              )}\r\n              <TabsTrigger value=\"documents\">\r\n                <FileText className=\"h-4 w-4 mr-2\" />\r\n                Documents ({documents.length})\r\n              </TabsTrigger>\r\n              {analysis?.formFields && analysis.formFields.length > 0 && (\r\n                <TabsTrigger value=\"form\">\r\n                  <ClipboardList className=\"h-4 w-4 mr-2\" />\r\n                  Response Form\r\n                </TabsTrigger>\r\n              )}\r\n            </TabsList>\r\n\r\n            <TabsContent value=\"overview\" className=\"space-y-4\">\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle>Tender Information</CardTitle>\r\n                  <CardDescription>\r\n                    {analysis ? \"Information extracted from tender document\" : \"Basic tender information\"}\r\n                  </CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                  {analysis?.tender_summary?.tender_number && (\r\n                    <div className=\"grid grid-cols-[140px_1fr] gap-2 items-start\">\r\n                      <span className=\"text-sm font-medium text-muted-foreground\">Tender Number:</span>\r\n                      <span className=\"text-sm font-mono bg-muted px-2 py-1 rounded\">\r\n                        {analysis.tender_summary.tender_number}\r\n                      </span>\r\n                    </div>\r\n                  )}\r\n                  {(analysis?.tender_summary?.title || tender.title) && (\r\n                    <div className=\"grid grid-cols-[140px_1fr] gap-2 items-start\">\r\n                      <span className=\"text-sm font-medium text-muted-foreground\">Title:</span>\r\n                      <span className=\"text-sm\">{analysis?.tender_summary?.title || tender.title}</span>\r\n                    </div>\r\n                  )}\r\n                  {(analysis?.tender_summary?.entity || tender.source_name) && (\r\n                    <div className=\"grid grid-cols-[140px_1fr] gap-2 items-start\">\r\n                      <span className=\"text-sm font-medium text-muted-foreground\">Organization:</span>\r\n                      <span className=\"text-sm\">{analysis?.tender_summary?.entity || tender.source_name}</span>\r\n                    </div>\r\n                  )}\r\n                  {(analysis?.tender_summary?.closing_date || tender.close_date) && (\r\n                    <div className=\"grid grid-cols-[140px_1fr] gap-2 items-start\">\r\n                      <span className=\"text-sm font-medium text-muted-foreground\">Closing Date:</span>\r\n                      <span className=\"text-sm font-semibold text-orange-600 dark:text-orange-400\">\r\n                        {new Date(analysis?.tender_summary?.closing_date || tender.close_date).toLocaleDateString()}\r\n                      </span>\r\n                    </div>\r\n                  )}\r\n                  {analysis?.tender_summary?.category && (\r\n                    <div className=\"grid grid-cols-[140px_1fr] gap-2 items-start\">\r\n                      <span className=\"text-sm font-medium text-muted-foreground\">Category:</span>\r\n                      <Badge variant=\"outline\">{analysis.tender_summary.category}</Badge>\r\n                    </div>\r\n                  )}\r\n                  {tender.source_url && (\r\n                    <div className=\"grid grid-cols-[140px_1fr] gap-2 items-start\">\r\n                      <span className=\"text-sm font-medium text-muted-foreground\">Source:</span>\r\n                      <a\r\n                        href={tender.source_url}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"text-sm text-primary hover:underline truncate\"\r\n                      >\r\n                        {tender.source_url}\r\n                      </a>\r\n                    </div>\r\n                  )}\r\n                </CardContent>\r\n              </Card>\r\n\r\n              {analysis?.eligibility_requirements && analysis.eligibility_requirements.length > 0 && (\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle className=\"flex items-center gap-2\">\r\n                      <CheckCircle2 className=\"h-5 w-5 text-primary\" />\r\n                      Eligibility Requirements\r\n                    </CardTitle>\r\n                    <CardDescription>Requirements you must meet to qualify</CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <ul className=\"space-y-2\">\r\n                      {analysis.eligibility_requirements.map((req: string, i: number) => (\r\n                        <li key={i} className=\"flex items-start gap-2 text-sm\">\r\n                          <CheckCircle2 className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\r\n                          <span>{req}</span>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </CardContent>\r\n                </Card>\r\n              )}\r\n\r\n              {analysis?.required_documents && analysis.required_documents.length > 0 && (\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle className=\"flex items-center gap-2\">\r\n                      <FileText className=\"h-5 w-5 text-primary\" />\r\n                      Required Documents\r\n                    </CardTitle>\r\n                    <CardDescription>Documents you need to submit</CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <ul className=\"grid gap-2 sm:grid-cols-2\">\r\n                      {analysis.required_documents.map((doc: string, i: number) => (\r\n                        <li key={i} className=\"flex items-start gap-2 text-sm p-2 rounded-lg bg-muted/50\">\r\n                          <FileText className=\"h-4 w-4 text-muted-foreground mt-0.5 flex-shrink-0\" />\r\n                          <span>{doc}</span>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </CardContent>\r\n                </Card>\r\n              )}\r\n            </TabsContent>\r\n\r\n            {analysis?.action_plan && (\r\n              <TabsContent value=\"action-plan\" className=\"space-y-4\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle>AI-Generated Action Plan</CardTitle>\r\n                    <CardDescription>Step-by-step tasks to complete your bid</CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <div className=\"space-y-3\">\r\n                      {analysis.action_plan.map((item: any, i: number) => (\r\n                        <div key={i} className=\"flex items-start gap-3 p-3 rounded-lg border\">\r\n                          <div className={`p-1 rounded ${getPriorityColor(item.priority)}`}>\r\n                            {getPriorityIcon(item.priority)}\r\n                          </div>\r\n                          <div className=\"flex-1\">\r\n                            <p className=\"font-medium text-sm\">{item.task}</p>\r\n                            <div className=\"flex items-center gap-2 mt-1 text-xs text-muted-foreground\">\r\n                              <Badge variant=\"outline\" className=\"text-xs\">\r\n                                {item.category}\r\n                              </Badge>\r\n                              {item.deadline && (\r\n                                <span className=\"flex items-center gap-1\">\r\n                                  <Calendar className=\"h-3 w-3\" />\r\n                                  {item.deadline}\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              </TabsContent>\r\n            )}\r\n\r\n            {analysis && (\r\n              <TabsContent value=\"analysis\" className=\"space-y-4\">\r\n                {analysis.summary && (\r\n                  <Card>\r\n                    <CardHeader>\r\n                      <CardTitle>AI Summary</CardTitle>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <p className=\"text-sm text-muted-foreground\">{analysis.summary}</p>\r\n                    </CardContent>\r\n                  </Card>\r\n                )}\r\n                {analysis.recommendations && analysis.recommendations.length > 0 && (\r\n                  <Card>\r\n                    <CardHeader>\r\n                      <CardTitle>Recommendations</CardTitle>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <ul className=\"space-y-2\">\r\n                        {analysis.recommendations.map((rec: string, i: number) => (\r\n                          <li key={i} className=\"flex items-start gap-2 text-sm\">\r\n                            <Sparkles className=\"h-4 w-4 text-primary mt-0.5 flex-shrink-0\" />\r\n                            <span>{rec}</span>\r\n                          </li>\r\n                        ))}\r\n                      </ul>\r\n                    </CardContent>\r\n                  </Card>\r\n                )}\r\n              </TabsContent>\r\n            )}\r\n\r\n            <TabsContent value=\"documents\" className=\"space-y-4\">\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle>Tender Documents</CardTitle>\r\n                  <CardDescription>Upload and manage your tender documents</CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                  <div className=\"border-2 border-dashed rounded-lg p-6 text-center\">\r\n                    <Input\r\n                      type=\"file\"\r\n                      accept=\".pdf,.doc,.docx,.xls,.xlsx\"\r\n                      onChange={handleFileUpload}\r\n                      disabled={uploading}\r\n                      className=\"hidden\"\r\n                      id=\"file-upload\"\r\n                    />\r\n                    <label htmlFor=\"file-upload\" className=\"cursor-pointer\">\r\n                      <Upload className=\"h-8 w-8 text-muted-foreground mx-auto mb-2\" />\r\n                      <p className=\"text-sm text-muted-foreground mb-1\">\r\n                        {uploading ? \"Uploading...\" : \"Click to upload or drag and drop\"}\r\n                      </p>\r\n                      <p className=\"text-xs text-muted-foreground\">PDF, DOC, DOCX, XLS, XLSX</p>\r\n                    </label>\r\n                  </div>\r\n\r\n                  {documents.length > 0 && (\r\n                    <div className=\"space-y-2\">\r\n                      {documents.map((doc) => (\r\n                        <div key={doc.id} className=\"flex items-center justify-between p-3 rounded-lg border\">\r\n                          <div className=\"flex items-center gap-3\">\r\n                            <FileText className=\"h-5 w-5 text-muted-foreground\" />\r\n                            <div>\r\n                              <p className=\"text-sm font-medium\">{doc.file_name}</p>\r\n                              <p className=\"text-xs text-muted-foreground\">\r\n                                {(doc.file_size / 1024 / 1024).toFixed(2)} MB\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            {doc.ai_analysis && (\r\n                              <Badge variant=\"secondary\" className=\"text-xs\">\r\n                                <Sparkles className=\"h-3 w-3 mr-1\" />\r\n                                Analyzed\r\n                              </Badge>\r\n                            )}\r\n                            {!doc.ai_analysis && doc.file_type === \"application/pdf\" && (\r\n                              <Button\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                onClick={() => handleAnalyzeFromInsights(doc)}\r\n                                disabled={analyzing === doc.id}\r\n                              >\r\n                                {analyzing === doc.id ? (\r\n                                  <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                                ) : (\r\n                                  <>\r\n                                    <Sparkles className=\"h-4 w-4 mr-1\" />\r\n                                    Analyze\r\n                                  </>\r\n                                )}\r\n                              </Button>\r\n                            )}\r\n                            <Button size=\"icon\" variant=\"ghost\" onClick={() => handleDownload(doc.id)}>\r\n                              <Download className=\"h-4 w-4\" />\r\n                            </Button>\r\n                            <Button size=\"icon\" variant=\"ghost\" onClick={() => handleDelete(doc.id)}>\r\n                              <Trash2 className=\"h-4 w-4\" />\r\n                            </Button>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </CardContent>\r\n              </Card>\r\n            </TabsContent>\r\n\r\n            {analysis?.formFields && analysis.formFields.length > 0 && (\r\n              <TabsContent value=\"form\">\r\n                <DynamicTenderForm formFields={analysis.formFields} tenderId={id} />\r\n              </TabsContent>\r\n            )}\r\n          </Tabs>\r\n        </div>\r\n\r\n        <div className=\"lg:w-80 xl:w-96 flex-shrink-0\">\r\n          <div className=\"lg:sticky lg:top-4\">\r\n            <TenderContextStrategistPanel\r\n              tender={{\r\n                id: id,\r\n                title: analysis?.tender_summary?.title || tender.title || \"Tender\",\r\n                organization: analysis?.tender_summary?.entity || tender.source_name,\r\n                description: analysis?.tender_summary?.description || tender.description,\r\n                deadline: analysis?.tender_summary?.closing_date || tender.close_date,\r\n                value: tender.estimated_value,\r\n                requirements: analysis?.eligibility_requirements || [],\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AACA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AACA;;;AAtCA;;;;;;;;;;;;;;;;;AAwCA,qDAAqD;AACrD,MAAM,aAAa;IACjB,IAAI;IACJ,OAAO;IACP,cAAc;IACd,QAAQ;IACR,UAAU;IACV,OAAO;IACP,UAAU;IACV,WAAW;IACX,aACE;IACF,cAAc;QACZ;QACA;QACA;QACA;KACD;IACD,WAAW;QACT;YACE,IAAI;YACJ,WAAW;YACX,WAAW;YACX,WAAW;YACX,YAAY;YACZ,aAAa;gBACX,SAAS;gBACT,iBAAiB;oBAAC;oBAAqB;iBAAoB;gBAC3D,iBAAiB;oBAAC;oBAAoB;iBAAmB;gBACzD,iBAAiB;oBACf;wBAAE,MAAM;wBAAU,UAAU;wBAAQ,UAAU;wBAAc,UAAU;oBAAa;oBACnF;wBAAE,MAAM;wBAAU,UAAU;wBAAU,UAAU;wBAAc,UAAU;oBAAa;iBACtF;gBACD,WAAW;oBAAC;oBAAc;iBAAa;gBACvC,qBAAqB;oBAAC;oBAAU;iBAAS;YAC3C;QACF;QACA;YACE,IAAI;YACJ,WAAW;YACX,WAAW;YACX,WAAW;YACX,YAAY;YACZ,aAAa;QACf;QACA;YACE,IAAI;YACJ,WAAW;YACX,WAAW;YACX,WAAW;YACX,YAAY;YACZ,aAAa;QACf;KACD;AACH;AAEe,SAAS;;IACtB,MAAM,SAAS,IAAA,wPAAS;IACxB,MAAM,KAAK,OAAO,EAAE;IACpB,MAAM,SAAS,IAAA,wPAAS;IAExB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+QAAQ,EAAM;IAC1C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,+QAAQ,EAAQ,EAAE;IACpD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,+QAAQ,EAAM;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,+QAAQ,EAAC;IAC3C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,+QAAQ,EAAgB;IAC1D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+QAAQ,EAAC;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,+QAAQ,EAAC;IAC3C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,+QAAQ,EAAc,MAAM,mCAAmC;;IAEvG,IAAA,gRAAS;sCAAC;YACR;QACF;qCAAG;QAAC;KAAG;IAEP,MAAM,iBAAiB;QACrB,IAAI;YACF,0CAA0C;YAC1C,MAAM,WAAW,MAAM,MAAM,CAAC,aAAa,EAAE,IAAI;YACjD,IAAI,SAAS,EAAE,EAAE;gBACf,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,UAAU,KAAK,MAAM;gBACrB,YAAY,KAAK,QAAQ;gBACzB,aAAa,KAAK,SAAS,IAAI,EAAE;YACnC;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,8BAA8B;QAC9C,SAAU;YACR,WAAW;QACb;IACF;IAEA,gEAAgE;IAEhE,MAAM,mBAAmB,OAAO;QAC9B,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;QAChC,IAAI,CAAC,MAAM;QAEX,gBAAgB;QAChB,aAAa;QAEb,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,QAAQ;QACxB,SAAS,MAAM,CAAC,gBAAgB;QAEhC,MAAM,SAAS,MAAM,IAAA,iLAAoB,EAAC;QAE1C,IAAI,OAAO,OAAO,EAAE;YAClB,MAAM;YACN,gBAAgB;YAChB,EAAE,MAAM,CAAC,KAAK,GAAG;YAEjB,6BAA6B;YAC7B,IAAI,KAAK,IAAI,KAAK,mBAAmB;gBACnC,MAAM,sBAAsB,OAAO,IAAI,CAAC,EAAE,EAAE;YAC9C;QACF,OAAO;YACL,MAAM,OAAO,KAAK,IAAI;QACxB;QAEA,aAAa;IACf;IAEA,MAAM,iBAAiB,OAAO;QAC5B,MAAM,SAAS,MAAM,IAAA,mLAAsB,EAAC;QAC5C,IAAI,OAAO,OAAO,IAAI,OAAO,GAAG,EAAE;YAChC,OAAO,IAAI,CAAC,OAAO,GAAG,EAAE;QAC1B,OAAO;YACL,MAAM,OAAO,KAAK,IAAI;QACxB;IACF;IAEA,MAAM,eAAe,OAAO;QAC1B,IAAI,CAAC,QAAQ,mDAAmD;QAEhE,MAAM,SAAS,MAAM,IAAA,iLAAoB,EAAC;QAC1C,IAAI,OAAO,OAAO,EAAE;YAClB,MAAM;QACR,OAAO;YACL,MAAM,OAAO,KAAK,IAAI;QACxB;IACF;IAEA,MAAM,wBAAwB,OAAO,YAAoB;QACvD,aAAa;QAEb,IAAI;YACF,QAAQ,GAAG,CAAC,wCAAwC,KAAK,IAAI,EAAE,SAAS,KAAK,IAAI,EAAE,SAAS,KAAK,IAAI;YAErG,sCAAsC;YACtC,MAAM,WAAW,IAAI;YACrB,SAAS,MAAM,CAAC,QAAQ;YAExB,QAAQ,GAAG,CAAC;YACZ,MAAM,kBAAkB,MAAM,MAAM,oBAAoB;gBACtD,QAAQ;gBACR,MAAM;YACR;YAEA,QAAQ,GAAG,CAAC,qCAAqC,gBAAgB,MAAM;YAEvE,IAAI,CAAC,gBAAgB,EAAE,EAAE;gBACvB,IAAI;gBACJ,IAAI;oBACF,YAAY,MAAM,gBAAgB,IAAI;gBACxC,EAAE,OAAM;oBACN,YAAY;wBAAE,OAAO,CAAC,KAAK,EAAE,gBAAgB,MAAM,CAAC,EAAE,EAAE,gBAAgB,UAAU,EAAE;oBAAC;gBACvF;gBACA,QAAQ,KAAK,CAAC,+BAA+B;gBAC7C,MAAM,IAAI,MAAM,UAAU,KAAK,IAAI;YACrC;YAEA,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,gBAAgB,IAAI;YAC3C,QAAQ,GAAG,CAAC,+BAA+B,KAAK,MAAM;YACtD,QAAQ,GAAG,CAAC,sBAAsB,KAAK,SAAS,CAAC,GAAG;YAEpD,IAAI,CAAC,QAAQ,KAAK,MAAM,GAAG,IAAI;gBAC7B,MAAM,IAAI,MAAM;YAClB;YAEA,QAAQ,GAAG,CAAC;YACZ,MAAM,kBAAkB,MAAM,MAAM,uBAAuB;gBACzD,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;oBAAE,cAAc;gBAAK;YAC5C;YAEA,QAAQ,GAAG,CAAC,qCAAqC,gBAAgB,MAAM;YACvE,QAAQ,GAAG,CAAC,sCAAsC,OAAO,WAAW,CAAC,gBAAgB,OAAO,CAAC,OAAO;YAEpG,MAAM,gBAAgB,gBAAgB,KAAK;YAE3C,IAAI,CAAC,gBAAgB,EAAE,EAAE;gBACvB,IAAI;gBACJ,IAAI;oBACF,YAAY,MAAM,gBAAgB,IAAI;gBACxC,EAAE,OAAO,WAAW;oBAClB,QAAQ,KAAK,CAAC,gDAAgD;oBAC9D,MAAM,eAAe,MAAM,cAAc,IAAI;oBAC7C,QAAQ,KAAK,CAAC,6BAA6B;oBAC3C,YAAY;wBAAE,OAAO,CAAC,KAAK,EAAE,gBAAgB,MAAM,CAAC,EAAE,EAAE,gBAAgB,UAAU,EAAE;oBAAC;gBACvF;gBACA,QAAQ,KAAK,CAAC,6BAA6B;gBAC3C,MAAM,IAAI,MAAM,UAAU,KAAK,IAAI;YACrC;YAEA,IAAI;YACJ,IAAI;gBACF,MAAM,cAAc,gBAAgB,OAAO,CAAC,GAAG,CAAC;gBAChD,QAAQ,GAAG,CAAC,+BAA+B;gBAE3C,IAAI,CAAC,eAAe,CAAC,YAAY,QAAQ,CAAC,qBAAqB;oBAC7D,MAAM,eAAe,MAAM,cAAc,IAAI;oBAC7C,QAAQ,KAAK,CAAC,4CAA4C;oBAC1D,QAAQ,KAAK,CAAC,uBAAuB;oBACrC,MAAM,IAAI,MAAM,+DAA+D;gBACjF;gBAEA,WAAW,MAAM,gBAAgB,IAAI;gBACrC,QAAQ,GAAG,CAAC,2BAA2B;YACzC,EAAE,OAAO,WAAW;gBAClB,QAAQ,KAAK,CAAC,mDAAmD;gBACjE,IAAI;oBACF,MAAM,eAAe,MAAM,cAAc,IAAI;oBAC7C,QAAQ,KAAK,CAAC,2BAA2B;gBAC3C,EAAE,OAAO,WAAW;oBAClB,QAAQ,KAAK,CAAC,sCAAsC;gBACtD;gBACA,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM,SAAS,MAAM,IAAA,4KAAe,EAAC,YAAY;YACjD,QAAQ,GAAG,CAAC,qBAAqB;YAEjC,IAAI,OAAO,OAAO,EAAE;gBAClB,MAAM;gBACN,MAAM;YACR,OAAO;gBACL,QAAQ,KAAK,CAAC,iCAAiC,OAAO,KAAK;gBAC3D,MAAM,IAAI,MAAM,OAAO,KAAK,IAAI;YAClC;QACF,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,kCAAkC;YAChD,MAAM,MAAM,OAAO,IAAI;QACzB,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,4BAA4B,OAAO;QACvC,aAAa,IAAI,EAAE;QACnB,IAAI;YACF,QAAQ,GAAG,CAAC,0CAA0C,IAAI,SAAS;YACnE,QAAQ,GAAG,CAAC,sBAAsB,IAAI,YAAY;YAClD,QAAQ,GAAG,CAAC,mBAAmB,IAAI,SAAS;YAE5C,0DAA0D;YAC1D,MAAM,gBAAgB,IAAI,YAAY,CAAC,UAAU,CAAC,cAAc,IAAI,YAAY,CAAC,UAAU,CAAC;YAE5F,IAAI,eAAe;gBACjB,QAAQ,GAAG,CAAC,8CAA8C,IAAI,YAAY;gBAE1E,MAAM,gBAAgB,MAAM,MAAM,uBAAuB;oBACvD,QAAQ;oBACR,SAAS;wBACP,gBAAgB;oBAClB;oBACA,MAAM,KAAK,SAAS,CAAC;wBAAE,KAAK,IAAI,YAAY;oBAAC;gBAC/C;gBAEA,QAAQ,GAAG,CAAC,+BAA+B,cAAc,MAAM;gBAE/D,IAAI,CAAC,cAAc,EAAE,EAAE;oBACrB,MAAM,QAAQ,MAAM,cAAc,IAAI;oBACtC,QAAQ,KAAK,CAAC,sBAAsB;oBACpC,MAAM,IAAI,MAAM,MAAM,KAAK,IAAI;gBACjC;gBAEA,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,MAAM,cAAc,IAAI;gBAC/C,QAAQ,GAAG,CAAC,4CAA4C,MAAM,gBAAgB,KAAK,MAAM;gBAEzF,8BAA8B;gBAC9B,MAAM,eAAe,KAAK;gBAC1B,MAAM,QAAQ,IAAI,WAAW,aAAa,MAAM;gBAChD,IAAK,IAAI,IAAI,GAAG,IAAI,aAAa,MAAM,EAAE,IAAK;oBAC5C,KAAK,CAAC,EAAE,GAAG,aAAa,UAAU,CAAC;gBACrC;gBACA,MAAM,OAAO,IAAI,KAAK;oBAAC;iBAAM,EAAE;oBAAE;gBAAK;gBACtC,MAAM,OAAO,IAAI,KAAK;oBAAC;iBAAK,EAAE,IAAI,SAAS,EAAE;oBAAE;gBAAK;gBAEpD,QAAQ,GAAG,CAAC,gCAAgC,KAAK,IAAI,EAAE,KAAK,IAAI,EAAE,KAAK,IAAI;gBAC3E,MAAM,sBAAsB,IAAI,EAAE,EAAE;YACtC,OAAO;gBACL,yDAAyD;gBACzD,QAAQ,GAAG,CAAC;gBACZ,MAAM,iBAAiB,MAAM,IAAA,mLAAsB,EAAC,IAAI,EAAE;gBAE1D,IAAI,CAAC,eAAe,OAAO,IAAI,CAAC,eAAe,GAAG,EAAE;oBAClD,QAAQ,KAAK,CAAC,yBAAyB,eAAe,KAAK;oBAC3D,MAAM,IAAI,MAAM,eAAe,KAAK,IAAI;gBAC1C;gBAEA,QAAQ,GAAG,CAAC;gBACZ,MAAM,eAAe,MAAM,MAAM,eAAe,GAAG;gBAEnD,IAAI,CAAC,aAAa,EAAE,EAAE;oBACpB,MAAM,IAAI,MAAM,CAAC,sBAAsB,EAAE,aAAa,UAAU,EAAE;gBACpE;gBAEA,MAAM,OAAO,MAAM,aAAa,IAAI;gBACpC,MAAM,OAAO,IAAI,KAAK;oBAAC;iBAAK,EAAE,IAAI,SAAS,EAAE;oBAAE,MAAM,IAAI,SAAS;gBAAC;gBAEnE,QAAQ,GAAG,CAAC,yBAAyB,KAAK,IAAI,EAAE,KAAK,IAAI,EAAE,KAAK,IAAI;gBACpE,MAAM,sBAAsB,IAAI,EAAE,EAAE;YACtC;QACF,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,4CAA4C;YAC1D,MAAM,MAAM,OAAO,IAAI;YACvB,aAAa;QACf;IACF;IAEA,MAAM,iBAAiB,CAAC;QACtB,OAAQ;YACN,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT;gBACE,OAAO;QACX;IACF;IAEA,MAAM,mBAAmB,CAAC;QACxB,OAAQ;YACN,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT;gBACE,OAAO;QACX;IACF;IAEA,MAAM,kBAAkB,CAAC;QACvB,OAAQ;YACN,KAAK;gBACH,qBAAO,mSAAC,0TAAW;oBAAC,WAAU;;;;;;YAChC,KAAK;gBACH,qBAAO,mSAAC,oSAAK;oBAAC,WAAU;;;;;;YAC1B,KAAK;gBACH,qBAAO,mSAAC,4TAAY;oBAAC,WAAU;;;;;;YACjC;gBACE,OAAO;QACX;IACF;IAEA,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,MAAM,EAAE,GAAG,IAAA,kRAAO,EAAC;QAChD,WAAW,IAAI,oJAAoB,CAAC;YAClC,KAAK;YACL,MAAM;gBACJ,eAAe;oBACb,OAAO,QAAQ,SAAS;oBACxB,cAAc,QAAQ;oBACtB,aAAa,QAAQ;gBACvB;YACF;QACF;IACF;IAEA,IAAI,SAAS;QACX,qBACE,mSAAC;YAAI,WAAU;sBACb,cAAA,mSAAC,mTAAO;gBAAC,WAAU;;;;;;;;;;;IAGzB;IAEA,IAAI,CAAC,QAAQ;QACX,qBACE,mSAAC;YAAI,WAAU;sBACb,cAAA,mSAAC,sIAAK;gBAAC,SAAQ;;kCACb,mSAAC,0TAAW;wBAAC,WAAU;;;;;;kCACvB,mSAAC,iJAAgB;kCAAC;;;;;;;;;;;;;;;;;IAI1B;IAEA,qBACE,mSAAC;QAAI,WAAU;kBACb,cAAA,mSAAC;YAAI,WAAU;;8BAEb,mSAAC;oBAAI,WAAU;;sCACb,mSAAC;;8CACC,mSAAC;oCAAI,WAAU;;sDACb,mSAAC,wIAAM;4CAAC,SAAQ;4CAAQ,MAAK;4CAAO,OAAO;sDACzC,cAAA,mSAAC,gRAAI;gDAAC,MAAK;0DACT,cAAA,mSAAC,oTAAS;oDAAC,WAAU;;;;;;;;;;;;;;;;sDAGzB,mSAAC;4CAAG,WAAU;sDACX,UAAU,gBAAgB,SAAS,OAAO,KAAK,IAAI;;;;;;;;;;;;8CAGxD,mSAAC;oCAAI,WAAU;;sDACb,mSAAC,sIAAK;4CAAC,WAAU;sDAA6B;;;;;;wCAC7C,OAAO,QAAQ,kBAAI,mSAAC,sIAAK;4CAAC,SAAQ;sDAAW,OAAO,QAAQ;;;;;;wCAC5D,0BACC,mSAAC,sIAAK;4CAAC,SAAQ;4CAAY,WAAU;;8DACnC,mSAAC,6SAAQ;oDAAC,WAAU;;;;;;gDAAY;;;;;;;;;;;;;gCAKrC,CAAC,UAAU,gBAAgB,eAAe,OAAO,WAAW,mBAC3D,mSAAC;oCAAE,WAAU;8CACV,UAAU,gBAAgB,eAAe,OAAO,WAAW;;;;;;8CAGhE,mSAAC;oCAAI,WAAU;;wCACZ,CAAC,UAAU,gBAAgB,UAAU,OAAO,WAAW,mBACtD,mSAAC;4CAAK,WAAU;;8DACd,mSAAC,oTAAS;oDAAC,WAAU;;;;;;gDACpB,UAAU,gBAAgB,UAAU,OAAO,WAAW;;;;;;;wCAG1D,CAAC,UAAU,gBAAgB,gBAAgB,OAAO,UAAU,mBAC3D,mSAAC;4CAAK,WAAU;;8DACd,mSAAC,oSAAK;oDAAC,WAAU;;;;;;gDAAY;gDACpB,IAAI,KAAK,UAAU,gBAAgB,gBAAgB,OAAO,UAAU,EAAE,kBAAkB;;;;;;;wCAGpG,OAAO,eAAe,kBACrB,mSAAC;4CAAK,WAAU;sDACd,cAAA,mSAAC;;oDAAK;oDAAQ,OAAO,eAAe;;;;;;;;;;;;;;;;;;;;;;;;wBAM3C,2BACC,mSAAC,sIAAK;;8CACJ,mSAAC,mTAAO;oCAAC,WAAU;;;;;;8CACnB,mSAAC,iJAAgB;8CAAC;;;;;;;;;;;;sCAItB,mSAAC,oIAAI;4BAAC,cAAa;4BAAW,WAAU;;8CACtC,mSAAC,wIAAQ;;sDACP,mSAAC,2IAAW;4CAAC,OAAM;;8DACjB,mSAAC,iTAAQ;oDAAC,WAAU;;;;;;gDAAiB;;;;;;;wCAGtC,UAAU,6BACT,mSAAC,2IAAW;4CAAC,OAAM;;8DACjB,mSAAC,4TAAY;oDAAC,WAAU;;;;;;gDAAiB;;;;;;;wCAI5C,0BACC,mSAAC,2IAAW;4CAAC,OAAM;;8DACjB,mSAAC,6SAAQ;oDAAC,WAAU;;;;;;gDAAiB;;;;;;;sDAIzC,mSAAC,2IAAW;4CAAC,OAAM;;8DACjB,mSAAC,iTAAQ;oDAAC,WAAU;;;;;;gDAAiB;gDACzB,UAAU,MAAM;gDAAC;;;;;;;wCAE9B,UAAU,cAAc,SAAS,UAAU,CAAC,MAAM,GAAG,mBACpD,mSAAC,2IAAW;4CAAC,OAAM;;8DACjB,mSAAC,gUAAa;oDAAC,WAAU;;;;;;gDAAiB;;;;;;;;;;;;;8CAMhD,mSAAC,2IAAW;oCAAC,OAAM;oCAAW,WAAU;;sDACtC,mSAAC,oIAAI;;8DACH,mSAAC,0IAAU;;sEACT,mSAAC,yIAAS;sEAAC;;;;;;sEACX,mSAAC,+IAAe;sEACb,WAAW,+CAA+C;;;;;;;;;;;;8DAG/D,mSAAC,2IAAW;oDAAC,WAAU;;wDACpB,UAAU,gBAAgB,+BACzB,mSAAC;4DAAI,WAAU;;8EACb,mSAAC;oEAAK,WAAU;8EAA4C;;;;;;8EAC5D,mSAAC;oEAAK,WAAU;8EACb,SAAS,cAAc,CAAC,aAAa;;;;;;;;;;;;wDAI3C,CAAC,UAAU,gBAAgB,SAAS,OAAO,KAAK,mBAC/C,mSAAC;4DAAI,WAAU;;8EACb,mSAAC;oEAAK,WAAU;8EAA4C;;;;;;8EAC5D,mSAAC;oEAAK,WAAU;8EAAW,UAAU,gBAAgB,SAAS,OAAO,KAAK;;;;;;;;;;;;wDAG7E,CAAC,UAAU,gBAAgB,UAAU,OAAO,WAAW,mBACtD,mSAAC;4DAAI,WAAU;;8EACb,mSAAC;oEAAK,WAAU;8EAA4C;;;;;;8EAC5D,mSAAC;oEAAK,WAAU;8EAAW,UAAU,gBAAgB,UAAU,OAAO,WAAW;;;;;;;;;;;;wDAGpF,CAAC,UAAU,gBAAgB,gBAAgB,OAAO,UAAU,mBAC3D,mSAAC;4DAAI,WAAU;;8EACb,mSAAC;oEAAK,WAAU;8EAA4C;;;;;;8EAC5D,mSAAC;oEAAK,WAAU;8EACb,IAAI,KAAK,UAAU,gBAAgB,gBAAgB,OAAO,UAAU,EAAE,kBAAkB;;;;;;;;;;;;wDAI9F,UAAU,gBAAgB,0BACzB,mSAAC;4DAAI,WAAU;;8EACb,mSAAC;oEAAK,WAAU;8EAA4C;;;;;;8EAC5D,mSAAC,sIAAK;oEAAC,SAAQ;8EAAW,SAAS,cAAc,CAAC,QAAQ;;;;;;;;;;;;wDAG7D,OAAO,UAAU,kBAChB,mSAAC;4DAAI,WAAU;;8EACb,mSAAC;oEAAK,WAAU;8EAA4C;;;;;;8EAC5D,mSAAC;oEACC,MAAM,OAAO,UAAU;oEACvB,QAAO;oEACP,KAAI;oEACJ,WAAU;8EAET,OAAO,UAAU;;;;;;;;;;;;;;;;;;;;;;;;wCAO3B,UAAU,4BAA4B,SAAS,wBAAwB,CAAC,MAAM,GAAG,mBAChF,mSAAC,oIAAI;;8DACH,mSAAC,0IAAU;;sEACT,mSAAC,yIAAS;4DAAC,WAAU;;8EACnB,mSAAC,4TAAY;oEAAC,WAAU;;;;;;gEAAyB;;;;;;;sEAGnD,mSAAC,+IAAe;sEAAC;;;;;;;;;;;;8DAEnB,mSAAC,2IAAW;8DACV,cAAA,mSAAC;wDAAG,WAAU;kEACX,SAAS,wBAAwB,CAAC,GAAG,CAAC,CAAC,KAAa,kBACnD,mSAAC;gEAAW,WAAU;;kFACpB,mSAAC,4TAAY;wEAAC,WAAU;;;;;;kFACxB,mSAAC;kFAAM;;;;;;;+DAFA;;;;;;;;;;;;;;;;;;;;;wCAUlB,UAAU,sBAAsB,SAAS,kBAAkB,CAAC,MAAM,GAAG,mBACpE,mSAAC,oIAAI;;8DACH,mSAAC,0IAAU;;sEACT,mSAAC,yIAAS;4DAAC,WAAU;;8EACnB,mSAAC,iTAAQ;oEAAC,WAAU;;;;;;gEAAyB;;;;;;;sEAG/C,mSAAC,+IAAe;sEAAC;;;;;;;;;;;;8DAEnB,mSAAC,2IAAW;8DACV,cAAA,mSAAC;wDAAG,WAAU;kEACX,SAAS,kBAAkB,CAAC,GAAG,CAAC,CAAC,KAAa,kBAC7C,mSAAC;gEAAW,WAAU;;kFACpB,mSAAC,iTAAQ;wEAAC,WAAU;;;;;;kFACpB,mSAAC;kFAAM;;;;;;;+DAFA;;;;;;;;;;;;;;;;;;;;;;;;;;;gCAWpB,UAAU,6BACT,mSAAC,2IAAW;oCAAC,OAAM;oCAAc,WAAU;8CACzC,cAAA,mSAAC,oIAAI;;0DACH,mSAAC,0IAAU;;kEACT,mSAAC,yIAAS;kEAAC;;;;;;kEACX,mSAAC,+IAAe;kEAAC;;;;;;;;;;;;0DAEnB,mSAAC,2IAAW;0DACV,cAAA,mSAAC;oDAAI,WAAU;8DACZ,SAAS,WAAW,CAAC,GAAG,CAAC,CAAC,MAAW,kBACpC,mSAAC;4DAAY,WAAU;;8EACrB,mSAAC;oEAAI,WAAW,CAAC,YAAY,EAAE,iBAAiB,KAAK,QAAQ,GAAG;8EAC7D,gBAAgB,KAAK,QAAQ;;;;;;8EAEhC,mSAAC;oEAAI,WAAU;;sFACb,mSAAC;4EAAE,WAAU;sFAAuB,KAAK,IAAI;;;;;;sFAC7C,mSAAC;4EAAI,WAAU;;8FACb,mSAAC,sIAAK;oFAAC,SAAQ;oFAAU,WAAU;8FAChC,KAAK,QAAQ;;;;;;gFAEf,KAAK,QAAQ,kBACZ,mSAAC;oFAAK,WAAU;;sGACd,mSAAC,6SAAQ;4FAAC,WAAU;;;;;;wFACnB,KAAK,QAAQ;;;;;;;;;;;;;;;;;;;;2DAbd;;;;;;;;;;;;;;;;;;;;;;;;;;gCA0BrB,0BACC,mSAAC,2IAAW;oCAAC,OAAM;oCAAW,WAAU;;wCACrC,SAAS,OAAO,kBACf,mSAAC,oIAAI;;8DACH,mSAAC,0IAAU;8DACT,cAAA,mSAAC,yIAAS;kEAAC;;;;;;;;;;;8DAEb,mSAAC,2IAAW;8DACV,cAAA,mSAAC;wDAAE,WAAU;kEAAiC,SAAS,OAAO;;;;;;;;;;;;;;;;;wCAInE,SAAS,eAAe,IAAI,SAAS,eAAe,CAAC,MAAM,GAAG,mBAC7D,mSAAC,oIAAI;;8DACH,mSAAC,0IAAU;8DACT,cAAA,mSAAC,yIAAS;kEAAC;;;;;;;;;;;8DAEb,mSAAC,2IAAW;8DACV,cAAA,mSAAC;wDAAG,WAAU;kEACX,SAAS,eAAe,CAAC,GAAG,CAAC,CAAC,KAAa,kBAC1C,mSAAC;gEAAW,WAAU;;kFACpB,mSAAC,6SAAQ;wEAAC,WAAU;;;;;;kFACpB,mSAAC;kFAAM;;;;;;;+DAFA;;;;;;;;;;;;;;;;;;;;;;;;;;;8CAYvB,mSAAC,2IAAW;oCAAC,OAAM;oCAAY,WAAU;8CACvC,cAAA,mSAAC,oIAAI;;0DACH,mSAAC,0IAAU;;kEACT,mSAAC,yIAAS;kEAAC;;;;;;kEACX,mSAAC,+IAAe;kEAAC;;;;;;;;;;;;0DAEnB,mSAAC,2IAAW;gDAAC,WAAU;;kEACrB,mSAAC;wDAAI,WAAU;;0EACb,mSAAC,sIAAK;gEACJ,MAAK;gEACL,QAAO;gEACP,UAAU;gEACV,UAAU;gEACV,WAAU;gEACV,IAAG;;;;;;0EAEL,mSAAC;gEAAM,SAAQ;gEAAc,WAAU;;kFACrC,mSAAC,uSAAM;wEAAC,WAAU;;;;;;kFAClB,mSAAC;wEAAE,WAAU;kFACV,YAAY,iBAAiB;;;;;;kFAEhC,mSAAC;wEAAE,WAAU;kFAAgC;;;;;;;;;;;;;;;;;;oDAIhD,UAAU,MAAM,GAAG,mBAClB,mSAAC;wDAAI,WAAU;kEACZ,UAAU,GAAG,CAAC,CAAC,oBACd,mSAAC;gEAAiB,WAAU;;kFAC1B,mSAAC;wEAAI,WAAU;;0FACb,mSAAC,iTAAQ;gFAAC,WAAU;;;;;;0FACpB,mSAAC;;kGACC,mSAAC;wFAAE,WAAU;kGAAuB,IAAI,SAAS;;;;;;kGACjD,mSAAC;wFAAE,WAAU;;4FACV,CAAC,IAAI,SAAS,GAAG,OAAO,IAAI,EAAE,OAAO,CAAC;4FAAG;;;;;;;;;;;;;;;;;;;kFAIhD,mSAAC;wEAAI,WAAU;;4EACZ,IAAI,WAAW,kBACd,mSAAC,sIAAK;gFAAC,SAAQ;gFAAY,WAAU;;kGACnC,mSAAC,6SAAQ;wFAAC,WAAU;;;;;;oFAAiB;;;;;;;4EAIxC,CAAC,IAAI,WAAW,IAAI,IAAI,SAAS,KAAK,mCACrC,mSAAC,wIAAM;gFACL,MAAK;gFACL,SAAQ;gFACR,SAAS,IAAM,0BAA0B;gFACzC,UAAU,cAAc,IAAI,EAAE;0FAE7B,cAAc,IAAI,EAAE,iBACnB,mSAAC,mTAAO;oFAAC,WAAU;;;;;yGAEnB;;sGACE,mSAAC,6SAAQ;4FAAC,WAAU;;;;;;wFAAiB;;;;;;;;0FAM7C,mSAAC,wIAAM;gFAAC,MAAK;gFAAO,SAAQ;gFAAQ,SAAS,IAAM,eAAe,IAAI,EAAE;0FACtE,cAAA,mSAAC,6SAAQ;oFAAC,WAAU;;;;;;;;;;;0FAEtB,mSAAC,wIAAM;gFAAC,MAAK;gFAAO,SAAQ;gFAAQ,SAAS,IAAM,aAAa,IAAI,EAAE;0FACpE,cAAA,mSAAC,2SAAM;oFAAC,WAAU;;;;;;;;;;;;;;;;;;+DAtCd,IAAI,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;gCAiD3B,UAAU,cAAc,SAAS,UAAU,CAAC,MAAM,GAAG,mBACpD,mSAAC,2IAAW;oCAAC,OAAM;8CACjB,cAAA,mSAAC,gKAAiB;wCAAC,YAAY,SAAS,UAAU;wCAAE,UAAU;;;;;;;;;;;;;;;;;;;;;;;8BAMtE,mSAAC;oBAAI,WAAU;8BACb,cAAA,mSAAC;wBAAI,WAAU;kCACb,cAAA,mSAAC,0LAA4B;4BAC3B,QAAQ;gCACN,IAAI;gCACJ,OAAO,UAAU,gBAAgB,SAAS,OAAO,KAAK,IAAI;gCAC1D,cAAc,UAAU,gBAAgB,UAAU,OAAO,WAAW;gCACpE,aAAa,UAAU,gBAAgB,eAAe,OAAO,WAAW;gCACxE,UAAU,UAAU,gBAAgB,gBAAgB,OAAO,UAAU;gCACrE,OAAO,OAAO,eAAe;gCAC7B,cAAc,UAAU,4BAA4B,EAAE;4BACxD;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOd;GA9rBwB;;QACP,wPAAS;QAET,wPAAS;QA+SkB,kRAAO;;;KAlT3B"}}]
}