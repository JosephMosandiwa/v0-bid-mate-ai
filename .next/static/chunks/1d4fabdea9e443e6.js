(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,970065,e=>{"use strict";var t=e.i(375298),a=e.i(647163);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function r({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function i({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...s})}function n({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...s})}function l({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...s})}function o({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>l,"CardDescription",()=>n,"CardFooter",()=>o,"CardHeader",()=>r,"CardTitle",()=>i])},327501,e=>{"use strict";let t=(0,e.i(197140).default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>t],327501)},183533,e=>{"use strict";let t=(0,e.i(197140).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>t],183533)},287336,e=>{"use strict";var t=e.i(375298),a=e.i(769107),s=e.i(457831),r=e.i(4943),i="Progress",[n,l]=(0,s.createContextScope)(i),[o,d]=n(i),c=a.forwardRef((e,a)=>{var s,i;let{__scopeProgress:n,value:l=null,max:d,getValueLabel:c=m,...u}=e;(d||0===d)&&!g(d)&&console.error((s=`${d}`,`Invalid prop \`max\` of value \`${s}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let p=g(d)?d:100;null===l||x(l,p)||console.error((i=`${l}`,`Invalid prop \`value\` of value \`${i}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let y=x(l,p)?l:null,v=f(y)?c(y,p):void 0;return(0,t.jsx)(o,{scope:n,value:y,max:p,children:(0,t.jsx)(r.Primitive.div,{"aria-valuemax":p,"aria-valuemin":0,"aria-valuenow":f(y)?y:void 0,"aria-valuetext":v,role:"progressbar","data-state":h(y,p),"data-value":y??void 0,"data-max":p,...u,ref:a})})});c.displayName=i;var u="ProgressIndicator",p=a.forwardRef((e,a)=>{let{__scopeProgress:s,...i}=e,n=d(u,s);return(0,t.jsx)(r.Primitive.div,{"data-state":h(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...i,ref:a})});function m(e,t){return`${Math.round(e/t*100)}%`}function h(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function f(e){return"number"==typeof e}function g(e){return f(e)&&!isNaN(e)&&e>0}function x(e,t){return f(e)&&!isNaN(e)&&e<=t&&e>=0}p.displayName=u;var y=e.i(647163);function v({className:e,value:a,...s}){return(0,t.jsx)(c,{"data-slot":"progress",className:(0,y.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...s,children:(0,t.jsx)(p,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})})}e.s(["Progress",()=>v],287336)},485296,e=>{"use strict";let t=(0,e.i(197140).default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],485296)},397970,e=>{"use strict";let t=(0,e.i(197140).default)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);e.s(["Target",()=>t],397970)},386079,e=>{"use strict";var t=e.i(100961);e.s(["ChevronRight",()=>t.default])},871532,e=>{"use strict";let t=(0,e.i(197140).default)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);e.s(["Bell",()=>t],871532)},604969,e=>{"use strict";var t=e.i(769107),a=e.i(791019),s=e.i(878988);let r=e=>fetch(e).then(e=>{if(!e.ok)throw Error("Failed to fetch");return e.json()});function i(e){let[s,r]=(0,t.useState)(e?.conversationId);return{...(0,a.useChat)({api:"/api/strategist/message",body:{conversation_id:s,context_type:e?.contextType||"general",tender_id:e?.tenderId,include_context:!0},onResponse:e=>{let t=e.headers.get("X-Conversation-Id");t&&t!==s&&r(t)},onError:e=>{console.error("[useStrategistChat] Error:",e)}}),conversationId:s}}function n(){let{data:e,error:a,isLoading:i,mutate:n}=(0,s.default)("/api/strategist/preferences",r),l=(0,t.useCallback)(async e=>{let t=await fetch("/api/strategist/preferences",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return t.ok&&n(),t.ok},[n]),o=(0,t.useCallback)(async()=>{let e=await fetch("/api/strategist/preferences",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"complete_onboarding"})});return e.ok&&n(),e.ok},[n]);return{preferences:e?.preferences,onboardingCompleted:e?.onboarding_completed,isLoading:i,error:a,updatePreferences:l,completeOnboarding:o,refresh:n}}function l(e){let a=new URLSearchParams;e?.unreadOnly&&a.set("unread","true"),e?.limit&&a.set("limit",e.limit.toString());let{data:i,error:n,isLoading:l,mutate:o}=(0,s.default)(`/api/strategist/alerts?${a.toString()}`,r,{fallbackData:{alerts:[],unreadCount:0},shouldRetryOnError:!1}),d=(0,t.useCallback)(async e=>{let t=await fetch("/api/strategist/alerts",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({alert_id:e,action:"read"})});return t.ok&&o(),t.ok},[o]),c=(0,t.useCallback)(async e=>{let t=await fetch("/api/strategist/alerts",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({alert_id:e,action:"dismiss"})});return t.ok&&o(),t.ok},[o]);return{alerts:i?.alerts||[],unreadCount:i?.unreadCount||0,isLoading:l,error:n,markAsRead:d,dismissAlert:c,refresh:o}}function o(e){let a=new URLSearchParams;e?.saved&&a.set("saved","true");let{data:i,error:n,isLoading:l,mutate:o}=(0,s.default)(`/api/strategist/opportunities?${a.toString()}`,r),d=(0,t.useCallback)(async()=>{let e=await fetch("/api/strategist/opportunities",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"discover"})});return e.ok&&o(),e.json()},[o]),c=(0,t.useCallback)(async(e,t=!0)=>{let a=await fetch("/api/strategist/opportunities",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({opportunity_id:e,updates:{is_saved:t}})});return a.ok&&o(),a.ok},[o]),u=(0,t.useCallback)(async e=>{let t=await fetch("/api/strategist/opportunities",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({opportunity_id:e,updates:{is_viewed:!0}})});return t.ok&&o(),t.ok},[o]),p=(0,t.useCallback)(async e=>{let t=await fetch("/api/strategist/opportunities",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({opportunity_id:e,updates:{is_dismissed:!0}})});return t.ok&&o(),t.ok},[o]);return{opportunities:i?.opportunities||[],isLoading:l,error:n,discoverOpportunities:d,saveOpportunity:c,markViewed:u,dismissOpportunity:p,refresh:o}}function d(e){let a=e?`?tender_id=${e}`:"",{data:i,error:n,isLoading:l,mutate:o}=(0,s.default)(`/api/strategist/readiness${a}`,r,{shouldRetryOnError:!1}),d=(0,t.useCallback)(async()=>{let t=await fetch("/api/strategist/readiness",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tender_id:e,force_recalculate:!0})});return t.ok&&o(),t.json()},[o,e]);return{score:i?.score||void 0,isLoading:l,error:n,recalculate:d,refresh:o}}function c(){let{data:e,error:t,isLoading:a,mutate:i}=(0,s.default)("/api/strategist/message",r);return{conversations:e?.conversations||[],isLoading:a,error:t,refresh:i}}e.s(["useCompetitivenessScore",()=>d,"useStrategistAlerts",()=>l,"useStrategistChat",()=>i,"useStrategistConversations",()=>c,"useStrategistOpportunities",()=>o,"useStrategistPreferences",()=>n])},285832,e=>{"use strict";var t=e.i(375298),a=e.i(970065),s=e.i(167881),r=e.i(994179),i=e.i(287336),n=e.i(893629),l=e.i(6415),o=e.i(397970),d=e.i(768138),c=e.i(997242),u=e.i(871532),p=e.i(386079),m=e.i(183533),h=e.i(485296),f=e.i(327501),g=e.i(359871),x=e.i(604969);function y(){let{alerts:e,unreadCount:y,isLoading:v}=(0,x.useStrategistAlerts)({limit:3}),{score:j,isLoading:b}=(0,x.useCompetitivenessScore)(),N=[{label:"Ask a Question",icon:l.MessageSquare,href:"/dashboard/strategist"},{label:"Build a Strategy",icon:o.Target,href:"/dashboard/strategist?action=strategy"},{label:"Find Opportunities",icon:d.Search,href:"/dashboard/strategist?action=opportunities"},{label:"Pricing Advice",icon:c.Calculator,href:"/dashboard/strategist?action=pricing"}];return(0,t.jsxs)(a.Card,{className:"border-border overflow-hidden",children:[(0,t.jsx)(a.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,t.jsx)(n.Sparkles,{className:"h-5 w-5 text-primary"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(a.CardTitle,{className:"text-lg",children:"Your AI Tender Strategist"}),(0,t.jsx)(a.CardDescription,{className:"text-xs",children:"Personalized guidance and strategy"})]})]}),y>0&&(0,t.jsxs)(r.Badge,{variant:"destructive",className:"gap-1",children:[(0,t.jsx)(u.Bell,{className:"h-3 w-3"}),y]})]})}),(0,t.jsxs)(a.CardContent,{className:"space-y-4",children:[!b&&j&&(0,t.jsxs)("div",{className:"p-3 rounded-lg bg-muted/50 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-foreground",children:"Tender Readiness"}),(0,t.jsxs)("span",{className:"text-lg font-bold text-primary",children:[Math.round(100*j.overall_score),"%"]})]}),(0,t.jsx)(i.Progress,{value:100*j.overall_score,className:"h-2"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(f.Shield,{className:"h-3 w-3 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"Compliance"}),(0,t.jsxs)("span",{className:"ml-auto font-medium",children:[Math.round(100*j.compliance_score),"%"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(m.TrendingUp,{className:"h-3 w-3 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"Experience"}),(0,t.jsxs)("span",{className:"ml-auto font-medium",children:[Math.round(100*j.experience_score),"%"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(o.Target,{className:"h-3 w-3 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"Win Prob"}),(0,t.jsxs)("span",{className:"ml-auto font-medium",children:[Math.round(100*(j.win_probability||0)),"%"]})]})]})]}),!v&&e.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-foreground",children:"Recent Alerts"}),(0,t.jsx)(g.default,{href:"/dashboard/strategist?tab=alerts",className:"text-xs text-primary hover:underline",children:"View all"})]}),e.slice(0,2).map(e=>(0,t.jsxs)("div",{className:"flex items-start gap-2 p-2 rounded-lg bg-muted/30 hover:bg-muted/50 transition-colors",children:[(0,t.jsx)(h.AlertTriangle,{className:`h-4 w-4 flex-shrink-0 mt-0.5 ${"urgent"===e.priority?"text-destructive":"high"===e.priority?"text-orange-500":"text-muted-foreground"}`}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-foreground line-clamp-1",children:e.title}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-1",children:e.message})]})]},e.id))]}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:N.map(e=>(0,t.jsx)(g.default,{href:e.href,children:(0,t.jsxs)(s.Button,{variant:"outline",className:"w-full h-auto py-3 px-3 justify-start gap-2 bg-transparent",children:[(0,t.jsx)(e.icon,{className:"h-4 w-4 text-primary"}),(0,t.jsx)("span",{className:"text-xs",children:e.label})]})},e.label))}),(0,t.jsx)(g.default,{href:"/dashboard/strategist",children:(0,t.jsxs)(s.Button,{className:"w-full gap-2",children:[(0,t.jsx)(n.Sparkles,{className:"h-4 w-4"}),"Open AI Strategist",(0,t.jsx)(p.ChevronRight,{className:"h-4 w-4 ml-auto"})]})})]})]})}e.s(["StrategistDashboardWidget",()=>y])}]);