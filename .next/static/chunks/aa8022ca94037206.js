(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,13660,941466,e=>{"use strict";var t=e.i(375298),s=e.i(781947),r=e.i(769107),a=e.i(970065),i=e.i(167881),l=e.i(23750),n=e.i(184762),o=e.i(10708),c=e.i(62870),d=e.i(625959),m=e.i(416540),h=e.i(692626),x=e.i(153461),p=e.i(718633),u=e.i(492313),g=e.i(931454),f=e.i(223711),v=e.i(924167),j=e.i(330584),y=e.i(801412),N=e.i(197140);let b=(0,N.default)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);var w=e.i(905838),C=e.i(595287),k=(0,C.createServerReference)("407a8ca08fcf9739cce046a54db0f5cf64d000762a",C.callServer,void 0,C.findSourceMapURL,"saveScrapedTenderToUser"),S=e.i(120682),T=e.i(287336),F=e.i(994179),O=e.i(647163);function D({tenderId:e,formFields:N,googleMapsApiKey:C,documents:D=[],tenderData:P,onProgressChange:E}){console.log("[v0] ðŸ”µ DynamicTenderForm COMPONENT RENDERING"),console.log("[v0] Tender ID:",e),console.log("[v0] FormFields received:",N?.length||0,"fields"),console.log("[v0] FormFields:",N),console.log("[v0] Documents:",D?.length||0);let[A,R]=(0,r.useState)({}),[$,I]=(0,r.useState)(!0),[B,L]=(0,r.useState)(!1),[q,G]=(0,r.useState)(!1),[z,M]=(0,r.useState)({}),[U,_]=(0,r.useState)(!1),[Q,J]=(0,r.useState)(!1),[Y,H]=(0,r.useState)(new Set),[W,X]=(0,r.useState)(null),[K,V]=(0,r.useState)(0),{toast:Z}=(0,S.useToast)(),ee=36===e.length&&e.includes("-"),et=ee?`/api/custom-tenders/${e}`:`/api/tenders/scraped/${e}`,es=D.filter(e=>"application/pdf"===e.document_type||"application/pdf"===e.file_type);(0,r.useEffect)(()=>{ea()},[e]),(0,r.useEffect)(()=>{er()},[A,N]);let er=()=>{if(0===N.length)return void V(0);let e=N.filter(e=>e.required),t=e.length>0?e.length:N.length,s=Math.round((e.length>0?e.filter(e=>A[e.id]&&""!==A[e.id]).length:Object.keys(A).filter(e=>A[e]&&""!==A[e]).length)/t*100);V(s);let r="reviewing";s>=100?r="ready":s>=75?r="preparing":s>=50?r="planning":s>=25&&(r="analyzing"),E&&s>0&&E(Math.min(s,95),r)},ea=async()=>{try{let e=await fetch(`${et}/responses`);if(e.ok){let{responses:t}=await e.json();t&&(R(t),X(new Date))}}catch(e){console.error("[v0] Error loading saved responses:",e)}finally{I(!1)}},ei=async()=>{if(P&&!Q)try{let e=await k(P);e.success&&(J(!0),e.isNew&&Z({title:"Tender Saved",description:"This tender has been added to 'My Tenders' with status 'In Progress'"}))}catch(e){console.error("[v0] Error auto-saving tender:",e)}},el=(e,t)=>{R(s=>({...s,[e]:t})),M(t=>({...t,[e]:""})),G(!1),0!==Object.keys(A).length||Q||ei()},en=async()=>{let t={};if(N.forEach(e=>{let s=((e,t)=>{if(e.required&&(!t||""===t))return"This field is required";if(e.validation&&t){if("number"===e.type){let s=Number(t);if(void 0!==e.validation.min&&s<e.validation.min)return`Minimum value is ${e.validation.min}`;if(void 0!==e.validation.max&&s>e.validation.max)return`Maximum value is ${e.validation.max}`}if("text"===e.type||"textarea"===e.type){if(e.validation.maxLength&&t.length>e.validation.maxLength)return`Maximum length is ${e.validation.maxLength} characters`;if(e.validation.pattern&&!new RegExp(e.validation.pattern).test(t))return"Invalid format"}}return null})(e,A[e.id]);s&&(t[e.id]=s)}),Object.keys(t).length>0){M(t),Z({title:"Validation Error",description:`Please fix ${Object.keys(t).length} error(s) before saving`,variant:"destructive"});return}L(!0);try{(await fetch(`${et}/responses`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({responses:A})})).ok&&(G(!0),X(new Date),setTimeout(()=>G(!1),3e3),Z({title:"Saved",description:"Your responses have been saved successfully"}),ee&&await fetch("/api/strategist/progress",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenderId:e,tenderType:"custom",status:K>=100?"ready":"preparing",progressPercent:Math.min(K,95),milestone:`Form ${K}% complete`,notes:`User saved form responses - ${Object.keys(A).length} fields filled`})}))}catch(e){console.error("[v0] Error saving responses:",e),Z({title:"Error",description:"Failed to save responses",variant:"destructive"})}finally{L(!1)}},eo=async()=>{if(0===es.length)return void Z({title:"No Document",description:"Please upload a PDF document first.",variant:"destructive"});if(0===Object.keys(A).length)return void Z({title:"No Responses",description:"Please fill in some form fields first.",variant:"destructive"});_(!0);try{console.log("[v0] ========================================"),console.log("[v0] GENERATE FILLED EDITABLE PDF"),console.log("[v0] ========================================"),console.log("[v0] Tender ID:",e),console.log("[v0] Document ID:",es[0].id),console.log("[v0] Form responses:",Object.keys(A).length);let t=await fetch(`${et}/generate-filled-editable`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({documentId:es[0].id,saveToBlob:!0})});if(console.log("[v0] Response status:",t.status),!t.ok){let e=await t.json();throw Error(e.error||"Failed to generate filled editable PDF")}let s=t.headers.get("X-Fields-Created"),r=t.headers.get("X-Fields-Filled"),a=t.headers.get("X-Total-Pages"),i=t.headers.get("X-Is-Read-Only"),l=t.headers.get("X-Saved-Blob-Url");console.log("[v0] Fields created:",s),console.log("[v0] Fields filled:",r),console.log("[v0] Total pages:",a),console.log("[v0] Was read-only:",i),console.log("[v0] Saved to blob:",l);let n=await t.blob(),o=window.URL.createObjectURL(n),c=document.createElement("a");c.href=o,c.download=`filled_tender_${e}.pdf`,document.body.appendChild(c),c.click(),window.URL.revokeObjectURL(o),document.body.removeChild(c),Z({title:"Success!",description:`Generated editable PDF with ${r} fields filled. ${l?"Saved to your documents.":""}`})}catch(e){console.error("[v0] Error generating filled editable PDF:",e),Z({title:"Error",description:e.message||"Failed to generate filled editable PDF",variant:"destructive"})}finally{_(!1)}};if($)return console.log("[v0] ðŸŸ¡ Form is in LOADING state"),(0,t.jsx)(a.Card,{children:(0,t.jsx)(a.CardContent,{className:"p-12 text-center",children:(0,t.jsx)(h.Loader2,{className:"h-8 w-8 animate-spin text-primary mx-auto"})})});let ec=Array.from(new Set(N.map(e=>e.section||"General Information")));console.log("[v0] ðŸŸ¢ Form LOADED - Rendering sections:",ec),console.log("[v0] Total sections:",ec.length);let ed=N.filter(e=>e.required).length,em=Object.keys(A).filter(e=>A[e]&&""!==A[e]).length;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(a.Card,{className:"border-primary/20 bg-gradient-to-r from-primary/5 to-primary/10",children:[(0,t.jsx)(a.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(a.CardTitle,{className:"text-lg",children:"Response Form Progress"}),(0,t.jsx)(a.CardDescription,{className:"mt-1",children:ed>0?`${ed} required fields â€¢ ${em} of ${N.length} total fields filled`:`${em} of ${N.length} fields filled`})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-3xl font-bold text-primary",children:[K,"%"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Complete"})]})]})}),(0,t.jsxs)(a.CardContent,{className:"space-y-3",children:[(0,t.jsx)(T.Progress,{value:K,className:"h-3"}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(y.Clock,{className:"h-3 w-3"}),W?`Last saved ${W.toLocaleTimeString()}`:"Not saved yet"]}),(0,t.jsxs)(F.Badge,{variant:K>=100?"default":"secondary",className:"gap-1",children:[(0,t.jsx)(b,{className:"h-3 w-3"}),K>=100?"Ready to Submit":"In Progress"]})]})]})]}),es.length>0&&(0,t.jsxs)(a.Card,{className:"mt-6",children:[(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsxs)(a.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(g.FileText,{className:"h-5 w-5"}),"Generate Filled Document"]}),(0,t.jsx)(a.CardDescription,{children:"Download an editable copy of your tender document with all form fields filled in. Your responses will be overlaid directly onto the original document pages."})]}),(0,t.jsxs)(a.CardContent,{className:"space-y-4",children:[0===Object.keys(A).length?(0,t.jsxs)(s.Alert,{children:[(0,t.jsx)(f.AlertCircle,{className:"h-4 w-4"}),(0,t.jsx)(s.AlertTitle,{children:"Fill in the form first"}),(0,t.jsx)(s.AlertDescription,{children:"Complete the form fields above before generating your filled document."})]}):(0,t.jsxs)(s.Alert,{className:"bg-green-50 border-green-200",children:[(0,t.jsx)(p.CheckCircle2,{className:"h-4 w-4 text-green-600"}),(0,t.jsx)(s.AlertTitle,{className:"text-green-800",children:"Ready to generate"}),(0,t.jsxs)(s.AlertDescription,{className:"text-green-700",children:["You have filled ",Object.keys(A).length," field(s). Click below to generate your filled document."]})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-3",children:(0,t.jsx)(i.Button,{onClick:eo,disabled:U||0===Object.keys(A).length,size:"lg",className:"bg-primary",children:U?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating Filled Document..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Download,{className:"h-4 w-4 mr-2"}),"Generate & Download Filled PDF"]})})}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"The filled PDF will be saved to your documents. Your responses are overlaid directly on the original tender document."})]})]}),ec.map(e=>{let s,r,i,h,x,p,u=N.filter(t=>(t.section||"General Information")===e),g=(h=(i=(r=(s=N.filter(t=>(t.section||"General Information")===e)).filter(e=>e.required)).length>0?r:s).filter(e=>A[e.id]&&""!==A[e.id]).length,p=(x=i.length)>0?Math.round(h/x*100):0,{filled:h,total:x,percent:p}),y=Y.has(e),b=u.filter(e=>e.required).length;return(0,t.jsxs)(a.Card,{className:(0,O.cn)("transition-all",100===g.percent&&"border-green-500/50 bg-green-50/50"),children:[(0,t.jsx)(a.CardHeader,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>{let t;(t=new Set(Y)).has(e)?t.delete(e):t.add(e),H(t)},children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(a.CardTitle,{className:"text-base",children:e}),b>0&&(0,t.jsxs)(F.Badge,{variant:"secondary",className:"text-xs",children:[b," Required"]})]}),(0,t.jsxs)(a.CardDescription,{className:"mt-1",children:[g.filled," of ",g.total," fields completed"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(T.Progress,{value:g.percent,className:"h-2 w-20"}),(0,t.jsxs)("span",{className:(0,O.cn)("text-sm font-medium w-12 text-right",100===g.percent?"text-green-600":"text-muted-foreground"),children:[g.percent,"%"]})]}),y?(0,t.jsx)(v.ChevronDown,{className:"h-5 w-5 text-muted-foreground"}):(0,t.jsx)(j.ChevronUp,{className:"h-5 w-5 text-muted-foreground"})]})]})}),!y&&(0,t.jsx)(a.CardContent,{className:"space-y-4 pt-0",children:u.map(e=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(o.Label,{htmlFor:e.id,className:"flex items-center gap-2",children:[e.label,e.required&&(0,t.jsx)(F.Badge,{variant:"destructive",className:"text-xs px-1.5 py-0",children:"Required"})]}),e.description&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description}),(e=>{let s,r,a=A[e.id]||"",i=z[e.id];if(s=e.label.toLowerCase(),["address","street","location","physical address","postal address"].some(e=>s.includes(e))&&"text"===e.type)return(0,t.jsx)(l.Input,{type:"text",id:e.id,value:a,onChange:t=>el(e.id,t.target.value),placeholder:e.placeholder||"Enter address...",required:e.required,className:i?"border-destructive":""});if(r=e.label.toLowerCase(),(["price","cost","amount","value","budget","fee","payment","tender value"].some(e=>r.includes(e))||"currency"===e.type)&&("text"===e.type||"number"===e.type))return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(l.Input,{id:e.id,type:"text",value:a,onChange:t=>el(e.id,t.target.value),placeholder:e.placeholder||"e.g., R 1,000,000 or 1000000",className:i?"border-destructive":""}),a&&!isNaN(Number(a.toString().replace(/[^0-9.-]/g,"")))&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Formatted: ",(0,w.formatZAR)(a.toString().replace(/[^0-9.-]/g,""))]})]});switch(e.type){case"textarea":return(0,t.jsx)(n.Textarea,{id:e.id,value:a,onChange:t=>el(e.id,t.target.value),placeholder:e.placeholder,className:i?"border-destructive":"",rows:4});case"select":return(0,t.jsxs)(c.Select,{value:a,onValueChange:t=>el(e.id,t),children:[(0,t.jsx)(c.SelectTrigger,{className:i?"border-destructive":"",children:(0,t.jsx)(c.SelectValue,{placeholder:e.placeholder||"Select an option"})}),(0,t.jsx)(c.SelectContent,{children:e.options?.map(e=>(0,t.jsx)(c.SelectItem,{value:e,children:e},e))})]});case"checkbox":return(0,t.jsx)("div",{className:"space-y-2",children:e.options?.map(s=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.Checkbox,{id:`${e.id}-${s}`,checked:Array.isArray(a)&&a.includes(s),onCheckedChange:t=>{let r=Array.isArray(a)?a:[],i=t?[...r,s]:r.filter(e=>e!==s);el(e.id,i)}}),(0,t.jsx)("label",{htmlFor:`${e.id}-${s}`,className:"text-sm",children:s})]},s))});case"radio":return(0,t.jsx)(m.RadioGroup,{value:a,onValueChange:t=>el(e.id,t),children:e.options?.map(s=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(m.RadioGroupItem,{value:s,id:`${e.id}-${s}`}),(0,t.jsx)("label",{htmlFor:`${e.id}-${s}`,className:"text-sm",children:s})]},s))});case"file":return(0,t.jsx)(l.Input,{id:e.id,type:"file",onChange:t=>el(e.id,t.target.files?.[0]?.name||""),className:i?"border-destructive":""});default:return(0,t.jsx)(l.Input,{id:e.id,type:e.type,value:a,onChange:t=>el(e.id,t.target.value),placeholder:e.placeholder,className:i?"border-destructive":"",min:e.validation?.min,max:e.validation?.max,maxLength:e.validation?.maxLength})}})(e),z[e.id]&&(0,t.jsxs)("p",{className:"text-sm text-destructive flex items-center gap-1",children:[(0,t.jsx)(f.AlertCircle,{className:"h-3 w-3"}),z[e.id]]})]},e.id))})]},e)}),(0,t.jsx)(a.Card,{className:"sticky bottom-4 shadow-lg border-primary/20",children:(0,t.jsx)(a.CardContent,{className:"py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,t.jsx)(i.Button,{onClick:en,disabled:B,size:"lg",className:"flex-1 min-w-[200px]",children:B?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Save,{className:"h-4 w-4 mr-2"}),"Save Progress (",K,"% Complete)"]})}),q&&(0,t.jsxs)(s.Alert,{className:"flex-1 bg-green-500/10 border-green-500/20 py-2",children:[(0,t.jsx)(p.CheckCircle2,{className:"h-4 w-4 text-green-500"}),(0,t.jsx)(s.AlertDescription,{className:"text-green-500",children:"Saved successfully!"})]}),Object.keys(z).length>0&&(0,t.jsxs)(s.Alert,{variant:"destructive",className:"flex-1 py-2",children:[(0,t.jsx)(f.AlertCircle,{className:"h-4 w-4"}),(0,t.jsxs)(s.AlertDescription,{children:[Object.keys(z).length," validation error(s) - check required fields"]})]})]})})})]})}e.s(["DynamicTenderForm",()=>D],13660);var P=e.i(471435),E=e.i(488651),A=e.i(397970),R=e.i(485296),$=e.i(893629),I=e.i(935746),B=e.i(179311);let L=(0,N.default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var q=e.i(524330),G=e.i(997242),z=e.i(359871),M=e.i(836403);function U({tender:e,className:s,onPlanGenerated:a,onBoqGenerated:n,onReadinessGenerated:o}){let[c,d]=(0,r.useState)([]),[m,x]=(0,r.useState)(""),[u,g]=(0,r.useState)(!1),[f,v]=(0,r.useState)(null),[j,y]=(0,r.useState)(!1),[N,b]=(0,r.useState)(!0),[w,C]=(0,r.useState)(!1),[k,S]=(0,r.useState)(null),T=(0,r.useRef)(null);(0,r.useEffect)(()=>{e.id&&(D(),Q())},[e.id]),(0,r.useEffect)(()=>{T.current&&(T.current.scrollTop=T.current.scrollHeight)},[c]);let D=async()=>{y(!0);try{let t=await fetch(`/api/strategist/readiness?tenderId=${e.id}`);if(t.ok){let e=await t.json();v(e),o&&o(e)}}catch(e){console.error("[v0] Error loading readiness:",e)}finally{y(!1)}},U=async()=>{if(!m.trim()||u)return;let t=m.trim();x(""),d(e=>[...e,{role:"user",content:t}]),g(!0);try{let s=await fetch("/api/strategist/message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t,tender_id:e.id,context_type:"tender",include_context:!0,tenderContext:{id:e.id,title:e.title,organization:e.organization,description:e.description,deadline:e.deadline,value:e.value,requirements:e.requirements,analysis:e.analysis}})});if(s.ok){let e=s.body?.getReader(),t=new TextDecoder,r="";if(d(e=>[...e,{role:"assistant",content:""}]),e)for(;;){let{done:s,value:a}=await e.read();if(s)break;for(let e of t.decode(a).split("\n"))if(e.startsWith("0:"))try{let t=JSON.parse(e.slice(2));r+=t,d(e=>{let t=[...e];return t[t.length-1]={role:"assistant",content:r},t})}catch(e){}}}}catch(e){console.error("[v0] Error sending message:",e),d(e=>[...e,{role:"assistant",content:"Sorry, I encountered an error. Please try again."}])}finally{g(!1)}},_=t=>{let s="";switch(t){case"strategy":s=`Create a winning bid strategy for "${e.title}". What are the key success factors?`;break;case"risks":s="What are the potential risks and compliance gaps I should be aware of for this tender?";break;case"pricing":s="Help me develop a competitive pricing strategy for this bid.";break;case"strengths":s="Analyze my strengths and weaknesses for this specific tender based on typical requirements."}x(s)},Q=async()=>{try{let t=await fetch(`/api/strategist/plan?tenderId=${e.id}&tenderType=custom`);if(t.ok){let e=await t.json();e.plan&&(S(e.plan),a&&a(e.plan))}}catch(e){console.error("[v0] Error loading project plan:",e)}},J=async()=>{if(!w)try{C(!0),console.log("[v0] Generating project plan for tender:",e.id);let t=await fetch("/api/strategist/plan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenderId:e.id,tenderType:"custom",tenderTitle:e.title,tenderDescription:e.description,analysisData:e.analysis})});if(!t.ok){let e=await t.json();throw Error(e.details||e.error||"Failed to generate project plan")}let{plan:s}=await t.json();console.log("[v0] Project plan generated successfully"),a&&a(s),M.toast.success("Project Plan Generated",{description:"Your comprehensive project plan is now available in the Planning section"})}catch(e){console.error("[v0] Plan generation error:",e),M.toast.error("Error",{description:e instanceof Error?e.message:"Failed to generate project plan"})}finally{C(!1)}},Y=async()=>{try{console.log("[v0] Generating BOQ for tender:",e.id);let t=await fetch("/api/strategist/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenderId:e.id,tenderType:"custom",tenderTitle:e.title,tenderDescription:e.description,analysisData:e.analysis})});if(!t.ok){let e=await t.json();throw Error(e.details||e.error||"Failed to generate BOQ")}let{boq:s}=await t.json();console.log("[v0] BOQ generated successfully"),n&&n(s),M.toast.success("BOQ Generated",{description:"Your Bill of Quantities is now available in the Financial section"})}catch(e){console.error("[v0] BOQ generation error:",e),M.toast.error("Error",{description:e instanceof Error?e.message:"Failed to generate BOQ"})}},H=async()=>{try{console.log("[v0] Checking readiness for tender:",e.id);let t=await fetch(`/api/strategist/readiness?tender_id=${e.id}&tender_type=custom`);if(!t.ok)throw Error("Failed to check readiness");let s=await t.json();console.log("[v0] Readiness check complete"),o&&o(s),M.toast.success("Readiness Check Complete",{description:"Your bid readiness assessment is now available in the Overview section"})}catch(e){console.error("[v0] Readiness check error:",e),M.toast.error("Error",{description:"Failed to check readiness"})}};return(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"p-4 border-b bg-muted/30",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,t.jsx)($.Sparkles,{className:"h-4 w-4 text-primary"}),"AI Strategist"]}),(0,t.jsx)(F.Badge,{variant:"outline",className:"text-xs",children:"Tender-Specific"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Generate strategic plans and analysis"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,t.jsxs)(i.Button,{onClick:J,disabled:w,variant:"default",size:"sm",className:"w-full justify-start h-auto py-3",children:[w?(0,t.jsx)(h.Loader2,{className:"mr-2 h-4 w-4 animate-spin flex-shrink-0"}):(0,t.jsx)(q.FileSpreadsheet,{className:"mr-2 h-4 w-4 flex-shrink-0"}),(0,t.jsxs)("div",{className:"text-left flex-1",children:[(0,t.jsx)("div",{className:"font-medium",children:"Generate Project Plan"}),(0,t.jsx)("div",{className:"text-xs opacity-80 font-normal",children:"Opens in Planning section"})]})]}),(0,t.jsxs)(i.Button,{onClick:Y,variant:"outline",size:"sm",className:"w-full justify-start h-auto py-3 bg-transparent",children:[(0,t.jsx)(G.Calculator,{className:"mr-2 h-4 w-4 flex-shrink-0"}),(0,t.jsxs)("div",{className:"text-left flex-1",children:[(0,t.jsx)("div",{className:"font-medium",children:"Generate BOQ"}),(0,t.jsx)("div",{className:"text-xs opacity-80 font-normal",children:"Opens in Financial section"})]})]}),(0,t.jsxs)(i.Button,{onClick:H,variant:"outline",size:"sm",className:"w-full justify-start h-auto py-3 bg-transparent",children:[(0,t.jsx)(p.CheckCircle2,{className:"mr-2 h-4 w-4 flex-shrink-0"}),(0,t.jsxs)("div",{className:"text-left flex-1",children:[(0,t.jsx)("div",{className:"font-medium",children:"Check Readiness"}),(0,t.jsx)("div",{className:"text-xs opacity-80 font-normal",children:"Score your bid readiness"})]})]})]})]})]}),(0,t.jsxs)("div",{className:"p-3 border-b bg-muted/20",children:[(0,t.jsx)("p",{className:"text-xs font-medium mb-2 text-muted-foreground",children:"Conversation Starters"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",className:"text-xs h-auto py-2 justify-start bg-transparent",onClick:()=>_("strategy"),children:[(0,t.jsx)(A.Target,{className:"h-3 w-3 mr-2 flex-shrink-0"}),(0,t.jsx)("span",{className:"truncate",children:"Bid Strategy"})]}),(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",className:"text-xs h-auto py-2 justify-start bg-transparent",onClick:()=>_("risks"),children:[(0,t.jsx)(R.AlertTriangle,{className:"h-3 w-3 mr-2 flex-shrink-0"}),(0,t.jsx)("span",{className:"truncate",children:"Risk Analysis"})]}),(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",className:"text-xs h-auto py-2 justify-start bg-transparent",onClick:()=>_("pricing"),children:[(0,t.jsx)(B.DollarSign,{className:"h-3 w-3 mr-2 flex-shrink-0"}),(0,t.jsx)("span",{className:"truncate",children:"Pricing Help"})]}),(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",className:"text-xs h-auto py-2 justify-start bg-transparent",onClick:()=>_("strengths"),children:[(0,t.jsx)(I.Lightbulb,{className:"h-3 w-3 mr-2 flex-shrink-0"}),(0,t.jsx)("span",{className:"truncate",children:"SWOT Analysis"})]})]})]}),c.length>0&&(0,t.jsx)(P.ScrollArea,{className:"h-48 rounded-lg border p-3",ref:T,children:(0,t.jsx)("div",{className:"space-y-3",children:c.map((e,s)=>(0,t.jsx)("div",{className:(0,O.cn)("p-3 rounded-lg text-sm whitespace-pre-wrap","user"===e.role?"bg-primary text-primary-foreground ml-8":"bg-muted mr-8"),children:e.content||(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Loader2,{className:"h-4 w-4 animate-spin"}),"Thinking..."]})},s))})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(l.Input,{placeholder:"Ask about this tender...",value:m,onChange:e=>x(e.target.value),onKeyDown:e=>"Enter"===e.key&&!e.shiftKey&&U(),disabled:u,className:"text-sm"}),(0,t.jsx)(i.Button,{size:"icon",onClick:U,disabled:u||!m.trim(),children:u?(0,t.jsx)(h.Loader2,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(E.Send,{className:"h-4 w-4"})})]}),(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",className:"w-full text-xs",asChild:!0,children:(0,t.jsxs)(z.default,{href:`/dashboard/strategist?tenderId=${e.id}`,children:["Open Full Strategist",(0,t.jsx)(L,{className:"h-3 w-3 ml-2"})]})})]})}e.s(["TenderContextPanel",()=>U,"TenderContextStrategistPanel",()=>U],941466)}]);