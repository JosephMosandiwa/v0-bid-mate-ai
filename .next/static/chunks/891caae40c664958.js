(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,38671,e=>{"use strict";var t,a=e.i(375298),s=e.i(769107),r=e.i(970065),i=e.i(167881),n=e.i(994179),l=e.i(184762),o=e.i(471435),c=e.i(852917),d=e.i(127341),m=e.i(488651),u=e.i(893629),h=e.i(397970),x=e.i(768138),p=e.i(931454),g=e.i(997242),f=e.i(327501),v=e.i(197140);let b=(0,v.default)("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);var j=e.i(881660),y=e.i(871532),N=e.i(183533),w=e.i(692626),C=e.i(935746),S=e.i(950011),k=e.i(189691),T=e.i(485296),D=e.i(282873),M=e.i(604969);let _=[{value:"eastern-cape",label:"Eastern Cape"},{value:"free-state",label:"Free State"},{value:"gauteng",label:"Gauteng"},{value:"kwazulu-natal",label:"KwaZulu-Natal"},{value:"limpopo",label:"Limpopo"},{value:"mpumalanga",label:"Mpumalanga"},{value:"north-west",label:"North West"},{value:"northern-cape",label:"Northern Cape"},{value:"western-cape",label:"Western Cape"}],E=[{value:"construction",label:"Construction & Building"},{value:"it-services",label:"IT & Technology Services"},{value:"professional-services",label:"Professional Services"},{value:"healthcare",label:"Healthcare & Medical"},{value:"education",label:"Education & Training"},{value:"manufacturing",label:"Manufacturing"},{value:"logistics",label:"Logistics & Transport"},{value:"agriculture",label:"Agriculture & Farming"},{value:"energy",label:"Energy & Utilities"},{value:"mining",label:"Mining & Resources"},{value:"security",label:"Security Services"},{value:"cleaning",label:"Cleaning & Facilities"},{value:"catering",label:"Catering & Food Services"},{value:"environmental",label:"Environmental Services"},{value:"engineering",label:"Engineering"},{value:"legal",label:"Legal Services"},{value:"financial",label:"Financial Services"},{value:"marketing",label:"Marketing & Communications"},{value:"other",label:"Other"}],B=[{value:"micro",label:"Micro (1-10 employees)"},{value:"small",label:"Small (11-50 employees)"},{value:"medium",label:"Medium (51-200 employees)"},{value:"large",label:"Large (201-500 employees)"},{value:"enterprise",label:"Enterprise (500+ employees)"}],R=[{value:"1",label:"Grade 1 (Up to R650,000)"},{value:"2",label:"Grade 2 (R650,000 - R4 million)"},{value:"3",label:"Grade 3 (R4 - R13 million)"},{value:"4",label:"Grade 4 (R13 - R40 million)"},{value:"5",label:"Grade 5 (R40 - R130 million)"},{value:"6",label:"Grade 6 (R130 - R400 million)"},{value:"7",label:"Grade 7 (R400 million - R1.3 billion)"},{value:"8",label:"Grade 8 (R1.3 billion - R4 billion)"},{value:"9",label:"Grade 9 (No limit)"}],L=[{value:"1",label:"Level 1 (135% recognition)"},{value:"2",label:"Level 2 (125% recognition)"},{value:"3",label:"Level 3 (110% recognition)"},{value:"4",label:"Level 4 (100% recognition)"},{value:"5",label:"Level 5 (80% recognition)"},{value:"6",label:"Level 6 (60% recognition)"},{value:"7",label:"Level 7 (50% recognition)"},{value:"8",label:"Level 8 (10% recognition)"},{value:"non-compliant",label:"Non-Compliant (0% recognition)"},{value:"exempt",label:"Exempt Micro Enterprise (EME)"},{value:"qse",label:"Qualifying Small Enterprise (QSE)"}],P=[{id:"build-strategy",label:"Build a bid strategy",prompt:"Help me build a comprehensive bid strategy for a tender I'm considering",icon:"target"},{id:"review-readiness",label:"Review my tender readiness",prompt:"Review my tender readiness and tell me what documents or certifications I might be missing for government tenders",icon:"clipboard-check"},{id:"find-opportunities",label:"Find matching tenders",prompt:"Find tenders that match my company profile and capabilities",icon:"search"},{id:"explain-tender",label:"Explain this tender",prompt:"Help me understand the requirements of a specific tender I'm looking at",icon:"file-text"},{id:"pricing-advice",label:"Advise on pricing",prompt:"Help me develop a competitive pricing strategy for my tender submission",icon:"calculator"},{id:"reduce-risk",label:"Reduce bid risk",prompt:"Help me identify and mitigate risks in my tender submission",icon:"shield"},{id:"learn-tendering",label:"Teach me tendering",prompt:"I'm new to tendering. Help me understand how government tenders work in South Africa",icon:"graduation-cap"},{id:"compliance-check",label:"Check compliance",prompt:"Review my compliance status and identify any gaps I need to address",icon:"check-circle"}];var A=e.i(630374),F=e.i(10708),I=e.i(416540),O=e.i(625959),W=e.i(62870),z=e.i(287336),$=e.i(386079),U=e.i(864774),q=e.i(348426);function G({open:e,onOpenChange:t}){let[r,n]=(0,s.useState)(1),[l,o]=(0,s.useState)({experience_level:"",industries:[],procurement_categories:[],provinces:[],company_size:"",cidb_grading:"",bee_level:"",has_tax_clearance:!1,has_coida:!1,has_csd_registration:!1,risk_tolerance:""}),{updatePreferences:c,completeOnboarding:d}=(0,M.useStrategistPreferences)(),[m,h]=(0,s.useState)(!1),x=async()=>{h(!0);try{await c(l),await d(),t(!1)}catch(e){console.error("Failed to save preferences:",e)}finally{h(!1)}},p=(e,t)=>e.includes(t)?e.filter(e=>e!==t):[...e,t];return(0,a.jsx)(A.Dialog,{open:e,onOpenChange:t,children:(0,a.jsxs)(A.DialogContent,{className:"sm:max-w-lg",children:[(0,a.jsxs)(A.DialogHeader,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,a.jsx)(u.Sparkles,{className:"h-5 w-5 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(A.DialogTitle,{children:"Welcome to AI Strategist"}),(0,a.jsx)(A.DialogDescription,{children:"Let's personalize your experience"})]})]}),(0,a.jsx)(z.Progress,{value:r/4*100,className:"h-1"})]}),(0,a.jsxs)("div",{className:"py-4",children:[1===r&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"What's your tendering experience level?"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"This helps us tailor advice to your needs."})]}),(0,a.jsxs)(I.RadioGroup,{value:l.experience_level,onValueChange:e=>o({...l,experience_level:e}),className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-lg border border-border hover:bg-muted/50 cursor-pointer",children:[(0,a.jsx)(I.RadioGroupItem,{value:"beginner",id:"beginner"}),(0,a.jsxs)(F.Label,{htmlFor:"beginner",className:"flex-1 cursor-pointer",children:[(0,a.jsx)("div",{className:"font-medium",children:"Beginner"}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"New to tendering, want to learn the basics"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-lg border border-border hover:bg-muted/50 cursor-pointer",children:[(0,a.jsx)(I.RadioGroupItem,{value:"intermediate",id:"intermediate"}),(0,a.jsxs)(F.Label,{htmlFor:"intermediate",className:"flex-1 cursor-pointer",children:[(0,a.jsx)("div",{className:"font-medium",children:"Intermediate"}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Some experience, looking to improve success rate"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-lg border border-border hover:bg-muted/50 cursor-pointer",children:[(0,a.jsx)(I.RadioGroupItem,{value:"advanced",id:"advanced"}),(0,a.jsxs)(F.Label,{htmlFor:"advanced",className:"flex-1 cursor-pointer",children:[(0,a.jsx)("div",{className:"font-medium",children:"Advanced"}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Experienced, seeking strategic optimization"})]})]})]})]}),2===r&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Your Focus Areas"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Select industries and procurement categories you're interested in."})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(F.Label,{children:"Industries (select all that apply)"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-y-auto",children:E.slice(0,10).map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(O.Checkbox,{id:e.value,checked:l.industries.includes(e.value),onCheckedChange:()=>o({...l,industries:p(l.industries,e.value)})}),(0,a.jsx)(F.Label,{htmlFor:e.value,className:"text-sm cursor-pointer",children:e.label})]},e.value))})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(F.Label,{children:"Provinces (select all that apply)"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:_.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(O.Checkbox,{id:e.value,checked:l.provinces.includes(e.value),onCheckedChange:()=>o({...l,provinces:p(l.provinces,e.value)})}),(0,a.jsx)(F.Label,{htmlFor:e.value,className:"text-sm cursor-pointer",children:e.label})]},e.value))})]})]}),3===r&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Company Profile"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Help us understand your company's capabilities."})]}),(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(F.Label,{children:"Company Size"}),(0,a.jsxs)(W.Select,{value:l.company_size,onValueChange:e=>o({...l,company_size:e}),children:[(0,a.jsx)(W.SelectTrigger,{children:(0,a.jsx)(W.SelectValue,{placeholder:"Select company size"})}),(0,a.jsx)(W.SelectContent,{children:B.map(e=>(0,a.jsx)(W.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(F.Label,{children:"B-BBEE Level"}),(0,a.jsxs)(W.Select,{value:l.bee_level,onValueChange:e=>o({...l,bee_level:e}),children:[(0,a.jsx)(W.SelectTrigger,{children:(0,a.jsx)(W.SelectValue,{placeholder:"Select B-BBEE level"})}),(0,a.jsx)(W.SelectContent,{children:L.map(e=>(0,a.jsx)(W.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(F.Label,{children:"CIDB Grading (if applicable)"}),(0,a.jsxs)(W.Select,{value:l.cidb_grading,onValueChange:e=>o({...l,cidb_grading:e}),children:[(0,a.jsx)(W.SelectTrigger,{children:(0,a.jsx)(W.SelectValue,{placeholder:"Select CIDB grading"})}),(0,a.jsxs)(W.SelectContent,{children:[(0,a.jsx)(W.SelectItem,{value:"none",children:"Not applicable"}),R.map(e=>(0,a.jsx)(W.SelectItem,{value:e.value,children:e.label},e.value))]})]})]})]})]}),4===r&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Compliance Status"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Let us know your current compliance status so we can alert you to gaps."})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-lg border border-border",children:[(0,a.jsx)(O.Checkbox,{id:"tax_clearance",checked:l.has_tax_clearance,onCheckedChange:e=>o({...l,has_tax_clearance:e})}),(0,a.jsxs)(F.Label,{htmlFor:"tax_clearance",className:"flex-1 cursor-pointer",children:[(0,a.jsx)("div",{className:"font-medium",children:"Valid Tax Clearance"}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"SARS Tax Compliance Status (TCS)"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-lg border border-border",children:[(0,a.jsx)(O.Checkbox,{id:"csd",checked:l.has_csd_registration,onCheckedChange:e=>o({...l,has_csd_registration:e})}),(0,a.jsxs)(F.Label,{htmlFor:"csd",className:"flex-1 cursor-pointer",children:[(0,a.jsx)("div",{className:"font-medium",children:"CSD Registration"}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Central Supplier Database registration"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-lg border border-border",children:[(0,a.jsx)(O.Checkbox,{id:"coida",checked:l.has_coida,onCheckedChange:e=>o({...l,has_coida:e})}),(0,a.jsxs)(F.Label,{htmlFor:"coida",className:"flex-1 cursor-pointer",children:[(0,a.jsx)("div",{className:"font-medium",children:"COIDA Letter"}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Letter of Good Standing from Compensation Fund"})]})]})]}),(0,a.jsx)("div",{className:"p-4 rounded-lg bg-primary/5 border border-primary/20",children:(0,a.jsx)("p",{className:"text-sm text-foreground",children:"Based on your profile, we'll provide personalized alerts for document expiry, compliance gaps, and matching tender opportunities."})})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[(0,a.jsxs)(i.Button,{variant:"ghost",onClick:()=>{r>1&&n(r-1)},disabled:1===r,children:[(0,a.jsx)(U.ChevronLeft,{className:"h-4 w-4 mr-1"}),"Back"]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Step ",r," of ",4]})}),r<4?(0,a.jsxs)(i.Button,{onClick:()=>{r<4&&n(r+1)},children:["Next",(0,a.jsx)($.ChevronRight,{className:"h-4 w-4 ml-1"})]}):(0,a.jsx)(i.Button,{onClick:x,disabled:m,children:m?"Saving...":(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q.Check,{className:"h-4 w-4 mr-1"}),"Complete"]})})]})]})})}var H=e.i(6415);let Y=(0,v.default)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),V=(0,v.default)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);var X=e.i(131841),Q=e.i(359871);let J=Symbol.for("constructDateFrom");function K(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&J in e?e[J](t):e instanceof Date?new e.constructor(t):new Date(t)}let Z={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function ee(e){return (t={})=>{let a=t.width?String(t.width):e.defaultWidth;return e.formats[a]||e.formats[e.defaultWidth]}}let et={date:ee({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:ee({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:ee({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ea={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function es(e){return(t,a)=>{let s;if("formatting"===(a?.context?String(a.context):"standalone")&&e.formattingValues){let t=e.defaultFormattingWidth||e.defaultWidth,r=a?.width?String(a.width):t;s=e.formattingValues[r]||e.formattingValues[t]}else{let t=e.defaultWidth,r=a?.width?String(a.width):e.defaultWidth;s=e.values[r]||e.values[t]}return s[e.argumentCallback?e.argumentCallback(t):t]}}function er(e){return(t,a={})=>{let s,r=a.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],n=t.match(i);if(!n)return null;let l=n[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(o)?function(e,t){for(let a=0;a<e.length;a++)if(t(e[a]))return a}(o,e=>e.test(l)):function(e,t){for(let a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&t(e[a]))return a}(o,e=>e.test(l));return s=e.valueCallback?e.valueCallback(c):c,{value:s=a.valueCallback?a.valueCallback(s):s,rest:t.slice(l.length)}}}let ei={code:"en-US",formatDistance:(e,t,a)=>{let s,r=Z[e];if(s="string"==typeof r?r:1===t?r.one:r.other.replace("{{count}}",t.toString()),a?.addSuffix)if(a.comparison&&a.comparison>0)return"in "+s;else return s+" ago";return s},formatLong:et,formatRelative:(e,t,a,s)=>ea[e],localize:{ordinalNumber:(e,t)=>{let a=Number(e),s=a%100;if(s>20||s<10)switch(s%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},era:es({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:es({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:es({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:es({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:es({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(t={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,a={})=>{let s=e.match(t.matchPattern);if(!s)return null;let r=s[0],i=e.match(t.parsePattern);if(!i)return null;let n=t.valueCallback?t.valueCallback(i[0]):i[0];return{value:n=a.valueCallback?a.valueCallback(n):n,rest:e.slice(r.length)}}),era:er({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:er({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:er({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:er({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:er({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},en={};function el(e,t){return K(t||e,e)}function eo(e){let t=el(e),a=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return a.setUTCFullYear(t.getFullYear()),e-a}function ec(e,...t){let a=K.bind(null,e||t.find(e=>"object"==typeof e));return t.map(a)}function ed(e,t){let a=el(e)-el(t);return a<0?-1:a>0?1:a}function em({conversations:e,alerts:t,unreadCount:s,score:r,onClose:l}){let c=r?.overall_score??0,d=r?.compliance_score??0,m=r?.documentation_score??0;return(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[r&&(0,a.jsxs)("div",{className:"p-4 border-b border-border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-foreground",children:"Your Readiness"}),(0,a.jsxs)(n.Badge,{variant:"outline",className:"text-xs",children:[Math.round(100*c),"%"]})]}),(0,a.jsx)(z.Progress,{value:100*c,className:"h-2 mb-3"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(f.Shield,{className:"h-3 w-3 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"Compliance"}),(0,a.jsxs)("span",{className:"ml-auto font-medium",children:[Math.round(100*d),"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(p.FileText,{className:"h-3 w-3 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"Docs"}),(0,a.jsxs)("span",{className:"ml-auto font-medium",children:[Math.round(100*m),"%"]})]})]})]}),t&&t.length>0&&(0,a.jsxs)("div",{className:"p-4 border-b border-border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(y.Bell,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm font-medium text-foreground",children:"Alerts"})]}),s>0&&(0,a.jsx)(n.Badge,{variant:"destructive",className:"text-xs",children:s})]}),(0,a.jsx)("div",{className:"space-y-2",children:t.slice(0,3).map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-2 p-2 rounded-lg bg-muted/50 cursor-pointer hover:bg-muted transition-colors",children:[(0,a.jsx)(T.AlertTriangle,{className:`h-4 w-4 flex-shrink-0 mt-0.5 ${"urgent"===e.priority?"text-destructive":"high"===e.priority?"text-orange-500":"text-muted-foreground"}`}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-foreground line-clamp-1",children:e.title||"Alert"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-1",children:e.message||""})]})]},e.id))})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,a.jsx)("div",{className:"p-4 pb-2 flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(Y,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm font-medium text-foreground",children:"Recent Chats"})]})}),(0,a.jsx)(o.ScrollArea,{className:"flex-1 px-4",children:(0,a.jsx)("div",{className:"space-y-1 pb-4",children:e&&e.length>0?e.slice(0,10).map(e=>{var t,s;return(0,a.jsxs)("button",{className:"w-full flex items-center gap-2 p-2 rounded-lg hover:bg-muted transition-colors text-left",onClick:l,children:[(0,a.jsx)(H.MessageSquare,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground truncate",children:e.title||"New Conversation"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:e.last_message_at?(t=new Date(e.last_message_at),s={addSuffix:!0},function(e,t,a){var s;let r,i=a?.locale??en.locale??ei,n=ed(e,t);if(isNaN(n))throw RangeError("Invalid time value");let l=Object.assign({},a,{addSuffix:a?.addSuffix,comparison:n}),[o,c]=ec(a?.in,...n>0?[t,e]:[e,t]),d=(s=void 0,e=>{let t=(s?Math[s]:Math.trunc)(e);return 0===t?0:t})((el(c)-el(o))/1e3),m=Math.round((d-(eo(c)-eo(o))/1e3)/60);if(m<2)if(a?.includeSeconds)if(d<5)return i.formatDistance("lessThanXSeconds",5,l);else if(d<10)return i.formatDistance("lessThanXSeconds",10,l);else if(d<20)return i.formatDistance("lessThanXSeconds",20,l);else if(d<40)return i.formatDistance("halfAMinute",0,l);else if(d<60)return i.formatDistance("lessThanXMinutes",1,l);else return i.formatDistance("xMinutes",1,l);else if(0===m)return i.formatDistance("lessThanXMinutes",1,l);else return i.formatDistance("xMinutes",m,l);if(m<45)return i.formatDistance("xMinutes",m,l);if(m<90)return i.formatDistance("aboutXHours",1,l);if(m<1440){let e=Math.round(m/60);return i.formatDistance("aboutXHours",e,l)}if(m<2520)return i.formatDistance("xDays",1,l);else if(m<43200){let e=Math.round(m/1440);return i.formatDistance("xDays",e,l)}else if(m<86400)return r=Math.round(m/43200),i.formatDistance("aboutXMonths",r,l);if((r=function(e,t,a){var s,r;let i,n,l,o,[c,d,m]=ec(void 0,e,e,t),u=ed(d,m),h=Math.abs(function(e,t,a){let[s,r]=ec(void 0,e,t);return 12*(s.getFullYear()-r.getFullYear())+(s.getMonth()-r.getMonth())}(d,m));if(h<1)return 0;1===d.getMonth()&&d.getDate()>27&&d.setDate(30),d.setMonth(d.getMonth()-u*h);let x=ed(d,m)===-u;+(i=el(c,void 0),s=void 0,(n=el(i,s?.in)).setHours(23,59,59,999),n)==+(r=void 0,o=(l=el(i,r?.in)).getMonth(),l.setFullYear(l.getFullYear(),o+1,0),l.setHours(23,59,59,999),l)&&1===h&&1===ed(c,m)&&(x=!1);let p=u*(h-x);return 0===p?0:p}(c,o))<12){let e=Math.round(m/43200);return i.formatDistance("xMonths",e,l)}{let e=r%12,t=Math.trunc(r/12);return e<3?i.formatDistance("aboutXYears",t,l):e<9?i.formatDistance("overXYears",t,l):i.formatDistance("almostXYears",t+1,l)}}(t,K(t,Date.now()),s)):"No messages"})]})]},e.id)}):(0,a.jsx)("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No conversations yet. Start chatting!"})})})]}),(0,a.jsxs)("div",{className:"p-4 border-t border-border space-y-1",children:[(0,a.jsx)(Q.default,{href:"/dashboard/strategist/learning",onClick:l,children:(0,a.jsxs)(i.Button,{variant:"ghost",className:"w-full justify-start gap-2 h-9",children:[(0,a.jsx)(V,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Learning Center"}),(0,a.jsx)($.ChevronRight,{className:"h-4 w-4 ml-auto"})]})}),(0,a.jsx)(Q.default,{href:"/dashboard/strategist/opportunities",onClick:l,children:(0,a.jsxs)(i.Button,{variant:"ghost",className:"w-full justify-start gap-2 h-9",children:[(0,a.jsx)(h.Target,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Opportunities"}),(0,a.jsx)($.ChevronRight,{className:"h-4 w-4 ml-auto"})]})}),(0,a.jsx)(Q.default,{href:"/dashboard/profile",onClick:l,children:(0,a.jsxs)(i.Button,{variant:"ghost",className:"w-full justify-start gap-2 h-9",children:[(0,a.jsx)(X.Settings,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Preferences"}),(0,a.jsx)($.ChevronRight,{className:"h-4 w-4 ml-auto"})]})})]})]})}var eu=e.i(988274);let eh=(0,v.default)("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),ex=(0,v.default)("BookmarkCheck",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]);var ep=e.i(829463);let eg=(0,v.default)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);var ef=e.i(507),ev=e.i(476725),eb=e.i(487473),ej=e.i(647163);let ey={low_risk:{icon:f.Shield,label:"Low Risk",color:"text-green-500",bg:"bg-green-500/10"},high_margin:{icon:N.TrendingUp,label:"High Margin",color:"text-blue-500",bg:"bg-blue-500/10"},quick_win:{icon:eg,label:"Quick Win",color:"text-yellow-500",bg:"bg-yellow-500/10"},strategic:{icon:h.Target,label:"Strategic",color:"text-purple-500",bg:"bg-purple-500/10"},growth:{icon:N.TrendingUp,label:"Growth",color:"text-primary",bg:"bg-primary/10"}};function eN(){let{opportunities:e,isLoading:t,refresh:l,saveOpportunity:c,dismissOpportunity:m,markViewed:u}=(0,M.useStrategistOpportunities)(),[x,p]=(0,s.useState)("all"),g=e.filter(e=>"all"===x?!e.is_dismissed:"saved"===x?e.is_saved:"new"===x?!e.is_viewed&&!e.is_dismissed:e.opportunity_type===x&&!e.is_dismissed),f=async e=>{e.is_viewed||await u(e.id)},v=async e=>{await c(e.id,!e.is_saved)},b=async e=>{await m(e.id)};return(0,a.jsxs)(r.Card,{className:"h-full",children:[(0,a.jsx)(r.CardHeader,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(r.CardTitle,{className:"text-lg",children:"Opportunity Tracker"}),(0,a.jsx)(r.CardDescription,{children:"Tenders matched to your profile"})]}),(0,a.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>l?.(),disabled:t,children:(0,a.jsx)(eb.RefreshCw,{className:(0,ej.cn)("h-4 w-4",t&&"animate-spin")})})]})}),(0,a.jsx)(r.CardContent,{className:"space-y-4",children:(0,a.jsxs)(d.Tabs,{value:x,onValueChange:p,children:[(0,a.jsxs)(d.TabsList,{className:"w-full grid grid-cols-4",children:[(0,a.jsx)(d.TabsTrigger,{value:"all",className:"text-xs",children:"All"}),(0,a.jsx)(d.TabsTrigger,{value:"new",className:"text-xs",children:"New"}),(0,a.jsx)(d.TabsTrigger,{value:"saved",className:"text-xs",children:"Saved"}),(0,a.jsx)(d.TabsTrigger,{value:"quick_win",className:"text-xs",children:"Quick Wins"})]}),(0,a.jsx)(d.TabsContent,{value:x,className:"mt-4",children:t?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)(w.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):0===g.length?(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,a.jsx)(h.Target,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{className:"text-sm",children:"No opportunities found"}),(0,a.jsx)("p",{className:"text-xs mt-1",children:"Check back later for new matches"})]}):(0,a.jsx)(o.ScrollArea,{className:"h-[400px]",children:(0,a.jsx)("div",{className:"space-y-3",children:g.map(e=>{var t;let s=ey[e.opportunity_type],r=s.icon;return(0,a.jsxs)("div",{className:(0,ej.cn)("p-4 rounded-xl border transition-colors",!e.is_viewed&&"border-primary/50 bg-primary/5",e.is_viewed&&"border-border"),onClick:()=>f(e),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsxs)(n.Badge,{variant:"secondary",className:(0,ej.cn)("text-xs",s.bg,s.color),children:[(0,a.jsx)(r,{className:"h-3 w-3 mr-1"}),s.label]}),!e.is_viewed&&(0,a.jsx)(n.Badge,{variant:"default",className:"text-xs",children:"New"})]}),(0,a.jsx)("h4",{className:"font-medium text-sm text-foreground line-clamp-2",children:e.tender?.title||"Untitled Tender"}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(ev.Building2,{className:"h-3 w-3"}),e.tender?.organization||"Unknown"]}),e.tender?.close_date&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(ef.Calendar,{className:"h-3 w-3"}),new Date(e.tender.close_date).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Match:"}),(0,a.jsxs)("span",{className:(0,ej.cn)("text-sm font-bold",(t=e.match_score)>=.8?"text-green-500":t>=.6?"text-yellow-500":"text-orange-500"),children:[Math.round(100*e.match_score),"%"]}),e.estimated_margin&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground ml-2",children:"Est. Margin:"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-green-500",children:[e.estimated_margin,"%"]})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)(i.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>v(e),children:e.is_saved?(0,a.jsx)(ex,{className:"h-4 w-4 text-primary"}):(0,a.jsx)(eh,{className:"h-4 w-4"})}),(0,a.jsx)(i.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-destructive",onClick:t=>{t.stopPropagation(),b(e)},children:(0,a.jsx)(ep.X,{className:"h-4 w-4"})})]})]}),e.match_reasons&&e.match_reasons.length>0&&(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-border",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Why this matches you:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.match_reasons.slice(0,3).map((e,t)=>(0,a.jsx)(n.Badge,{variant:"outline",className:"text-xs",children:e},t))})]}),(0,a.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,a.jsx)(i.Button,{variant:"outline",size:"sm",className:"flex-1 text-xs bg-transparent",asChild:!0,children:(0,a.jsxs)(Q.default,{href:`/dashboard/tenders/${e.scraped_tender_id||e.custom_tender_id}`,children:[(0,a.jsx)(eu.Eye,{className:"h-3 w-3 mr-1"}),"View Tender"]})}),(0,a.jsx)(i.Button,{variant:"default",size:"sm",className:"flex-1 text-xs",asChild:!0,children:(0,a.jsxs)(Q.default,{href:`/dashboard/strategist?tenderId=${e.scraped_tender_id||e.custom_tender_id}`,children:[(0,a.jsx)(h.Target,{className:"h-3 w-3 mr-1"}),"Get Strategy"]})})]})]},e.id)})})})})]})})]})}var ew=e.i(111369),eC=e.i(924167),eS=e.i(801412),ek=e.i(236159);let eT={compliance:{icon:f.Shield,label:"Compliance",color:"text-red-500"},documentation:{icon:p.FileText,label:"Documentation",color:"text-orange-500"},capacity:{icon:ev.Building2,label:"Capacity",color:"text-blue-500"},experience:{icon:eS.Clock,label:"Experience",color:"text-purple-500"}},eD={critical:{label:"Critical",color:"destructive"},high:{label:"High",color:"default"},medium:{label:"Medium",color:"secondary"},low:{label:"Low",color:"outline"}};function eM(){let{preferences:e,isLoading:t}=(0,M.useStrategistPreferences)(),{score:l,isLoading:o}=(0,M.useCompetitivenessScore)(),[c,d]=(0,s.useState)([]),[m,u]=(0,s.useState)(new Set),[h,x]=(0,s.useState)(!0);(0,s.useEffect)(()=>{e&&l&&p()},[e,l]);let p=()=>{let t=[];if(e?.has_tax_clearance){if(e?.tax_clearance_expiry){let a=Math.ceil((new Date(e.tax_clearance_expiry).getTime()-Date.now())/864e5);a<=30&&t.push({id:"tax_clearance_expiry",category:"compliance",name:"Tax Clearance Certificate",status:"expiring",priority:a<=7?"critical":"high",description:`Your tax clearance expires in ${a} days. Renew before bidding on new tenders.`,actionSteps:["Log into SARS eFiling","Request new Tax Compliance Status","Download updated certificate"],expiryDate:e.tax_clearance_expiry,actionUrl:"https://www.sarsefiling.co.za"})}}else t.push({id:"tax_clearance",category:"compliance",name:"Tax Clearance Certificate",status:"missing",priority:"critical",description:"Required for all government tenders. Without this, your bid will be disqualified.",actionSteps:["Register on SARS eFiling if not already","Submit Tax Compliance Status (TCS) request","Wait for verification (usually 24-48 hours)","Download your Tax Clearance Certificate"],actionUrl:"https://www.sarsefiling.co.za"});e?.has_coida||t.push({id:"coida",category:"compliance",name:"COIDA Letter of Good Standing",status:"missing",priority:"high",description:"Required for tenders involving workers. Shows you're registered for employee compensation.",actionSteps:["Register with the Compensation Fund","Pay outstanding assessments if any","Request Letter of Good Standing","Wait for processing (usually 7-14 days)"],actionUrl:"https://www.labour.gov.za"}),e?.has_csd_registration||t.push({id:"csd",category:"documentation",name:"CSD Registration",status:"missing",priority:"critical",description:"Central Supplier Database registration is mandatory for all government suppliers.",actionSteps:["Go to CSD website","Create account and submit application","Upload required documents (company registration, tax, B-BBEE)","Complete verification process"],actionUrl:"https://secure.csd.gov.za"}),e?.industries?.includes("construction")&&(!e?.cidb_grading||"none"===e.cidb_grading)&&t.push({id:"cidb",category:"capacity",name:"CIDB Registration",status:"missing",priority:"critical",description:"Required for construction-related government tenders.",actionSteps:["Register on CIDB website","Submit grading application with required documents","Pay registration fees","Wait for assessment and grading"],actionUrl:"https://www.cidb.org.za"}),e?.bee_level&&"non-compliant"!==e.bee_level||t.push({id:"bbbee",category:"compliance",name:"B-BBEE Certificate",status:"missing",priority:"high",description:"B-BBEE status affects your preferential points. Without it, you lose competitive advantage.",actionSteps:["Determine if you qualify for EME/QSE affidavit or need verification","Contact a SANAS-accredited verification agency if needed","Gather required documentation","Complete verification process"]}),3>(e?.past_tender_wins||0)&&t.push({id:"experience",category:"experience",name:"Track Record / References",status:"incomplete",priority:"medium",description:"Limited track record may affect scoring on functionality criteria.",actionSteps:["Document all completed projects with details","Request reference letters from past clients","Build portfolio of successful work","Consider joint ventures with experienced partners"]}),d(t),x(!1)},g=c.filter(e=>"complete"===e.status).length,f=c.filter(e=>"critical"===e.priority&&"complete"!==e.status).length,v=c.length>0?g/c.length*100:100;return t||o||h?(0,a.jsx)(r.Card,{children:(0,a.jsx)(r.CardContent,{className:"flex items-center justify-center py-12",children:(0,a.jsx)(w.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})})}):(0,a.jsxs)(r.Card,{children:[(0,a.jsx)(r.CardHeader,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(r.CardTitle,{className:"text-lg",children:"Capability Gap Analysis"}),(0,a.jsx)(r.CardDescription,{children:"What you need to improve your bid readiness"})]}),(0,a.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>p(),children:(0,a.jsx)(eb.RefreshCw,{className:"h-4 w-4"})})]})}),(0,a.jsxs)(r.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-muted/50 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Overall Readiness"}),(0,a.jsxs)("span",{className:"text-lg font-bold text-primary",children:[Math.round(v),"%"]})]}),(0,a.jsx)(z.Progress,{value:v,className:"h-2"}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs",children:[f>0&&(0,a.jsxs)("span",{className:"flex items-center gap-1 text-destructive",children:[(0,a.jsx)(T.AlertTriangle,{className:"h-3 w-3"}),f," critical item",1!==f?"s":""]}),(0,a.jsxs)("span",{className:"flex items-center gap-1 text-muted-foreground",children:[(0,a.jsx)(j.CheckCircle,{className:"h-3 w-3"}),g," of ",c.length," complete"]})]})]}),0===c.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(j.CheckCircle,{className:"h-12 w-12 mx-auto text-green-500 mb-3"}),(0,a.jsx)("p",{className:"font-medium text-foreground",children:"Looking good!"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No capability gaps identified"})]}):(0,a.jsx)("div",{className:"space-y-2",children:c.map(e=>{let t=eT[e.category],s=t.icon,r=m.has(e.id);return(0,a.jsxs)(ew.Collapsible,{open:r,onOpenChange:()=>{var t;let a;return t=e.id,void((a=new Set(m)).has(t)?a.delete(t):a.add(t),u(a))},children:[(0,a.jsx)(ew.CollapsibleTrigger,{asChild:!0,children:(0,a.jsx)("div",{className:(0,ej.cn)("p-4 rounded-xl border cursor-pointer transition-colors hover:bg-muted/50","missing"===e.status&&"critical"===e.priority&&"border-destructive/50 bg-destructive/5"),children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:(0,ej.cn)("h-10 w-10 rounded-lg flex items-center justify-center",`bg-${e.category}/10`),children:(0,a.jsx)(s,{className:(0,ej.cn)("h-5 w-5",t.color)})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h4",{className:"font-medium text-sm text-foreground",children:e.name}),(0,a.jsx)(n.Badge,{variant:eD[e.priority].color,className:"text-xs",children:eD[e.priority].label})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5 line-clamp-1",children:e.description})]}),r?(0,a.jsx)(eC.ChevronDown,{className:"h-4 w-4 text-muted-foreground"}):(0,a.jsx)($.ChevronRight,{className:"h-4 w-4 text-muted-foreground"})]})})}),(0,a.jsx)(ew.CollapsibleContent,{children:(0,a.jsxs)("div",{className:"px-4 pb-4 pt-2 space-y-3 border-x border-b rounded-b-xl",children:[(0,a.jsx)("p",{className:"text-sm text-foreground",children:e.description}),e.expiryDate&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-orange-500",children:[(0,a.jsx)(eS.Clock,{className:"h-4 w-4"}),"Expires: ",new Date(e.expiryDate).toLocaleDateString()]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Steps to resolve:"}),(0,a.jsx)("ol",{className:"space-y-1",children:e.actionSteps.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[(0,a.jsx)("span",{className:"flex-shrink-0 h-5 w-5 rounded-full bg-primary/10 text-primary text-xs flex items-center justify-center",children:t+1}),(0,a.jsx)("span",{children:e})]},t))})]}),e.actionUrl&&(0,a.jsx)(i.Button,{variant:"outline",size:"sm",className:"w-full bg-transparent",asChild:!0,children:(0,a.jsxs)("a",{href:e.actionUrl,target:"_blank",rel:"noopener noreferrer",children:[(0,a.jsx)(ek.ExternalLink,{className:"h-4 w-4 mr-2"}),"Go to Website"]})})]})})]},e.id)})})]})]})}var e_=e.i(23750),eE=e.i(463415);let eB=(0,v.default)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);var eR=e.i(492313),eL=e.i(66401),eP=e.i(120682),eA=e.i(153461);function eF({strategy:e,onSaved:t}){let[r,n]=(0,s.useState)(!1),[l,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!1),[m,u]=(0,s.useState)(e.title||"Untitled Strategy"),{toast:h}=(0,eP.useToast)(),x=async()=>{n(!0);try{let a=await fetch("/api/strategist/strategy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"save",title:m,content:e.content,summary:e.summary,tenderId:e.tender_id})});if(a.ok){let e=await a.json();h({title:"Strategy Saved",description:"Your strategy has been saved to your library."}),d(!1),t?.(e)}else throw Error("Failed to save strategy")}catch(e){h({title:"Error",description:"Failed to save strategy. Please try again.",variant:"destructive"})}finally{n(!1)}},g=async()=>{o(!0);try{let t=await fetch("/api/strategist/export",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({format:"pdf",strategy:e})});if(t.ok){let e=await t.blob(),a=window.URL.createObjectURL(e),s=document.createElement("a");s.href=a,s.download=`${m.replace(/\s+/g,"_")}_Strategy.pdf`,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(a),document.body.removeChild(s),h({title:"Export Complete",description:"Your strategy has been downloaded as PDF."})}else throw Error("Failed to export")}catch(l){var t;let a,s,r=new Blob([(a=(t=e).content||{},s=`TENDER BID STRATEGY
${"=".repeat(50)}

Title: ${t.title}

`,t.summary&&(s+=`SUMMARY
${"-".repeat(30)}
${t.summary}

`),a.viability&&(s+=`BID VIABILITY ANALYSIS
${"-".repeat(30)}
${a.viability}

`),a.strengths&&(s+=`STRENGTHS
${"-".repeat(30)}
${a.strengths}

`),a.weaknesses&&(s+=`WEAKNESSES
${"-".repeat(30)}
${a.weaknesses}

`),a.complianceStrategy&&(s+=`COMPLIANCE STRATEGY
${"-".repeat(30)}
${a.complianceStrategy}

`),a.pricingStrategy&&(s+=`PRICING STRATEGY
${"-".repeat(30)}
${a.pricingStrategy}

`),a.risks&&(s+=`RISKS & MITIGATION
${"-".repeat(30)}
${a.risks}

`),a.submissionChecklist&&(s+=`SUBMISSION CHECKLIST
${"-".repeat(30)}
${a.submissionChecklist}

`),s+=`
Generated by BidMate AI Strategist
Date: ${new Date().toLocaleDateString()}`)],{type:"text/plain"}),i=window.URL.createObjectURL(r),n=document.createElement("a");n.href=i,n.download=`${m.replace(/\s+/g,"_")}_Strategy.txt`,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(i),document.body.removeChild(n),h({title:"Export Complete",description:"Your strategy has been downloaded as text file."})}finally{o(!1)}},f=async()=>{o(!0);try{let t=await fetch("/api/strategist/export",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({format:"docx",strategy:e})});if(t.ok){let e=await t.blob(),a=window.URL.createObjectURL(e),s=document.createElement("a");s.href=a,s.download=`${m.replace(/\s+/g,"_")}_Strategy.docx`,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(a),document.body.removeChild(s),h({title:"Export Complete",description:"Your strategy has been downloaded as Word document."})}else throw Error("Failed to export")}catch(n){var t;let a,s=new Blob([(a=(t=e).content||{},`<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>${t.title} - Bid Strategy</title>
  <style>
    body { font-family: 'Inter', Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 40px; color: #111827; }
    h1 { color: #005B8F; border-bottom: 2px solid #19A7CE; padding-bottom: 10px; }
    h2 { color: #005B8F; margin-top: 30px; }
    .summary { background: #F7F9FC; padding: 20px; border-radius: 8px; margin: 20px 0; }
    .section { margin-bottom: 30px; }
    .footer { margin-top: 50px; padding-top: 20px; border-top: 1px solid #ddd; font-size: 12px; color: #666; }
  </style>
</head>
<body>
  <h1>${t.title}</h1>
  ${t.summary?`<div class="summary"><strong>Summary:</strong> ${t.summary}</div>`:""}
  ${a.viability?`<div class="section"><h2>Bid Viability Analysis</h2><p>${a.viability}</p></div>`:""}
  ${a.strengths?`<div class="section"><h2>Strengths</h2><p>${a.strengths}</p></div>`:""}
  ${a.weaknesses?`<div class="section"><h2>Weaknesses</h2><p>${a.weaknesses}</p></div>`:""}
  ${a.complianceStrategy?`<div class="section"><h2>Compliance Strategy</h2><p>${a.complianceStrategy}</p></div>`:""}
  ${a.pricingStrategy?`<div class="section"><h2>Pricing Strategy</h2><p>${a.pricingStrategy}</p></div>`:""}
  ${a.risks?`<div class="section"><h2>Risks & Mitigation</h2><p>${a.risks}</p></div>`:""}
  ${a.submissionChecklist?`<div class="section"><h2>Submission Checklist</h2><p>${a.submissionChecklist}</p></div>`:""}
  <div class="footer">Generated by BidMate AI Strategist | ${new Date().toLocaleDateString()}</div>
</body>
</html>`)],{type:"text/html"}),r=window.URL.createObjectURL(s),i=document.createElement("a");i.href=r,i.download=`${m.replace(/\s+/g,"_")}_Strategy.html`,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(r),document.body.removeChild(i),h({title:"Export Complete",description:"Your strategy has been downloaded as HTML file."})}finally{o(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eE.DropdownMenu,{children:[(0,a.jsx)(eE.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsxs)(i.Button,{variant:"outline",size:"sm",className:"gap-2 bg-transparent",children:[l?(0,a.jsx)(w.Loader2,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(eR.Download,{className:"h-4 w-4"}),"Export"]})}),(0,a.jsxs)(eE.DropdownMenuContent,{align:"end",children:[(0,a.jsxs)(eE.DropdownMenuItem,{onClick:()=>d(!0),children:[(0,a.jsx)(eA.Save,{className:"h-4 w-4 mr-2"}),"Save to Library"]}),(0,a.jsx)(eE.DropdownMenuSeparator,{}),(0,a.jsxs)(eE.DropdownMenuItem,{onClick:g,disabled:l,children:[(0,a.jsx)(p.FileText,{className:"h-4 w-4 mr-2"}),"Export as PDF"]}),(0,a.jsxs)(eE.DropdownMenuItem,{onClick:f,disabled:l,children:[(0,a.jsx)(p.FileText,{className:"h-4 w-4 mr-2"}),"Export as Word"]})]})]}),(0,a.jsx)(A.Dialog,{open:c,onOpenChange:d,children:(0,a.jsxs)(A.DialogContent,{children:[(0,a.jsxs)(A.DialogHeader,{children:[(0,a.jsx)(A.DialogTitle,{children:"Save Strategy"}),(0,a.jsx)(A.DialogDescription,{children:"Save this strategy to your library for future reference."})]}),(0,a.jsx)("div",{className:"space-y-4 py-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(F.Label,{htmlFor:"title",children:"Strategy Name"}),(0,a.jsx)(e_.Input,{id:"title",value:m,onChange:e=>u(e.target.value),placeholder:"Enter a name for this strategy"})]})}),(0,a.jsxs)(A.DialogFooter,{children:[(0,a.jsx)(i.Button,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),(0,a.jsx)(i.Button,{onClick:x,disabled:r||!m.trim(),children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q.Check,{className:"h-4 w-4 mr-2"}),"Save"]})})]})]})})]})}function eI(){let[e,t]=(0,s.useState)([]),[l,c]=(0,s.useState)(!0),[d,m]=(0,s.useState)(""),[u,p]=(0,s.useState)(null),[g,f]=(0,s.useState)(!1),{toast:v}=(0,eP.useToast)();(0,s.useEffect)(()=>{b()},[]);let b=async()=>{c(!0);try{let e=await fetch("/api/strategist/strategy?action=list");if(e.ok){let a=await e.json();t(a.strategies||[])}}catch(e){console.error("Error loading strategies:",e)}finally{c(!1)}},j=async e=>{try{(await fetch(`/api/strategist/strategy?id=${e}`,{method:"DELETE"})).ok&&(t(t=>t.filter(t=>t.id!==e)),v({title:"Strategy Deleted",description:"The strategy has been removed from your library."}))}catch(e){v({title:"Error",description:"Failed to delete strategy.",variant:"destructive"})}},y=e.filter(e=>e.title.toLowerCase().includes(d.toLowerCase())||e.summary?.toLowerCase().includes(d.toLowerCase())),C=e=>{switch(e){case"low":return"text-green-500";case"medium":return"text-yellow-500";case"high":return"text-orange-500";case"critical":return"text-red-500";default:return"text-muted-foreground"}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r.Card,{className:"h-full",children:[(0,a.jsxs)(r.CardHeader,{className:"pb-3",children:[(0,a.jsx)(r.CardTitle,{className:"text-lg",children:"Strategy Library"}),(0,a.jsx)(r.CardDescription,{children:"Your saved bid strategies"})]}),(0,a.jsxs)(r.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(e_.Input,{placeholder:"Search strategies...",value:d,onChange:e=>m(e.target.value),className:"pl-9"})]}),l?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(w.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):0===y.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(D.FolderOpen,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-3"}),(0,a.jsx)("p",{className:"font-medium text-foreground",children:"No strategies yet"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:d?"No matching strategies found":"Your saved strategies will appear here"})]}):(0,a.jsx)(o.ScrollArea,{className:"h-[400px]",children:(0,a.jsx)("div",{className:"space-y-3",children:y.map(e=>(0,a.jsx)("div",{className:"p-4 rounded-xl border border-border hover:border-primary/50 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(n.Badge,{variant:"outline",className:(0,ej.cn)("text-xs",(e=>{switch(e){case"won":return"bg-green-500/10 text-green-500";case"lost":return"bg-red-500/10 text-red-500";case"submitted":return"bg-blue-500/10 text-blue-500";case"active":return"bg-primary/10 text-primary";default:return"bg-muted text-muted-foreground"}})(e.status)),children:e.status}),e.strategy_type&&(0,a.jsx)(n.Badge,{variant:"secondary",className:"text-xs",children:e.strategy_type})]}),(0,a.jsx)("h4",{className:"font-medium text-sm text-foreground line-clamp-1",children:e.title}),e.summary&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:e.summary}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-3 text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(ef.Calendar,{className:"h-3 w-3"}),new Date(e.created_at).toLocaleDateString()]}),void 0!==e.win_probability&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(h.Target,{className:"h-3 w-3"}),"Win: ",Math.round(100*e.win_probability),"%"]}),e.risk_level&&(0,a.jsxs)("span",{className:(0,ej.cn)("flex items-center gap-1",C(e.risk_level)),children:[(0,a.jsx)(N.TrendingUp,{className:"h-3 w-3"}),e.risk_level," risk"]})]})]}),(0,a.jsxs)(eE.DropdownMenu,{children:[(0,a.jsx)(eE.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(i.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,a.jsx)(eB,{className:"h-4 w-4"})})}),(0,a.jsxs)(eE.DropdownMenuContent,{align:"end",children:[(0,a.jsxs)(eE.DropdownMenuItem,{onClick:()=>{p(e),f(!0)},children:[(0,a.jsx)(eu.Eye,{className:"h-4 w-4 mr-2"}),"View Details"]}),(0,a.jsxs)(eE.DropdownMenuItem,{children:[(0,a.jsx)(eR.Download,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,a.jsx)(eE.DropdownMenuSeparator,{}),(0,a.jsxs)(eE.DropdownMenuItem,{className:"text-destructive",onClick:()=>j(e.id),children:[(0,a.jsx)(eL.Trash2,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})},e.id))})})]})]}),(0,a.jsx)(A.Dialog,{open:g,onOpenChange:f,children:(0,a.jsxs)(A.DialogContent,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)(A.DialogHeader,{children:[(0,a.jsx)(A.DialogTitle,{children:u?.title}),(0,a.jsxs)(A.DialogDescription,{children:["Created on ",u&&new Date(u.created_at).toLocaleDateString()]})]}),u&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[void 0!==u.viability_score&&(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-muted/50 text-center",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Viability"}),(0,a.jsxs)("p",{className:"text-lg font-bold text-primary",children:[Math.round(100*u.viability_score),"%"]})]}),void 0!==u.win_probability&&(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-muted/50 text-center",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Win Probability"}),(0,a.jsxs)("p",{className:"text-lg font-bold text-green-500",children:[Math.round(100*u.win_probability),"%"]})]}),u.risk_level&&(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-muted/50 text-center",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Risk Level"}),(0,a.jsx)("p",{className:(0,ej.cn)("text-lg font-bold capitalize",C(u.risk_level)),children:u.risk_level})]})]}),u.summary&&(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-muted/50",children:[(0,a.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Summary"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:u.summary})]}),u.content&&(0,a.jsx)("div",{className:"space-y-3",children:Object.entries(u.content).map(([e,t])=>t&&"raw"!==e?(0,a.jsxs)("div",{className:"p-4 rounded-lg border",children:[(0,a.jsx)("h4",{className:"text-sm font-medium capitalize mb-2",children:e.replace(/_/g," ")}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:t})]},e):null)}),(0,a.jsx)("div",{className:"flex justify-end gap-2 pt-4 border-t",children:(0,a.jsx)(eF,{strategy:{title:u.title,content:u.content,summary:u.summary}})})]})]})})]})}let eO=(0,v.default)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);var eW=e.i(330584);let ez=(0,v.default)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);function e$({tenderId:e,className:t}){let[l,o]=(0,s.useState)(null),[c,d]=(0,s.useState)([]),[m,u]=(0,s.useState)(!1),[x,p]=(0,s.useState)(!1),[g,f]=(0,s.useState)("stable");(0,s.useEffect)(()=>{e&&v()},[e]);let v=async()=>{u(!0);try{let t=await fetch(`/api/strategist/readiness${e?`?tenderId=${e}`:""}`);if(t.ok){let e=await t.json(),a=[{name:"Documentation Completeness",score:e.documentation_score||e.document_score||0,weight:.2,impact:(e.documentation_score||e.document_score||0)>=.7?"positive":"negative",description:"Having all required documents ready"},{name:"Compliance Status",score:e.compliance_score||0,weight:.25,impact:(e.compliance_score||0)>=.8?"positive":"negative",description:"Tax clearance, COIDA, CSD registration"},{name:"Experience & Track Record",score:e.experience_score||0,weight:.2,impact:(e.experience_score||0)>=.6?"positive":"neutral",description:"Past tender wins and relevant experience"},{name:"Capacity Fit",score:e.capacity_score||.5,weight:.15,impact:(e.capacity_score||.5)>=.7?"positive":"neutral",description:"Company size and capability match"},{name:"B-BBEE Status",score:e.bbbee_score||.5,weight:.2,impact:(e.bbbee_score||.5)>=.7?"positive":"neutral",description:"Preferential points from B-BBEE level"}];d(a);let s=a.reduce((e,t)=>e+t.score*t.weight,0),r=100*s;o(r),r>60?f("up"):r<40?f("down"):f("stable")}}catch(e){console.error("Error calculating win probability:",e)}finally{u(!1)}},b=e=>e>=70?"text-green-500":e>=50?"text-yellow-500":e>=30?"text-orange-500":"text-red-500";return m?(0,a.jsx)(r.Card,{className:(0,ej.cn)(t),children:(0,a.jsx)(r.CardContent,{className:"flex items-center justify-center py-8",children:(0,a.jsx)(w.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})})}):(0,a.jsx)(r.Card,{className:(0,ej.cn)(t),children:(0,a.jsxs)(ew.Collapsible,{open:x,onOpenChange:p,children:[(0,a.jsx)(r.CardHeader,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(r.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,a.jsx)(h.Target,{className:"h-5 w-5 text-primary"}),"Win Probability"]}),(0,a.jsx)(r.CardDescription,{children:"Estimated chance of winning this bid"})]}),(0,a.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:v,disabled:m,children:(0,a.jsx)(eb.RefreshCw,{className:(0,ej.cn)("h-4 w-4",m&&"animate-spin")})})]})}),(0,a.jsxs)(r.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsx)("div",{className:(0,ej.cn)("h-24 w-24 rounded-full flex items-center justify-center border-4",null!==l&&(l>=70?"bg-green-500":l>=50?"bg-yellow-500":l>=30?"bg-orange-500":"bg-red-500").replace("bg-","border-")),children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("span",{className:(0,ej.cn)("text-3xl font-bold",null!==l&&b(l)),children:[null!==l?Math.round(l):"--","%"]})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(n.Badge,{variant:"secondary",className:(0,ej.cn)(null!==l&&b(l)),children:null!==l?l>=70?"Strong":l>=50?"Moderate":l>=30?"Fair":"Low":"Unknown"}),"up"===g?(0,a.jsx)(N.TrendingUp,{className:"h-4 w-4 text-green-500"}):"down"===g?(0,a.jsx)(eO,{className:"h-4 w-4 text-red-500"}):null]}),null!==l&&(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(z.Progress,{value:l,className:"h-2"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:l>=70?"You're well-positioned for this tender":l>=50?"Good potential with room for improvement":l>=30?"Consider addressing gaps before bidding":"Significant improvements needed"})]})]})]}),(0,a.jsx)(ew.CollapsibleTrigger,{asChild:!0,children:(0,a.jsx)(i.Button,{variant:"ghost",size:"sm",className:"w-full justify-center gap-2",children:x?(0,a.jsxs)(a.Fragment,{children:["Hide Factors",(0,a.jsx)(eW.ChevronUp,{className:"h-4 w-4"})]}):(0,a.jsxs)(a.Fragment,{children:["See Contributing Factors",(0,a.jsx)(eC.ChevronDown,{className:"h-4 w-4"})]})})}),(0,a.jsxs)(ew.CollapsibleContent,{children:[(0,a.jsx)("div",{className:"space-y-3 pt-2",children:c.map((e,t)=>{var s;return(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:["positive"===(s=e.impact)?(0,a.jsx)(j.CheckCircle,{className:"h-4 w-4 text-green-500"}):"negative"===s?(0,a.jsx)(T.AlertTriangle,{className:"h-4 w-4 text-red-500"}):(0,a.jsx)(ez,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:e.name}),(0,a.jsxs)("span",{className:(0,ej.cn)("text-sm font-bold",e.score>=.7?"text-green-500":e.score>=.5?"text-yellow-500":"text-red-500"),children:[Math.round(100*e.score),"%"]})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description}),(0,a.jsx)(z.Progress,{value:100*e.score,className:"h-1.5 mt-2"})]})]},t)})}),(0,a.jsx)("div",{className:"mt-4 p-3 rounded-lg bg-primary/5 border border-primary/20",children:(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,a.jsx)("strong",{className:"text-foreground",children:"Note:"})," This probability is an estimate based on your profile data and typical tender evaluation criteria. Actual results depend on competition, pricing, and evaluator discretion."]})})]})]})]})})}var eU=e.i(178896),eq=e.i(754582),eG=e.i(457831),eH=e.i(594792),eY=e.i(926457),eV=e.i(179929),eX=e.i(755485),eQ=e.i(866001),eJ=e.i(4943),eK=e.i(835222),eZ=e.i(270149),e0=e.i(467746),[e1,e4]=(0,eG.createContextScope)("Tooltip",[eV.createPopperScope]),e2=(0,eV.createPopperScope)(),e3="TooltipProvider",e5="tooltip.open",[e8,e6]=e1(e3),e9=e=>{let{__scopeTooltip:t,delayDuration:r=700,skipDelayDuration:i=300,disableHoverableContent:n=!1,children:l}=e,[o,c]=s.useState(!0),d=s.useRef(!1),m=s.useRef(0);return s.useEffect(()=>{let e=m.current;return()=>window.clearTimeout(e)},[]),(0,a.jsx)(e8,{scope:t,isOpenDelayed:o,delayDuration:r,onOpen:s.useCallback(()=>{window.clearTimeout(m.current),c(!1)},[]),onClose:s.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>c(!0),i)},[i]),isPointerInTransitRef:d,onPointerInTransitChange:s.useCallback(e=>{d.current=e},[]),disableHoverableContent:n,children:l})};e9.displayName=e3;var e7="Tooltip",[te,tt]=e1(e7),ta=e=>{let{__scopeTooltip:t,children:r,open:i,defaultOpen:n=!1,onOpenChange:l,disableHoverableContent:o,delayDuration:c}=e,d=e6(e7,e.__scopeTooltip),m=e2(t),[u,h]=s.useState(null),x=(0,eY.useId)(),p=s.useRef(0),g=o??d.disableHoverableContent,f=c??d.delayDuration,v=s.useRef(!1),[b=!1,j]=(0,eZ.useControllableState)({prop:i,defaultProp:n,onChange:e=>{e?(d.onOpen(),document.dispatchEvent(new CustomEvent(e5))):d.onClose(),l?.(e)}}),y=s.useMemo(()=>b?v.current?"delayed-open":"instant-open":"closed",[b]),N=s.useCallback(()=>{window.clearTimeout(p.current),p.current=0,v.current=!1,j(!0)},[j]),w=s.useCallback(()=>{window.clearTimeout(p.current),p.current=0,j(!1)},[j]),C=s.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{v.current=!0,j(!0),p.current=0},f)},[f,j]);return s.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),(0,a.jsx)(eV.Root,{...m,children:(0,a.jsx)(te,{scope:t,contentId:x,open:b,stateAttribute:y,trigger:u,onTriggerChange:h,onTriggerEnter:s.useCallback(()=>{d.isOpenDelayed?C():N()},[d.isOpenDelayed,C,N]),onTriggerLeave:s.useCallback(()=>{g?w():(window.clearTimeout(p.current),p.current=0)},[w,g]),onOpen:N,onClose:w,disableHoverableContent:g,children:r})})};ta.displayName=e7;var ts="TooltipTrigger",tr=s.forwardRef((e,t)=>{let{__scopeTooltip:r,...i}=e,n=tt(ts,r),l=e6(ts,r),o=e2(r),c=s.useRef(null),d=(0,eq.useComposedRefs)(t,c,n.onTriggerChange),m=s.useRef(!1),u=s.useRef(!1),h=s.useCallback(()=>m.current=!1,[]);return s.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),(0,a.jsx)(eV.Anchor,{asChild:!0,...o,children:(0,a.jsx)(eJ.Primitive.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...i,ref:d,onPointerMove:(0,eU.composeEventHandlers)(e.onPointerMove,e=>{"touch"!==e.pointerType&&(u.current||l.isPointerInTransitRef.current||(n.onTriggerEnter(),u.current=!0))}),onPointerLeave:(0,eU.composeEventHandlers)(e.onPointerLeave,()=>{n.onTriggerLeave(),u.current=!1}),onPointerDown:(0,eU.composeEventHandlers)(e.onPointerDown,()=>{m.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:(0,eU.composeEventHandlers)(e.onFocus,()=>{m.current||n.onOpen()}),onBlur:(0,eU.composeEventHandlers)(e.onBlur,n.onClose),onClick:(0,eU.composeEventHandlers)(e.onClick,n.onClose)})})});tr.displayName=ts;var ti="TooltipPortal",[tn,tl]=e1(ti,{forceMount:void 0}),to=e=>{let{__scopeTooltip:t,forceMount:s,children:r,container:i}=e,n=tt(ti,t);return(0,a.jsx)(tn,{scope:t,forceMount:s,children:(0,a.jsx)(eQ.Presence,{present:s||n.open,children:(0,a.jsx)(eX.Portal,{asChild:!0,container:i,children:r})})})};to.displayName=ti;var tc="TooltipContent",td=s.forwardRef((e,t)=>{let s=tl(tc,e.__scopeTooltip),{forceMount:r=s.forceMount,side:i="top",...n}=e,l=tt(tc,e.__scopeTooltip);return(0,a.jsx)(eQ.Presence,{present:r||l.open,children:l.disableHoverableContent?(0,a.jsx)(tx,{side:i,...n,ref:t}):(0,a.jsx)(tm,{side:i,...n,ref:t})})}),tm=s.forwardRef((e,t)=>{let r=tt(tc,e.__scopeTooltip),i=e6(tc,e.__scopeTooltip),n=s.useRef(null),l=(0,eq.useComposedRefs)(t,n),[o,c]=s.useState(null),{trigger:d,onClose:m}=r,u=n.current,{onPointerInTransitChange:h}=i,x=s.useCallback(()=>{c(null),h(!1)},[h]),p=s.useCallback((e,t)=>{let a,s=e.currentTarget,r={x:e.clientX,y:e.clientY},i=function(e,t){let a=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(a,s,r,i)){case i:return"left";case r:return"right";case a:return"top";case s:return"bottom";default:throw Error("unreachable")}}(r,s.getBoundingClientRect());c(((a=[...function(e,t,a=5){let s=[];switch(t){case"top":s.push({x:e.x-a,y:e.y+a},{x:e.x+a,y:e.y+a});break;case"bottom":s.push({x:e.x-a,y:e.y-a},{x:e.x+a,y:e.y-a});break;case"left":s.push({x:e.x+a,y:e.y-a},{x:e.x+a,y:e.y+a});break;case"right":s.push({x:e.x-a,y:e.y-a},{x:e.x-a,y:e.y+a})}return s}(r,i),...function(e){let{top:t,right:a,bottom:s,left:r}=e;return[{x:r,y:t},{x:a,y:t},{x:a,y:s},{x:r,y:s}]}(t.getBoundingClientRect())].slice()).sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:1*!!(e.y>t.y)),function(e){if(e.length<=1)return e.slice();let t=[];for(let a=0;a<e.length;a++){let s=e[a];for(;t.length>=2;){let e=t[t.length-1],a=t[t.length-2];if((e.x-a.x)*(s.y-a.y)>=(e.y-a.y)*(s.x-a.x))t.pop();else break}t.push(s)}t.pop();let a=[];for(let t=e.length-1;t>=0;t--){let s=e[t];for(;a.length>=2;){let e=a[a.length-1],t=a[a.length-2];if((e.x-t.x)*(s.y-t.y)>=(e.y-t.y)*(s.x-t.x))a.pop();else break}a.push(s)}return(a.pop(),1===t.length&&1===a.length&&t[0].x===a[0].x&&t[0].y===a[0].y)?t:t.concat(a)}(a))),h(!0)},[h]);return s.useEffect(()=>()=>x(),[x]),s.useEffect(()=>{if(d&&u){let e=e=>p(e,u),t=e=>p(e,d);return d.addEventListener("pointerleave",e),u.addEventListener("pointerleave",t),()=>{d.removeEventListener("pointerleave",e),u.removeEventListener("pointerleave",t)}}},[d,u,p,x]),s.useEffect(()=>{if(o){let e=e=>{let t=e.target,a={x:e.clientX,y:e.clientY},s=d?.contains(t)||u?.contains(t),r=!function(e,t){let{x:a,y:s}=e,r=!1;for(let e=0,i=t.length-1;e<t.length;i=e++){let n=t[e].x,l=t[e].y,o=t[i].x,c=t[i].y;l>s!=c>s&&a<(o-n)*(s-l)/(c-l)+n&&(r=!r)}return r}(a,o);s?x():r&&(x(),m())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[d,u,o,m,x]),(0,a.jsx)(tx,{...e,ref:l})}),[tu,th]=e1(e7,{isInside:!1}),tx=s.forwardRef((e,t)=>{let{__scopeTooltip:r,children:i,"aria-label":n,onEscapeKeyDown:l,onPointerDownOutside:o,...c}=e,d=tt(tc,r),m=e2(r),{onClose:u}=d;return s.useEffect(()=>(document.addEventListener(e5,u),()=>document.removeEventListener(e5,u)),[u]),s.useEffect(()=>{if(d.trigger){let e=e=>{let t=e.target;t?.contains(d.trigger)&&u()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[d.trigger,u]),(0,a.jsx)(eH.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:u,children:(0,a.jsxs)(eV.Content,{"data-state":d.stateAttribute,...m,...c,ref:t,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,a.jsx)(eK.Slottable,{children:i}),(0,a.jsx)(tu,{scope:r,isInside:!0,children:(0,a.jsx)(e0.Root,{id:d.contentId,role:"tooltip",children:n||i})})]})})});td.displayName=tc;var tp="TooltipArrow",tg=s.forwardRef((e,t)=>{let{__scopeTooltip:s,...r}=e,i=e2(s);return th(tp,s).isInside?null:(0,a.jsx)(eV.Arrow,{...i,...r,ref:t})});function tf({delayDuration:e=0,...t}){return(0,a.jsx)(e9,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function tv({...e}){return(0,a.jsx)(tf,{children:(0,a.jsx)(ta,{"data-slot":"tooltip",...e})})}function tb({...e}){return(0,a.jsx)(tr,{"data-slot":"tooltip-trigger",...e})}function tj({className:e,sideOffset:t=0,children:s,...r}){return(0,a.jsx)(to,{children:(0,a.jsxs)(td,{"data-slot":"tooltip-content",sideOffset:t,className:(0,ej.cn)("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[s,(0,a.jsx)(tg,{className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}tg.displayName=tp;var ty=e.i(319732);let tN={rfq:{title:"Request for Quotation (RFQ)",definition:"A procurement method where the buyer requests price quotes from multiple suppliers for specific goods or services.",example:"An RFQ might be used to get pricing for office supplies or standard equipment."},rfp:{title:"Request for Proposal (RFP)",definition:"A formal solicitation that outlines requirements and invites suppliers to submit detailed proposals including methodology and pricing.",example:"Complex IT projects often use RFPs to evaluate both technical capability and cost."},rfb:{title:"Request for Bid (RFB)",definition:"Similar to RFQ but typically used for larger contracts where the evaluation is primarily based on price.",example:"Construction projects often use RFBs where specifications are clearly defined."},bbbee:{title:"Broad-Based Black Economic Empowerment (B-BBEE)",definition:"A South African policy to advance economic transformation and enhance the participation of black people in the economy.",example:"Your B-BBEE level affects preferential points in government tenders (typically 10-20 points)."},cidb:{title:"Construction Industry Development Board (CIDB)",definition:"A South African regulatory body that grades and registers contractors for public sector construction work.",example:"To bid on a R10 million construction tender, you might need a CIDB grading of 5 or higher."},csd:{title:"Central Supplier Database (CSD)",definition:"A South African government database where all suppliers must register to do business with government entities.",example:"Your CSD registration must be complete and verified before you can submit government tender bids."},scm:{title:"Supply Chain Management (SCM)",definition:"The management of the flow of goods and services, including all processes that transform raw materials into final products.",example:"Government SCM policies ensure fair, transparent, and cost-effective procurement."},boq:{title:"Bill of Quantities (BOQ)",definition:"A detailed list of materials, parts, and labor with their costs, used to price a project.",example:"The BOQ breaks down a construction project into itemized costs for each component."},functionality:{title:"Functionality Evaluation",definition:"Assessment of a bidder's technical ability to deliver on the tender requirements before price evaluation.",example:"You must score at least 60% on functionality to have your price evaluated."},"90/10":{title:"90/10 Preference Point System",definition:"For tenders above R50 million, 90 points are allocated for price and 10 for B-BBEE status.",example:"A Level 1 B-BBEE contributor gets all 10 preference points under this system."},"80/20":{title:"80/20 Preference Point System",definition:"For tenders up to R50 million, 80 points are allocated for price and 20 for B-BBEE status.",example:"A Level 1 B-BBEE contributor gets all 20 preference points under this system."},coida:{title:"COIDA Letter of Good Standing",definition:"Certificate from the Compensation Fund showing compliance with the Compensation for Occupational Injuries and Diseases Act.",example:"Without a valid COIDA letter, your tender may be disqualified."},sbd:{title:"Standard Bidding Documents (SBD)",definition:"Standardized forms used in South African government procurement (SBD1-SBD9).",example:"SBD4 is the Declaration of Interest form that must be completed for all government tenders."},mbd:{title:"Municipal Bidding Documents (MBD)",definition:"Standardized forms used specifically in South African municipal procurement.",example:"MBD forms are similar to SBD but specifically designed for municipal tenders."},gcc:{title:"General Conditions of Contract (GCC)",definition:"Standard contract terms that apply to all government procurement contracts.",example:"The GCC outlines payment terms, dispute resolution, and general obligations."},scc:{title:"Special Conditions of Contract (SCC)",definition:"Project-specific terms that supplement or modify the General Conditions of Contract.",example:"The SCC might specify unique delivery requirements or penalties for this particular tender."},jv:{title:"Joint Venture (JV)",definition:"A business arrangement where two or more parties agree to pool resources for a specific project while remaining independent.",example:"Smaller companies often form JVs with larger ones to meet CIDB grading requirements."},tor:{title:"Terms of Reference (TOR)",definition:"Document that defines the scope, objectives, and deliverables for a project or tender.",example:"The TOR outlines exactly what the client expects you to deliver and how success will be measured."}};function tw({term:e,children:t,className:s,showIcon:r=!0}){let i=tN[e.toLowerCase()];return i?(0,a.jsx)(tf,{children:(0,a.jsxs)(tv,{delayDuration:300,children:[(0,a.jsx)(tb,{asChild:!0,children:(0,a.jsxs)("span",{className:(0,ej.cn)("cursor-help border-b border-dashed border-muted-foreground/50 inline-flex items-center gap-1",s),children:[t||e,r&&(0,a.jsx)(ty.HelpCircle,{className:"h-3 w-3 text-muted-foreground"})]})}),(0,a.jsx)(tj,{side:"top",className:"max-w-sm p-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"font-medium text-foreground",children:i.title}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:i.definition}),i.example&&(0,a.jsxs)("p",{className:"text-xs text-primary italic",children:["Example: ",i.example]})]})})]})}):(0,a.jsx)("span",{className:s,children:t||e})}function tC({text:e,className:t}){if(!e||"string"!=typeof e)return(0,a.jsx)("span",{className:t});let s=Object.keys(tN).join("|"),r=RegExp(`\\b(${s})\\b`,"gi"),i=e.split(r);return(0,a.jsx)("span",{className:t,children:i.map((e,t)=>{if(null==e)return null;let s=e.toLowerCase();return s&&tN[s]?(0,a.jsx)(tw,{term:s,showIcon:!1,children:e},t):(0,a.jsx)("span",{children:e},t)})})}function tS({showOnboarding:e}){let[t,v]=(0,s.useState)(e),[_,E]=(0,s.useState)(!1),[B,R]=(0,s.useState)("chat"),L=(0,s.useRef)(null),{messages:A,input:F,handleInputChange:I,handleSubmit:O,isLoading:W,conversationId:z,setInput:$}=(0,M.useStrategistChat)(),{alerts:U=[],unreadCount:q=0}=(0,M.useStrategistAlerts)({limit:5})||{},{preferences:H}=(0,M.useStrategistPreferences)()||{},{score:Y}=(0,M.useCompetitivenessScore)()||{},{conversations:V=[]}=(0,M.useStrategistConversations)()||{},X=F??"";return(0,s.useEffect)(()=>{L.current?.scrollIntoView({behavior:"smooth"})},[A]),(0,a.jsxs)("div",{className:"flex h-[calc(100vh-4rem)] overflow-hidden",children:[(0,a.jsx)(c.Sheet,{open:_,onOpenChange:E,children:(0,a.jsx)(c.SheetContent,{side:"left",className:"w-80 p-0",children:(0,a.jsx)(em,{conversations:V,alerts:U,unreadCount:q,score:Y,onClose:()=>E(!1)})})}),(0,a.jsx)("aside",{className:"hidden lg:flex w-80 border-r border-border flex-col",children:(0,a.jsx)(em,{conversations:V,alerts:U,unreadCount:q,score:Y})}),(0,a.jsxs)("main",{className:"flex-1 flex flex-col",children:[(0,a.jsxs)("header",{className:"border-b border-border p-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(i.Button,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:()=>E(!0),children:(0,a.jsx)(S.Menu,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-xl bg-primary/10 flex items-center justify-center",children:(0,a.jsx)(u.Sparkles,{className:"h-5 w-5 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-lg font-semibold text-foreground",children:"AI Tender Strategist"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Your personal assistant for winning tenders"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[q>0&&(0,a.jsxs)(i.Button,{variant:"ghost",size:"sm",className:"gap-2",children:[(0,a.jsx)(y.Bell,{className:"h-4 w-4"}),(0,a.jsx)(n.Badge,{variant:"destructive",className:"text-xs",children:q})]}),(0,a.jsxs)(i.Button,{variant:"outline",size:"sm",className:"gap-2 bg-transparent",children:[(0,a.jsx)(k.Plus,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"New Chat"})]})]})]}),(0,a.jsx)("div",{className:"border-b border-border px-4",children:(0,a.jsx)(d.Tabs,{value:B,onValueChange:e=>R(e),children:(0,a.jsxs)(d.TabsList,{className:"bg-transparent h-12 p-0 gap-4",children:[(0,a.jsxs)(d.TabsTrigger,{value:"chat",className:"data-[state=active]:bg-transparent data-[state=active]:border-b-2 data-[state=active]:border-primary rounded-none px-0 pb-3",children:[(0,a.jsx)(u.Sparkles,{className:"h-4 w-4 mr-2"}),"Chat"]}),(0,a.jsxs)(d.TabsTrigger,{value:"opportunities",className:"data-[state=active]:bg-transparent data-[state=active]:border-b-2 data-[state=active]:border-primary rounded-none px-0 pb-3",children:[(0,a.jsx)(h.Target,{className:"h-4 w-4 mr-2"}),"Opportunities"]}),(0,a.jsxs)(d.TabsTrigger,{value:"strategies",className:"data-[state=active]:bg-transparent data-[state=active]:border-b-2 data-[state=active]:border-primary rounded-none px-0 pb-3",children:[(0,a.jsx)(D.FolderOpen,{className:"h-4 w-4 mr-2"}),"My Strategies"]}),(0,a.jsxs)(d.TabsTrigger,{value:"gaps",className:"data-[state=active]:bg-transparent data-[state=active]:border-b-2 data-[state=active]:border-primary rounded-none px-0 pb-3",children:[(0,a.jsx)(T.AlertTriangle,{className:"h-4 w-4 mr-2"}),"Gap Analysis"]})]})})}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden",children:["chat"===B&&(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[0===A.length?(0,a.jsx)("div",{className:"flex-1 flex flex-col items-center justify-center p-4 md:p-8 overflow-auto",children:(0,a.jsxs)("div",{className:"max-w-2xl w-full space-y-8",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("div",{className:"h-16 w-16 rounded-2xl bg-primary/10 flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(u.Sparkles,{className:"h-8 w-8 text-primary"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Welcome to AI Tender Strategist"}),(0,a.jsx)("p",{className:"text-muted-foreground max-w-md mx-auto",children:"I'm here to help you understand tendering, build winning strategies, and discover opportunities tailored to your profile."})]}),(0,a.jsx)("div",{className:"grid gap-3 sm:grid-cols-2",children:P.slice(0,6).map(e=>{var t;let s;return(0,a.jsx)(i.Button,{variant:"outline",className:"h-auto p-4 justify-start text-left bg-transparent hover:bg-accent",onClick:()=>{$(e.prompt)},children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"h-8 w-8 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:(t=e.icon,s=({target:h.Target,"clipboard-check":j.CheckCircle,search:x.Search,"file-text":p.FileText,calculator:g.Calculator,shield:f.Shield,"graduation-cap":b,"check-circle":j.CheckCircle})[t]||C.Lightbulb,(0,a.jsx)(s,{className:"h-4 w-4"}))}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-foreground",children:e.label}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground line-clamp-1",children:[e.prompt.substring(0,50),"..."]})]})]})},e.id)})}),Y&&(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3",children:[(0,a.jsx)(r.Card,{className:"border-border",children:(0,a.jsxs)(r.CardContent,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Readiness Score"}),(0,a.jsx)(N.TrendingUp,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-foreground mt-1",children:[Math.round(100*(Y.overall_score||0)),"%"]})]})}),(0,a.jsx)(r.Card,{className:"border-border",children:(0,a.jsxs)(r.CardContent,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Win Probability"}),(0,a.jsx)(h.Target,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-foreground mt-1",children:[Math.round(100*(Y.win_probability||0)),"%"]})]})}),(0,a.jsx)(r.Card,{className:"border-border",children:(0,a.jsxs)(r.CardContent,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Compliance"}),(0,a.jsx)(f.Shield,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-foreground mt-1",children:[Math.round(100*(Y.compliance_score||0)),"%"]})]})})]})]})}):(0,a.jsx)(o.ScrollArea,{className:"flex-1 p-4",children:(0,a.jsxs)("div",{className:"max-w-3xl mx-auto space-y-4",children:[A.map(e=>(0,a.jsxs)("div",{className:(0,ej.cn)("flex gap-3","user"===e.role?"justify-end":"justify-start"),children:["assistant"===e.role&&(0,a.jsx)("div",{className:"h-8 w-8 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(u.Sparkles,{className:"h-4 w-4 text-primary"})}),(0,a.jsx)("div",{className:(0,ej.cn)("rounded-2xl px-4 py-3 max-w-[80%]","user"===e.role?"bg-primary text-primary-foreground":"bg-muted text-foreground"),children:(0,a.jsx)("div",{className:"whitespace-pre-wrap text-sm",children:"assistant"===e.role?(0,a.jsx)(tC,{text:String(e.content||"")}):String(e.content||"")})})]},e.id)),W&&(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"h-8 w-8 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(u.Sparkles,{className:"h-4 w-4 text-primary"})}),(0,a.jsx)("div",{className:"bg-muted rounded-2xl px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(w.Loader2,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Thinking..."})]})})]}),(0,a.jsx)("div",{ref:L})]})}),(0,a.jsx)("div",{className:"border-t border-border p-4",children:(0,a.jsxs)("form",{onSubmit:O,className:"max-w-3xl mx-auto",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l.Textarea,{value:X,onChange:I,placeholder:"Ask me anything about tendering...",className:"min-h-[60px] max-h-[200px] pr-12 resize-none rounded-xl",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),O(e))}}),(0,a.jsx)(i.Button,{type:"submit",size:"icon",disabled:!X.trim()||W,className:"absolute right-2 bottom-2 h-8 w-8 rounded-lg",children:W?(0,a.jsx)(w.Loader2,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(m.Send,{className:"h-4 w-4"})})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"Press Enter to send, Shift+Enter for new line"})]})})]}),"opportunities"===B&&(0,a.jsx)("div",{className:"p-6 overflow-auto h-full",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto grid gap-6 lg:grid-cols-2",children:[(0,a.jsx)(eN,{}),(0,a.jsx)(e$,{})]})}),"strategies"===B&&(0,a.jsx)("div",{className:"p-6 overflow-auto h-full",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsx)(eI,{})})}),"gaps"===B&&(0,a.jsx)("div",{className:"p-6 overflow-auto h-full",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsx)(eM,{})})})]})]}),(0,a.jsx)(G,{open:t,onOpenChange:v})]})}e.s(["StrategistPageClient",()=>tS],38671)}]);