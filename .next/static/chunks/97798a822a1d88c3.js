(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,970065,e=>{"use strict";var a=e.i(375298),t=e.i(647163);function s({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function r({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function i({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...s})}function n({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...s})}function l({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...s})}function d({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,t.cn)("flex items-center px-6 [.border-t]:pt-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>l,"CardDescription",()=>n,"CardFooter",()=>d,"CardHeader",()=>r,"CardTitle",()=>i])},692626,e=>{"use strict";let a=(0,e.i(197140).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],692626)},781947,e=>{"use strict";var a=e.i(375298),t=e.i(294237),s=e.i(647163);let r=(0,t.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function i({className:e,variant:t,...i}){return(0,a.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,s.cn)(r({variant:t}),e),...i})}function n({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"alert-title",className:(0,s.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function l({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"alert-description",className:(0,s.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}e.s(["Alert",()=>i,"AlertDescription",()=>l,"AlertTitle",()=>n])},189691,e=>{"use strict";let a=(0,e.i(197140).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],189691)},889384,e=>{"use strict";let a=(0,e.i(197140).default)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>a],889384)},851484,e=>{"use strict";var a=e.i(375298),t=e.i(769107),s=e.i(167881),r=e.i(970065),i=e.i(920755),n=e.i(476725),l=e.i(189691),d=e.i(692626),c=e.i(889384),o=e.i(197140);let m=(0,o.default)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),u=(0,o.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var p=e.i(800383),x=e.i(994179),h=e.i(781947);function f(){let e=(0,i.createClient)(),o=(0,p.useRouter)(),[f,g]=(0,t.useState)(!0),[y,v]=(0,t.useState)([]),[j,N]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{let{data:{user:a}}=await e.auth.getUser();a?(N(a),b(a)):o.push("/login")})()},[o]);let b=async a=>{try{let{data:t,error:s}=await e.from("companies").select("*").eq("user_id",a.id).eq("is_archived",!1).order("is_primary",{ascending:!1}).order("created_at",{ascending:!1});if(s)throw s;v(t||[])}catch(e){console.error("Error loading companies:",e)}finally{g(!1)}},w=async a=>{try{let{error:t}=await e.from("companies").update({is_primary:!0}).eq("id",a);if(t)throw t;j&&b(j),alert("Primary company updated!")}catch(e){console.error("Error setting primary company:",e),alert("Failed to update primary company")}},C=async a=>{if(confirm("Are you sure you want to archive this company?"))try{let{error:t}=await e.from("companies").update({is_archived:!0}).eq("id",a);if(t)throw t;j&&b(j),alert("Company archived successfully!")}catch(e){console.error("Error archiving company:",e),alert("Failed to archive company")}};return f?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)(d.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):(0,a.jsxs)("div",{className:"container max-w-6xl py-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Company Profiles"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"Manage multiple companies and their compliance information"})]}),(0,a.jsxs)(s.Button,{onClick:()=>o.push("/dashboard/companies/new"),children:[(0,a.jsx)(l.Plus,{className:"h-4 w-4 mr-2"}),"Add Company"]})]}),0===y.length?(0,a.jsxs)(h.Alert,{children:[(0,a.jsx)(n.Building2,{className:"h-4 w-4"}),(0,a.jsx)(h.AlertDescription,{children:"No companies added yet. Add your first company to start managing tenders."})]}):(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:y.map(e=>(0,a.jsxs)(r.Card,{className:"relative",children:[e.is_primary&&(0,a.jsx)("div",{className:"absolute top-4 right-4",children:(0,a.jsxs)(x.Badge,{variant:"default",className:"flex items-center gap-1",children:[(0,a.jsx)(c.Star,{className:"h-3 w-3 fill-current"}),"Primary"]})}),(0,a.jsx)(r.CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,a.jsx)(n.Building2,{className:"h-5 w-5 text-primary"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(r.CardTitle,{className:"text-lg",children:e.company_name}),(0,a.jsx)(r.CardDescription,{className:"mt-1",children:e.industry?e.industry.charAt(0).toUpperCase()+e.industry.slice(1):"No industry"})]})]})}),(0,a.jsxs)(r.CardContent,{className:"space-y-2 text-sm",children:[e.registration_number&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Registration:"}),(0,a.jsx)("span",{className:"font-medium",children:e.registration_number})]}),e.bee_status&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"BEE Level:"}),(0,a.jsx)("span",{className:"font-medium",children:e.bee_status})]}),e.province&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Province:"}),(0,a.jsx)("span",{className:"font-medium capitalize",children:e.province.replace(/-/g," ")})]})]}),(0,a.jsxs)(r.CardFooter,{className:"flex gap-2",children:[(0,a.jsxs)(s.Button,{variant:"outline",size:"sm",className:"flex-1 bg-transparent",onClick:()=>o.push(`/dashboard/companies/${e.id}`),children:[(0,a.jsx)(u,{className:"h-3 w-3 mr-1"}),"Edit"]}),!e.is_primary&&(0,a.jsx)(s.Button,{variant:"outline",size:"sm",onClick:()=>w(e.id),children:(0,a.jsx)(c.Star,{className:"h-3 w-3"})}),(0,a.jsx)(s.Button,{variant:"outline",size:"sm",onClick:()=>C(e.id),children:(0,a.jsx)(m,{className:"h-3 w-3"})})]})]},e.id))})]})}e.s(["default",()=>f],851484)}]);