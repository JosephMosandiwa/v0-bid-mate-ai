(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,595287,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={callServer:function(){return l.callServer},createServerReference:function(){return i.createServerReference},findSourceMapURL:function(){return n.findSourceMapURL}};for(var r in s)Object.defineProperty(a,r,{enumerable:!0,get:s[r]});let l=e.r(210755),n=e.r(109019),i=e.r(634245)},184762,e=>{"use strict";var t=e.i(375298),a=e.i(647163);function s({className:e,...s}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...s})}e.s(["Textarea",()=>s])},189691,e=>{"use strict";let t=(0,e.i(197140).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],189691)},236159,e=>{"use strict";let t=(0,e.i(197140).default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>t],236159)},179311,e=>{"use strict";let t=(0,e.i(197140).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],179311)},120682,e=>{"use strict";var t=e.i(769107);let a=0,s=new Map,r=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),i({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},l=[],n={toasts:[]};function i(e){n=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?r(a):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(n,e),l.forEach(e=>{e(n)})}function c({...e}){let t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>i({type:"DISMISS_TOAST",toastId:t});return i({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>i({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function d(){let[e,a]=t.useState(n);return t.useEffect(()=>(l.push(a),()=>{let e=l.indexOf(a);e>-1&&l.splice(e,1)}),[e]),{...e,toast:o,dismiss:e=>i({type:"DISMISS_TOAST",toastId:e})}}let o=c;o.success=(e,t)=>c({title:e,...t??{},variant:"default"}),o.error=(e,t)=>c({title:e,...t??{},variant:"destructive"}),e.s(["useToast",()=>d])},507,e=>{"use strict";let t=(0,e.i(197140).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],507)},10859,e=>{"use strict";var t=e.i(375298),a=e.i(359871),s=e.i(931454),r=e.i(769107),l=e.i(970065),n=e.i(167881),i=e.i(23750),c=e.i(994179),d=e.i(768138),o=e.i(893629),m=e.i(476725),h=e.i(507),u=e.i(179311),x=e.i(236159),p=e.i(692626),g=e.i(6415),v=e.i(189691),f=e.i(184762),j=e.i(62870),S=e.i(595287),N=(0,S.createServerReference)("406ac9a12410c4d1e5c3a20b285241fb05f70730dc",S.callServer,void 0,S.findSourceMapURL,"addTenderToUser"),b=e.i(120682);function y(){let[e,S]=(0,r.useState)(""),[y,w]=(0,r.useState)(""),[T,C]=(0,r.useState)(!1),[k,I]=(0,r.useState)([]),[A,E]=(0,r.useState)(""),[_,F]=(0,r.useState)(""),[M,P]=(0,r.useState)("basic"),[O,D]=(0,r.useState)("all"),[B,L]=(0,r.useState)("all"),[R,z]=(0,r.useState)(""),[U,q]=(0,r.useState)(""),{toast:V}=(0,b.useToast)(),[$,H]=(0,r.useState)(null);(0,r.useEffect)(()=>{G()},[]),(0,r.useEffect)(()=>{"basic"===M&&K()},[O,B,R,U]);let G=async()=>{C(!0),F("");try{let e=new URLSearchParams({q:"",limit:"50"});console.log("[v0] Loading all tenders");let t=await fetch(`/api/tenders/search?${e.toString()}`);if(console.log("[v0] Load all tenders response status:",t.status),!t.ok){let e=await t.json();throw console.error("[v0] Load all tenders error response:",e),Error(e.details||"Failed to load tenders")}let a=await t.json();console.log("[v0] Load all tenders results:",a),0===a.total&&F("No tenders available yet. The database may need to be populated with scraped tenders."),I(a.tenders||[])}catch(e){F(e instanceof Error?e.message:"Failed to load tenders. Please try again."),console.error("[v0] Load all tenders error:",e)}finally{C(!1)}},K=async t=>{t&&t.preventDefault(),C(!0),F(""),I([]);try{let t=new URLSearchParams({q:e,limit:"50"});"all"!==O&&t.append("level",O),"all"!==B&&t.append("province",B),R&&t.append("dateFrom",R),U&&t.append("dateTo",U),console.log("[v0] Searching with params:",t.toString());let a=await fetch(`/api/tenders/search?${t.toString()}`);if(console.log("[v0] Search response status:",a.status),!a.ok){let e=await a.json();throw console.error("[v0] Search error response:",e),Error(e.details||"Failed to search tenders")}let s=await a.json();console.log("[v0] Search results:",s),0!==s.total||e||"all"!==O||"all"!==B||R||U||F("No tenders available yet. The database may need to be populated with scraped tenders."),I(s.tenders||[])}catch(e){F(e instanceof Error?e.message:"Failed to search tenders. Please try again."),console.error("[v0] Search error:",e)}finally{C(!1)}},W=async()=>{if(y.trim()){C(!0),F(""),E(""),I([]);try{let e=await fetch("/api/ai-tender-search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:y})});if(!e.ok)throw Error("Failed to search tenders");let t=await e.json();E(t.response||""),I(t.tenders||[])}catch(e){F("Failed to search tenders. Please try again."),console.error("[v0] AI search error:",e)}finally{C(!1)}}},Z=async e=>{H(e.id);let t=e.organization||e.source_name||"Unknown Organization",a=e.publishDate||e.publish_date||new Date().toISOString().split("T")[0],s=e.closeDate||e.close_date||a,r=e.value||e.estimated_value,l=e.url||e.tender_url;try{let n=await N({tenderId:e.id,title:e.title,organization:t,publishDate:a,closeDate:s,value:r,category:e.category,description:e.description,url:l,documents:e.documents});n.success?V({title:"Tender added",description:`${e.title} has been added to your tenders`}):V({title:"Error",description:n.error||"Failed to add tender",variant:"destructive"})}catch(e){console.error("[v0] Error adding tender:",e),V({title:"Error",description:"Failed to add tender",variant:"destructive"})}finally{H(null)}},J=async()=>{console.log("[v0] Testing search API directly...");try{let e=await fetch("/api/tenders/search?q=&limit=50");console.log("[v0] Response status:",e.status);let t=await e.json();console.log("[v0] Response data:",t),console.log("[v0] Number of tenders:",t.tenders?.length||0),console.log("[v0] Total from API:",t.total),t.tenders&&t.tenders.length>0&&(I(t.tenders),console.log("[v0] State updated with tenders"))}catch(e){console.error("[v0] API test error:",e)}};return(0,t.jsx)("div",{className:"min-h-screen bg-background",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-4 md:py-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl md:text-3xl font-bold",children:"Search Tenders"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[k.length>0&&(0,t.jsxs)(c.Badge,{variant:"secondary",className:"text-sm",children:[k.length," loaded"]}),(0,t.jsx)(n.Button,{onClick:J,variant:"outline",size:"sm",children:"Test Search API (Check Console)"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,t.jsxs)(n.Button,{variant:"basic"===M?"default":"outline",onClick:()=>P("basic"),className:"basic"!==M?"bg-transparent":"",size:"sm",children:[(0,t.jsx)(d.Search,{className:"h-4 w-4 mr-2"}),"Basic Search"]}),(0,t.jsxs)(n.Button,{variant:"ai"===M?"default":"outline",onClick:()=>P("ai"),className:"ai"!==M?"bg-transparent":"",size:"sm",children:[(0,t.jsx)(o.Sparkles,{className:"h-4 w-4 mr-2"}),"AI Assistant"]})]}),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(n.Button,{onClick:J,variant:"outline",size:"sm",children:"Test Search API (Check Console)"})}),"basic"===M?(0,t.jsxs)(l.Card,{className:"border-border",children:[(0,t.jsxs)(l.CardHeader,{children:[(0,t.jsx)(l.CardTitle,{className:"text-lg md:text-xl",children:"Basic Search"}),(0,t.jsx)(l.CardDescription,{className:"text-sm",children:"Search for tenders by keywords, category, or organization"})]}),(0,t.jsx)(l.CardContent,{children:(0,t.jsxs)("form",{onSubmit:K,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,t.jsx)(i.Input,{placeholder:"e.g., medical supplies, IT services...",value:e,onChange:e=>S(e.target.value),className:"flex-1"}),(0,t.jsx)(n.Button,{type:"submit",disabled:T,className:"w-full sm:w-auto",children:T?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Searching..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Search,{className:"h-4 w-4 mr-2"}),"Search"]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4",children:[(0,t.jsxs)(j.Select,{value:O,onValueChange:D,children:[(0,t.jsx)(j.SelectTrigger,{className:"w-full",children:(0,t.jsx)(j.SelectValue,{placeholder:"Filter by level"})}),(0,t.jsxs)(j.SelectContent,{children:[(0,t.jsx)(j.SelectItem,{value:"all",children:"All Levels"}),(0,t.jsx)(j.SelectItem,{value:"National",children:"National"}),(0,t.jsx)(j.SelectItem,{value:"Provincial",children:"Provincial"}),(0,t.jsx)(j.SelectItem,{value:"Metro",children:"Metro"}),(0,t.jsx)(j.SelectItem,{value:"SOE",children:"SOE"}),(0,t.jsx)(j.SelectItem,{value:"Public Entity",children:"Public Entity"})]})]}),(0,t.jsxs)(j.Select,{value:B,onValueChange:L,children:[(0,t.jsx)(j.SelectTrigger,{className:"w-full",children:(0,t.jsx)(j.SelectValue,{placeholder:"Filter by province"})}),(0,t.jsxs)(j.SelectContent,{children:[(0,t.jsx)(j.SelectItem,{value:"all",children:"All Provinces"}),(0,t.jsx)(j.SelectItem,{value:"Gauteng",children:"Gauteng"}),(0,t.jsx)(j.SelectItem,{value:"Western Cape",children:"Western Cape"}),(0,t.jsx)(j.SelectItem,{value:"KwaZulu-Natal",children:"KwaZulu-Natal"}),(0,t.jsx)(j.SelectItem,{value:"Eastern Cape",children:"Eastern Cape"}),(0,t.jsx)(j.SelectItem,{value:"Free State",children:"Free State"}),(0,t.jsx)(j.SelectItem,{value:"Limpopo",children:"Limpopo"}),(0,t.jsx)(j.SelectItem,{value:"Mpumalanga",children:"Mpumalanga"}),(0,t.jsx)(j.SelectItem,{value:"Northern Cape",children:"Northern Cape"}),(0,t.jsx)(j.SelectItem,{value:"North West",children:"North West"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{htmlFor:"dateFrom",className:"text-xs text-muted-foreground",children:"Closing From"}),(0,t.jsx)(i.Input,{id:"dateFrom",type:"date",value:R,onChange:e=>z(e.target.value),className:"w-full"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{htmlFor:"dateTo",className:"text-xs text-muted-foreground",children:"Closing To"}),(0,t.jsx)(i.Input,{id:"dateTo",type:"date",value:U,onChange:e=>q(e.target.value),className:"w-full"})]})]}),("all"!==O||"all"!==B||R||U)&&(0,t.jsx)(n.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{D("all"),L("all"),z(""),q("")},className:"w-full sm:w-auto",children:"Clear Filters"}),_&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:_})]})})]}):(0,t.jsxs)(l.Card,{className:"border-border bg-primary/5",children:[(0,t.jsxs)(l.CardHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.Sparkles,{className:"h-5 w-5 text-primary"}),(0,t.jsx)(l.CardTitle,{children:"BidMate AI Assistant"})]}),(0,t.jsx)(l.CardDescription,{children:"Describe what you're looking for in natural language and let AI find relevant tenders"})]}),(0,t.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,t.jsx)(f.Textarea,{placeholder:"e.g., I'm looking for construction tenders in Gauteng province worth more than R5 million that close in the next 30 days...",value:y,onChange:e=>w(e.target.value),rows:4}),(0,t.jsx)(n.Button,{onClick:W,disabled:T||!y.trim(),className:"w-full",children:T?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Searching..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Sparkles,{className:"h-4 w-4 mr-2"}),"Search with AI"]})}),_&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:_}),A&&(0,t.jsxs)("div",{className:"mt-4 p-4 rounded-lg bg-background border border-border",children:[(0,t.jsxs)("div",{className:"flex items-start gap-2 mb-2",children:[(0,t.jsx)(g.MessageSquare,{className:"h-4 w-4 text-primary mt-1"}),(0,t.jsx)("p",{className:"text-sm font-medium text-foreground",children:"AI Response"})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed",children:A})]})]})]}),k.length>0&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)("h2",{className:"text-lg md:text-xl font-semibold text-foreground",children:e||"all"!==O||"all"!==B||R||U?`Found ${k.length} ${1===k.length?"Tender":"Tenders"}`:`All Tenders (${k.length})`})}),(0,t.jsx)("div",{className:"grid gap-4",children:k.map(e=>{let r=e.organization||e.source_name||"Unknown Organization",i=e.closeDate||e.close_date,d=e.value||e.estimated_value,o=e.url||e.tender_url,g=e.tender_type,f=e.location||e.source_province;return(0,t.jsx)(l.Card,{className:"border-border hover:border-primary transition-colors",children:(0,t.jsx)(l.CardHeader,{className:"p-4 md:p-6",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"flex items-start gap-2 mb-2 flex-wrap",children:(0,t.jsx)(a.default,{href:`/dashboard/scraped-tenders/${e.id}`,className:"flex-1 min-w-0",children:(0,t.jsx)(l.CardTitle,{className:"text-base md:text-lg hover:text-primary transition-colors cursor-pointer break-words",children:e.title})})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3 flex-wrap",children:[(0,t.jsx)(c.Badge,{className:"bg-primary/10 text-primary text-xs",children:e.category||"General"}),g&&(0,t.jsx)(c.Badge,{variant:"outline",className:"text-xs",children:g}),e.source_level&&(0,t.jsx)(c.Badge,{variant:"outline",className:"text-xs",children:e.source_level}),f&&(0,t.jsx)(c.Badge,{variant:"secondary",className:"text-xs",children:f})]}),(0,t.jsxs)(l.CardDescription,{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 flex-wrap text-xs md:text-sm",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(m.Building2,{className:"h-4 w-4 flex-shrink-0"}),(0,t.jsx)("span",{className:"truncate",children:r})]}),i&&(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(h.Calendar,{className:"h-4 w-4 flex-shrink-0"}),"Closes: ",new Date(i).toLocaleDateString()]}),d&&(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(u.DollarSign,{className:"h-4 w-4 flex-shrink-0"}),d]})]}),(0,t.jsx)("p",{className:"text-xs md:text-sm line-clamp-2",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(s.FileText,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),(0,t.jsxs)("span",{className:"text-xs md:text-sm text-muted-foreground",children:[e.document_count??e.document_urls?.length??0," ",(e.document_count??e.document_urls?.length??0)===1?"document":"documents"]})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,t.jsx)(n.Button,{size:"sm",variant:"outline",asChild:!0,className:"bg-transparent w-full sm:w-auto",children:(0,t.jsxs)(a.default,{href:`/dashboard/scraped-tenders/${e.id}`,children:[(0,t.jsx)(s.FileText,{className:"h-4 w-4 mr-2"}),"View Details"]})}),o&&(0,t.jsx)(n.Button,{variant:"outline",size:"sm",asChild:!0,className:"bg-transparent w-full sm:w-auto",children:(0,t.jsxs)("a",{href:o,target:"_blank",rel:"noopener noreferrer",children:[(0,t.jsx)(x.ExternalLink,{className:"h-4 w-4 mr-2"}),"Original Listing"]})}),(0,t.jsx)(n.Button,{size:"sm",onClick:()=>Z(e),disabled:$===e.id,className:"w-full sm:w-auto",children:$===e.id?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Adding..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Plus,{className:"h-4 w-4 mr-2"}),"Add to My Tenders"]})})]})]})})},e.id)})})]}),!T&&0===k.length&&(0,t.jsx)(l.Card,{className:"border-border",children:(0,t.jsxs)(l.CardContent,{className:"p-12 text-center",children:[(0,t.jsx)(d.Search,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg md:text-xl font-semibold text-foreground mb-2",children:"No Tenders Found"}),(0,t.jsx)("p",{className:"text-sm md:text-base text-muted-foreground",children:e||"all"!==O||"all"!==B||R||U?"Try adjusting your search terms or filters":"No tenders available yet. Please run the scraper to populate the database."})]})})]})]})})}e.s(["default",()=>y],10859)}]);